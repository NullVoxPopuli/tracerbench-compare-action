"use strict";function cov_2i3d55kiwu(){var path="/Users/malynch/D/tracerbench/packages/cli/src/commands/marker-timings.ts";var hash="7844157caaa811263919a4c2a8219d8f34717aa6";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/malynch/D/tracerbench/packages/cli/src/commands/marker-timings.ts",statementMap:{"0":{start:{line:2,column:0},end:{line:2,column:62}},"1":{start:{line:3,column:19},end:{line:3,column:38}},"2":{start:{line:4,column:13},end:{line:4,column:28}},"3":{start:{line:5,column:25},end:{line:5,column:53}},"4":{start:{line:6,column:16},end:{line:6,column:43}},"5":{start:{line:7,column:16},end:{line:7,column:43}},"6":{start:{line:10,column:26},end:{line:10,column:51}},"7":{start:{line:11,column:30},end:{line:11,column:35}},"8":{start:{line:12,column:23},end:{line:12,column:56}},"9":{start:{line:13,column:27},end:{line:13,column:74}},"10":{start:{line:14,column:20},end:{line:14,column:24}},"11":{start:{line:15,column:24},end:{line:15,column:26}},"12":{start:{line:16,column:27},end:{line:16,column:31}},"13":{start:{line:17,column:20},end:{line:17,column:24}},"14":{start:{line:18,column:8},end:{line:20,column:9}},"15":{start:{line:19,column:12},end:{line:19,column:73}},"16":{start:{line:21,column:8},end:{line:26,column:9}},"17":{start:{line:22,column:12},end:{line:22,column:76}},"18":{start:{line:25,column:12},end:{line:25,column:26}},"19":{start:{line:27,column:8},end:{line:32,column:9}},"20":{start:{line:28,column:12},end:{line:28,column:57}},"21":{start:{line:31,column:12},end:{line:31,column:26}},"22":{start:{line:33,column:8},end:{line:38,column:9}},"23":{start:{line:34,column:12},end:{line:34,column:57}},"24":{start:{line:37,column:12},end:{line:37,column:31}},"25":{start:{line:39,column:8},end:{line:41,column:9}},"26":{start:{line:40,column:12},end:{line:40,column:42}},"27":{start:{line:42,column:8},end:{line:68,column:11}},"28":{start:{line:43,column:31},end:{line:43,column:83}},"29":{start:{line:46,column:12},end:{line:67,column:13}},"30":{start:{line:47,column:16},end:{line:47,column:37}},"31":{start:{line:48,column:16},end:{line:48,column:97}},"32":{start:{line:50,column:17},end:{line:67,column:13}},"33":{start:{line:51,column:16},end:{line:53,column:17}},"34":{start:{line:52,column:20},end:{line:52,column:41}},"35":{start:{line:54,column:16},end:{line:54,column:97}},"36":{start:{line:56,column:17},end:{line:67,column:13}},"37":{start:{line:57,column:16},end:{line:60,column:17}},"38":{start:{line:58,column:39},end:{line:58,column:67}},"39":{start:{line:59,column:20},end:{line:59,column:101}},"40":{start:{line:62,column:17},end:{line:67,column:13}},"41":{start:{line:63,column:33},end:{line:63,column:43}},"42":{start:{line:64,column:16},end:{line:66,column:17}},"43":{start:{line:65,column:20},end:{line:65,column:127}},"44":{start:{line:71,column:0},end:{line:71,column:32}},"45":{start:{line:72,column:0},end:{line:72,column:70}},"46":{start:{line:73,column:0},end:{line:78,column:2}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:9,column:4},end:{line:9,column:5}},loc:{start:{line:9,column:16},end:{line:69,column:5}},line:9},"1":{name:"(anonymous_1)",decl:{start:{line:43,column:20},end:{line:43,column:21}},loc:{start:{line:43,column:31},end:{line:43,column:83}},line:43},"2":{name:"(anonymous_2)",decl:{start:{line:45,column:21},end:{line:45,column:22}},loc:{start:{line:45,column:32},end:{line:68,column:9}},line:45},"3":{name:"(anonymous_3)",decl:{start:{line:58,column:32},end:{line:58,column:33}},loc:{start:{line:58,column:39},end:{line:58,column:67}},line:58}},branchMap:{"0":{loc:{start:{line:13,column:27},end:{line:13,column:74}},type:"cond-expr",locations:[{start:{line:13,column:46},end:{line:13,column:62}},{start:{line:13,column:65},end:{line:13,column:74}}],line:13},"1":{loc:{start:{line:18,column:8},end:{line:20,column:9}},type:"if",locations:[{start:{line:18,column:8},end:{line:20,column:9}},{start:{line:18,column:8},end:{line:20,column:9}}],line:18},"2":{loc:{start:{line:18,column:12},end:{line:18,column:39}},type:"binary-expr",locations:[{start:{line:18,column:12},end:{line:18,column:23}},{start:{line:18,column:27},end:{line:18,column:39}}],line:18},"3":{loc:{start:{line:33,column:8},end:{line:38,column:9}},type:"if",locations:[{start:{line:33,column:8},end:{line:38,column:9}},{start:{line:33,column:8},end:{line:38,column:9}}],line:33},"4":{loc:{start:{line:39,column:8},end:{line:41,column:9}},type:"if",locations:[{start:{line:39,column:8},end:{line:41,column:9}},{start:{line:39,column:8},end:{line:41,column:9}}],line:39},"5":{loc:{start:{line:43,column:31},end:{line:43,column:83}},type:"binary-expr",locations:[{start:{line:43,column:31},end:{line:43,column:52}},{start:{line:43,column:56},end:{line:43,column:83}}],line:43},"6":{loc:{start:{line:46,column:12},end:{line:67,column:13}},type:"if",locations:[{start:{line:46,column:12},end:{line:67,column:13}},{start:{line:46,column:12},end:{line:67,column:13}}],line:46},"7":{loc:{start:{line:50,column:17},end:{line:67,column:13}},type:"if",locations:[{start:{line:50,column:17},end:{line:67,column:13}},{start:{line:50,column:17},end:{line:67,column:13}}],line:50},"8":{loc:{start:{line:51,column:16},end:{line:53,column:17}},type:"if",locations:[{start:{line:51,column:16},end:{line:53,column:17}},{start:{line:51,column:16},end:{line:53,column:17}}],line:51},"9":{loc:{start:{line:56,column:17},end:{line:67,column:13}},type:"if",locations:[{start:{line:56,column:17},end:{line:67,column:13}},{start:{line:56,column:17},end:{line:67,column:13}}],line:56},"10":{loc:{start:{line:57,column:16},end:{line:60,column:17}},type:"if",locations:[{start:{line:57,column:16},end:{line:60,column:17}},{start:{line:57,column:16},end:{line:60,column:17}}],line:57},"11":{loc:{start:{line:57,column:20},end:{line:58,column:68}},type:"binary-expr",locations:[{start:{line:57,column:20},end:{line:57,column:39}},{start:{line:58,column:20},end:{line:58,column:68}}],line:57},"12":{loc:{start:{line:62,column:17},end:{line:67,column:13}},type:"if",locations:[{start:{line:62,column:17},end:{line:67,column:13}},{start:{line:62,column:17},end:{line:67,column:13}}],line:62},"13":{loc:{start:{line:64,column:16},end:{line:66,column:17}},type:"if",locations:[{start:{line:64,column:16},end:{line:66,column:17}},{start:{line:64,column:16},end:{line:66,column:17}}],line:64}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0},f:{"0":0,"1":0,"2":0,"3":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0]},inputSourceMap:{version:3,file:"/Users/malynch/D/tracerbench/packages/cli/src/commands/marker-timings.ts",sources:["/Users/malynch/D/tracerbench/packages/cli/src/commands/marker-timings.ts"],names:[],mappings:"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",sourcesContent:["import { readJSONSync } from \"fs-extra\";\nimport * as path from \"path\";\n\nimport { TBBaseCommand } from \"../command-config\";\nimport { filter, traceFrame, tracepath, url } from \"../helpers/flags\";\nimport {\n  byTime,\n  collect,\n  findFrame,\n  format,\n  IEvent,\n  isCommitLoad,\n  isFrameMark,\n  isFrameNavigationStart,\n  isMark,\n  isUserMark,\n  setTraceEvents,\n} from \"../helpers/utils\";\n\nexport default class MarkerTimings extends TBBaseCommand {\n  public static description = \"Get list of all user-timings from trace\";\n\n  public static flags = {\n    tracepath: tracepath({ required: true }),\n    filter: filter(),\n    url: url({ required: true }),\n    traceFrame: traceFrame(),\n  };\n\n  public async run(): Promise<void> {\n    const { flags } = this.parse(MarkerTimings);\n    const { tracepath } = flags;\n    const filter = collect(flags.filter, []);\n    const traceFrame: string = flags.traceFrame ? flags.traceFrame : flags.url;\n\n    let frame: any = null;\n    let startTime = -1;\n    let rawTraceData: any = null;\n    let trace: any = null;\n\n    if (!traceFrame && !url) {\n      this.error(`Either a traceFrame or url are required flags.`);\n    }\n\n    try {\n      rawTraceData = readJSONSync(path.resolve(tracepath));\n    } catch (e) {\n      this.error(e);\n    }\n\n    try {\n      trace = setTraceEvents(rawTraceData);\n    } catch (e) {\n      this.error(e);\n    }\n\n    if (traceFrame.startsWith(\"http\")) {\n      frame = findFrame(trace, traceFrame);\n    } else {\n      frame = traceFrame;\n    }\n    if (!frame) {\n      this.error(`frame not found`);\n    }\n\n    trace\n      .filter((event: IEvent) => isMark(event) || isCommitLoad(event))\n      .sort(byTime)\n      .forEach((event: any) => {\n        if (isFrameNavigationStart(frame, event)) {\n          startTime = event.ts;\n          this.log(\n            `Marker Timings: ${format(event.ts, startTime)} ${event.name}`\n          );\n        } else if (isFrameMark(frame, event)) {\n          if (startTime === -1) {\n            startTime = event.ts;\n          }\n          this.log(\n            `Marker Timings: ${format(event.ts, startTime)} ${event.name}`\n          );\n        } else if (isUserMark(event)) {\n          if (\n            filter.length === 0 ||\n            filter.some((f: any) => event.name.indexOf(f) !== -1)\n          ) {\n            this.log(\n              `Marker Timings: ${format(event.ts, startTime)} ${event.name}`\n            );\n          }\n        } else if (isCommitLoad(event)) {\n          const { data } = event.args;\n          if (data.frame === frame) {\n            this.log(\n              `Marker Timings: ${format(event.ts, startTime)} ${event.name} ${\n                data.frame\n              } ${data.url}`\n            );\n          }\n        }\n      });\n  }\n}\n"]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"7844157caaa811263919a4c2a8219d8f34717aa6"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];cov_2i3d55kiwu=function(){return actualCoverage;};return actualCoverage;}cov_2i3d55kiwu().s[0]++;Object.defineProperty(exports,"__esModule",{value:true});const fs_extra_1=(cov_2i3d55kiwu().s[1]++,require("fs-extra"));const path=(cov_2i3d55kiwu().s[2]++,require("path"));const command_config_1=(cov_2i3d55kiwu().s[3]++,require("../command-config"));const flags_1=(cov_2i3d55kiwu().s[4]++,require("../helpers/flags"));const utils_1=(cov_2i3d55kiwu().s[5]++,require("../helpers/utils"));class MarkerTimings extends(command_config_1.TBBaseCommand){async run(){cov_2i3d55kiwu().f[0]++;const{flags}=(cov_2i3d55kiwu().s[6]++,this.parse(MarkerTimings));const{tracepath}=(cov_2i3d55kiwu().s[7]++,flags);const filter=(cov_2i3d55kiwu().s[8]++,utils_1.collect(flags.filter,[]));const traceFrame=(cov_2i3d55kiwu().s[9]++,flags.traceFrame?(cov_2i3d55kiwu().b[0][0]++,flags.traceFrame):(cov_2i3d55kiwu().b[0][1]++,flags.url));let frame=(cov_2i3d55kiwu().s[10]++,null);let startTime=(cov_2i3d55kiwu().s[11]++,-1);let rawTraceData=(cov_2i3d55kiwu().s[12]++,null);let trace=(cov_2i3d55kiwu().s[13]++,null);cov_2i3d55kiwu().s[14]++;if((cov_2i3d55kiwu().b[2][0]++,!traceFrame)&&(cov_2i3d55kiwu().b[2][1]++,!flags_1.url)){cov_2i3d55kiwu().b[1][0]++;cov_2i3d55kiwu().s[15]++;this.error(`Either a traceFrame or url are required flags.`);}else{cov_2i3d55kiwu().b[1][1]++;}cov_2i3d55kiwu().s[16]++;try{cov_2i3d55kiwu().s[17]++;rawTraceData=fs_extra_1.readJSONSync(path.resolve(tracepath));}catch(e){cov_2i3d55kiwu().s[18]++;this.error(e);}cov_2i3d55kiwu().s[19]++;try{cov_2i3d55kiwu().s[20]++;trace=utils_1.setTraceEvents(rawTraceData);}catch(e){cov_2i3d55kiwu().s[21]++;this.error(e);}cov_2i3d55kiwu().s[22]++;if(traceFrame.startsWith("http")){cov_2i3d55kiwu().b[3][0]++;cov_2i3d55kiwu().s[23]++;frame=utils_1.findFrame(trace,traceFrame);}else{cov_2i3d55kiwu().b[3][1]++;cov_2i3d55kiwu().s[24]++;frame=traceFrame;}cov_2i3d55kiwu().s[25]++;if(!frame){cov_2i3d55kiwu().b[4][0]++;cov_2i3d55kiwu().s[26]++;this.error(`frame not found`);}else{cov_2i3d55kiwu().b[4][1]++;}cov_2i3d55kiwu().s[27]++;trace.filter(event=>{cov_2i3d55kiwu().f[1]++;cov_2i3d55kiwu().s[28]++;return(cov_2i3d55kiwu().b[5][0]++,utils_1.isMark(event))||(cov_2i3d55kiwu().b[5][1]++,utils_1.isCommitLoad(event));}).sort(utils_1.byTime).forEach(event=>{cov_2i3d55kiwu().f[2]++;cov_2i3d55kiwu().s[29]++;if(utils_1.isFrameNavigationStart(frame,event)){cov_2i3d55kiwu().b[6][0]++;cov_2i3d55kiwu().s[30]++;startTime=event.ts;cov_2i3d55kiwu().s[31]++;this.log(`Marker Timings: ${utils_1.format(event.ts,startTime)} ${event.name}`);}else{cov_2i3d55kiwu().b[6][1]++;cov_2i3d55kiwu().s[32]++;if(utils_1.isFrameMark(frame,event)){cov_2i3d55kiwu().b[7][0]++;cov_2i3d55kiwu().s[33]++;if(startTime===-1){cov_2i3d55kiwu().b[8][0]++;cov_2i3d55kiwu().s[34]++;startTime=event.ts;}else{cov_2i3d55kiwu().b[8][1]++;}cov_2i3d55kiwu().s[35]++;this.log(`Marker Timings: ${utils_1.format(event.ts,startTime)} ${event.name}`);}else{cov_2i3d55kiwu().b[7][1]++;cov_2i3d55kiwu().s[36]++;if(utils_1.isUserMark(event)){cov_2i3d55kiwu().b[9][0]++;cov_2i3d55kiwu().s[37]++;if((cov_2i3d55kiwu().b[11][0]++,filter.length===0)||(cov_2i3d55kiwu().b[11][1]++,filter.some(f=>{cov_2i3d55kiwu().f[3]++;cov_2i3d55kiwu().s[38]++;return event.name.indexOf(f)!==-1;}))){cov_2i3d55kiwu().b[10][0]++;cov_2i3d55kiwu().s[39]++;this.log(`Marker Timings: ${utils_1.format(event.ts,startTime)} ${event.name}`);}else{cov_2i3d55kiwu().b[10][1]++;}}else{cov_2i3d55kiwu().b[9][1]++;cov_2i3d55kiwu().s[40]++;if(utils_1.isCommitLoad(event)){cov_2i3d55kiwu().b[12][0]++;const{data}=(cov_2i3d55kiwu().s[41]++,event.args);cov_2i3d55kiwu().s[42]++;if(data.frame===frame){cov_2i3d55kiwu().b[13][0]++;cov_2i3d55kiwu().s[43]++;this.log(`Marker Timings: ${utils_1.format(event.ts,startTime)} ${event.name} ${data.frame} ${data.url}`);}else{cov_2i3d55kiwu().b[13][1]++;}}else{cov_2i3d55kiwu().b[12][1]++;}}}}});}}cov_2i3d55kiwu().s[44]++;exports.default=MarkerTimings;cov_2i3d55kiwu().s[45]++;MarkerTimings.description="Get list of all user-timings from trace";cov_2i3d55kiwu().s[46]++;MarkerTimings.flags={tracepath:flags_1.tracepath({required:true}),filter:flags_1.filter(),url:flags_1.url({required:true}),traceFrame:flags_1.traceFrame()};//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL21hbHluY2gvRC90cmFjZXJiZW5jaC9wYWNrYWdlcy9jbGkvc3JjL2NvbW1hbmRzL21hcmtlci10aW1pbmdzLnRzIiwic291cmNlcyI6WyIvVXNlcnMvbWFseW5jaC9EL3RyYWNlcmJlbmNoL3BhY2thZ2VzL2NsaS9zcmMvY29tbWFuZHMvbWFya2VyLXRpbWluZ3MudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSx1Q0FBd0M7QUFDeEMsNkJBQTZCO0FBRTdCLHNEQUFrRDtBQUNsRCw0Q0FBc0U7QUFDdEUsNENBWTBCO0FBRTFCLE1BQXFCLGFBQWMsU0FBUSw4QkFBYTtJQVUvQyxLQUFLLENBQUMsR0FBRztRQUNkLE1BQU0sRUFBRSxLQUFLLEVBQUUsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLGFBQWEsQ0FBQyxDQUFDO1FBQzVDLE1BQU0sRUFBRSxTQUFTLEVBQUUsR0FBRyxLQUFLLENBQUM7UUFDNUIsTUFBTSxNQUFNLEdBQUcsZUFBTyxDQUFDLEtBQUssQ0FBQyxNQUFNLEVBQUUsRUFBRSxDQUFDLENBQUM7UUFDekMsTUFBTSxVQUFVLEdBQVcsS0FBSyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQztRQUUzRSxJQUFJLEtBQUssR0FBUSxJQUFJLENBQUM7UUFDdEIsSUFBSSxTQUFTLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDbkIsSUFBSSxZQUFZLEdBQVEsSUFBSSxDQUFDO1FBQzdCLElBQUksS0FBSyxHQUFRLElBQUksQ0FBQztRQUV0QixJQUFJLENBQUMsVUFBVSxJQUFJLENBQUMsV0FBRyxFQUFFO1lBQ3ZCLElBQUksQ0FBQyxLQUFLLENBQUMsZ0RBQWdELENBQUMsQ0FBQztTQUM5RDtRQUVELElBQUk7WUFDRixZQUFZLEdBQUcsdUJBQVksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUM7U0FDdEQ7UUFBQyxP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RUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFLENBQUM7SUFDNUIsVUFBVSxFQUFFLGtCQUFVLEVBQUU7Q0FDekIsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHJlYWRKU09OU3luYyB9IGZyb20gXCJmcy1leHRyYVwiO1xuaW1wb3J0ICogYXMgcGF0aCBmcm9tIFwicGF0aFwiO1xuXG5pbXBvcnQgeyBUQkJhc2VDb21tYW5kIH0gZnJvbSBcIi4uL2NvbW1hbmQtY29uZmlnXCI7XG5pbXBvcnQgeyBmaWx0ZXIsIHRyYWNlRnJhbWUsIHRyYWNlcGF0aCwgdXJsIH0gZnJvbSBcIi4uL2hlbHBlcnMvZmxhZ3NcIjtcbmltcG9ydCB7XG4gIGJ5VGltZSxcbiAgY29sbGVjdCxcbiAgZmluZEZyYW1lLFxuICBmb3JtYXQsXG4gIElFdmVudCxcbiAgaXNDb21taXRMb2FkLFxuICBpc0ZyYW1lTWFyayxcbiAgaXNGcmFtZU5hdmlnYXRpb25TdGFydCxcbiAgaXNNYXJrLFxuICBpc1VzZXJNYXJrLFxuICBzZXRUcmFjZUV2ZW50cyxcbn0gZnJvbSBcIi4uL2hlbHBlcnMvdXRpbHNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTWFya2VyVGltaW5ncyBleHRlbmRzIFRCQmFzZUNvbW1hbmQge1xuICBwdWJsaWMgc3RhdGljIGRlc2NyaXB0aW9uID0gXCJHZXQgbGlzdCBvZiBhbGwgdXNlci10aW1pbmdzIGZyb20gdHJhY2VcIjtcblxuICBwdWJsaWMgc3RhdGljIGZsYWdzID0ge1xuICAgIHRyYWNlcGF0aDogdHJhY2VwYXRoKHsgcmVxdWlyZWQ6IHRydWUgfSksXG4gICAgZmlsdGVyOiBmaWx0ZXIoKSxcbiAgICB1cmw6IHVybCh7IHJlcXVpcmVkOiB0cnVlIH0pLFxuICAgIHRyYWNlRnJhbWU6IHRyYWNlRnJhbWUoKSxcbiAgfTtcblxuICBwdWJsaWMgYXN5bmMgcnVuKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IHsgZmxhZ3MgfSA9IHRoaXMucGFyc2UoTWFya2VyVGltaW5ncyk7XG4gICAgY29uc3QgeyB0cmFjZXBhdGggfSA9IGZsYWdzO1xuICAgIGNvbnN0IGZpbHRlciA9IGNvbGxlY3QoZmxhZ3MuZmlsdGVyLCBbXSk7XG4gICAgY29uc3QgdHJhY2VGcmFtZTogc3RyaW5nID0gZmxhZ3MudHJhY2VGcmFtZSA/IGZsYWdzLnRyYWNlRnJhbWUgOiBmbGFncy51cmw7XG5cbiAgICBsZXQgZnJhbWU6IGFueSA9IG51bGw7XG4gICAgbGV0IHN0YXJ0VGltZSA9IC0xO1xuICAgIGxldCByYXdUcmFjZURhdGE6IGFueSA9IG51bGw7XG4gICAgbGV0IHRyYWNlOiBhbnkgPSBudWxsO1xuXG4gICAgaWYgKCF0cmFjZUZyYW1lICYmICF1cmwpIHtcbiAgICAgIHRoaXMuZXJyb3IoYEVpdGhlciBhIHRyYWNlRnJhbWUgb3IgdXJsIGFyZSByZXF1aXJlZCBmbGFncy5gKTtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgcmF3VHJhY2VEYXRhID0gcmVhZEpTT05TeW5jKHBhdGgucmVzb2x2ZSh0cmFjZXBhdGgpKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICB0aGlzLmVycm9yKGUpO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICB0cmFjZSA9IHNldFRyYWNlRXZlbnRzKHJhd1RyYWNlRGF0YSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgdGhpcy5lcnJvcihlKTtcbiAgICB9XG5cbiAgICBpZiAodHJhY2VGcmFtZS5zdGFydHNXaXRoKFwiaHR0cFwiKSkge1xuICAgICAgZnJhbWUgPSBmaW5kRnJhbWUodHJhY2UsIHRyYWNlRnJhbWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICBmcmFtZSA9IHRyYWNlRnJhbWU7XG4gICAgfVxuICAgIGlmICghZnJhbWUpIHtcbiAgICAgIHRoaXMuZXJyb3IoYGZyYW1lIG5vdCBmb3VuZGApO1xuICAgIH1cblxuICAgIHRyYWNlXG4gICAgICAuZmlsdGVyKChldmVudDogSUV2ZW50KSA9PiBpc01hcmsoZXZlbnQpIHx8IGlzQ29tbWl0TG9hZChldmVudCkpXG4gICAgICAuc29ydChieVRpbWUpXG4gICAgICAuZm9yRWFjaCgoZXZlbnQ6IGFueSkgPT4ge1xuICAgICAgICBpZiAoaXNGcmFtZU5hdmlnYXRpb25TdGFydChmcmFtZSwgZXZlbnQpKSB7XG4gICAgICAgICAgc3RhcnRUaW1lID0gZXZlbnQudHM7XG4gICAgICAgICAgdGhpcy5sb2coXG4gICAgICAgICAgICBgTWFya2VyIFRpbWluZ3M6ICR7Zm9ybWF0KGV2ZW50LnRzLCBzdGFydFRpbWUpfSAke2V2ZW50Lm5hbWV9YFxuICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSBpZiAoaXNGcmFtZU1hcmsoZnJhbWUsIGV2ZW50KSkge1xuICAgICAgICAgIGlmIChzdGFydFRpbWUgPT09IC0xKSB7XG4gICAgICAgICAgICBzdGFydFRpbWUgPSBldmVudC50cztcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5sb2coXG4gICAgICAgICAgICBgTWFya2VyIFRpbWluZ3M6ICR7Zm9ybWF0KGV2ZW50LnRzLCBzdGFydFRpbWUpfSAke2V2ZW50Lm5hbWV9YFxuICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSBpZiAoaXNVc2VyTWFyayhldmVudCkpIHtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBmaWx0ZXIubGVuZ3RoID09PSAwIHx8XG4gICAgICAgICAgICBmaWx0ZXIuc29tZSgoZjogYW55KSA9PiBldmVudC5uYW1lLmluZGV4T2YoZikgIT09IC0xKVxuICAgICAgICAgICkge1xuICAgICAgICAgICAgdGhpcy5sb2coXG4gICAgICAgICAgICAgIGBNYXJrZXIgVGltaW5nczogJHtmb3JtYXQoZXZlbnQudHMsIHN0YXJ0VGltZSl9ICR7ZXZlbnQubmFtZX1gXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChpc0NvbW1pdExvYWQoZXZlbnQpKSB7XG4gICAgICAgICAgY29uc3QgeyBkYXRhIH0gPSBldmVudC5hcmdzO1xuICAgICAgICAgIGlmIChkYXRhLmZyYW1lID09PSBmcmFtZSkge1xuICAgICAgICAgICAgdGhpcy5sb2coXG4gICAgICAgICAgICAgIGBNYXJrZXIgVGltaW5nczogJHtmb3JtYXQoZXZlbnQudHMsIHN0YXJ0VGltZSl9ICR7ZXZlbnQubmFtZX0gJHtcbiAgICAgICAgICAgICAgICBkYXRhLmZyYW1lXG4gICAgICAgICAgICAgIH0gJHtkYXRhLnVybH1gXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gIH1cbn1cbiJdfQ==
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9tYWx5bmNoL0QvdHJhY2VyYmVuY2gvcGFja2FnZXMvY2xpL3NyYy9jb21tYW5kcy9tYXJrZXItdGltaW5ncy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoib29aQUFBLEtBQUEsQ0FBQSxVQUFBLDBCQUFBLE9BQUEsQ0FBQSxVQUFBLENBQUEsQ0FBQSxDQUNBLEtBQUEsQ0FBQSxJQUFBLDBCQUFBLE9BQUEsQ0FBQSxNQUFBLENBQUEsQ0FBQSxDQUVBLEtBQUEsQ0FBQSxnQkFBQSwwQkFBQSxPQUFBLENBQUEsbUJBQUEsQ0FBQSxDQUFBLENBQ0EsS0FBQSxDQUFBLE9BQUEsMEJBQUEsT0FBQSxDQUFBLGtCQUFBLENBQUEsQ0FBQSxDQUNBLEtBQUEsQ0FBQSxPQUFBLDBCQUFBLE9BQUEsQ0FBQSxrQkFBQSxDQUFBLENBQUEsQ0FjQSxLQUFxQixDQUFBLGFBQXJCLFNBQTJDLGdCQUFBLENBQUEsYUFBM0MsQ0FBd0QsQ0FVL0MsS0FBTSxDQUFBLEdBQU4sRUFBUyx5QkFDZCxLQUFNLENBQUUsS0FBRiwyQkFBWSxLQUFLLEtBQUwsQ0FBVyxhQUFYLENBQVosQ0FBTixDQUNBLEtBQU0sQ0FBRSxTQUFGLDJCQUFnQixLQUFoQixDQUFOLENBQ0EsS0FBTSxDQUFBLE1BQU0sMEJBQUcsT0FBQSxDQUFBLE9BQUEsQ0FBUSxLQUFLLENBQUMsTUFBZCxDQUFzQixFQUF0QixDQUFILENBQVosQ0FDQSxLQUFNLENBQUEsVUFBVSwwQkFBVyxLQUFLLENBQUMsVUFBTiw2QkFBbUIsS0FBSyxDQUFDLFVBQXpCLDhCQUFzQyxLQUFLLENBQUMsR0FBNUMsQ0FBWCxDQUFoQixDQUVBLEdBQUksQ0FBQSxLQUFLLDJCQUFRLElBQVIsQ0FBVCxDQUNBLEdBQUksQ0FBQSxTQUFTLDJCQUFHLENBQUMsQ0FBSixDQUFiLENBQ0EsR0FBSSxDQUFBLFlBQVksMkJBQVEsSUFBUixDQUFoQixDQUNBLEdBQUksQ0FBQSxLQUFLLDJCQUFRLElBQVIsQ0FBVCxDQVRjLHlCQVdkLEdB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RUFBYixDQUFpQixTQUFqQixDQUEyQixJQUFJLEtBQUssQ0FBQyxJQUFJLElBQzFELElBQUksQ0FBQyxLQUNQLElBQUksSUFBSSxDQUFDLEdBQUcsRUFIZCxFQUtELENBTkQsa0NBT0QsQ0FUTSxrQ0FTTixHQUNGLENBbkNILEVBb0NELENBbEZxRCxDLHlCQUF4RCxPQUFBLENBQUEsT0FBQSxDQUFBLGFBQUEsQyx5QkFDZ0IsYUFBQSxDQUFBLFdBQUEsQ0FBYyx5Q0FBZCxDLHlCQUVBLGFBQUEsQ0FBQSxLQUFBLENBQVEsQ0FDcEIsU0FBUyxDQUFFLE9BQUEsQ0FBQSxTQUFBLENBQVUsQ0FBRSxRQUFRLENBQUUsSUFBWixDQUFWLENBRFMsQ0FFcEIsTUFBTSxDQUFFLE9BQUEsQ0FBQSxNQUFBLEVBRlksQ0FHcEIsR0FBRyxDQUFFLE9BQUEsQ0FBQSxHQUFBLENBQUksQ0FBRSxRQUFRLENBQUUsSUFBWixDQUFKLENBSGUsQ0FJcEIsVUFBVSxDQUFFLE9BQUEsQ0FBQSxVQUFBLEVBSlEsQ0FBUixDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcmVhZEpTT05TeW5jIH0gZnJvbSBcImZzLWV4dHJhXCI7XG5pbXBvcnQgKiBhcyBwYXRoIGZyb20gXCJwYXRoXCI7XG5cbmltcG9ydCB7IFRCQmFzZUNvbW1hbmQgfSBmcm9tIFwiLi4vY29tbWFuZC1jb25maWdcIjtcbmltcG9ydCB7IGZpbHRlciwgdHJhY2VGcmFtZSwgdHJhY2VwYXRoLCB1cmwgfSBmcm9tIFwiLi4vaGVscGVycy9mbGFnc1wiO1xuaW1wb3J0IHtcbiAgYnlUaW1lLFxuICBjb2xsZWN0LFxuICBmaW5kRnJhbWUsXG4gIGZvcm1hdCxcbiAgSUV2ZW50LFxuICBpc0NvbW1pdExvYWQsXG4gIGlzRnJhbWVNYXJrLFxuICBpc0ZyYW1lTmF2aWdhdGlvblN0YXJ0LFxuICBpc01hcmssXG4gIGlzVXNlck1hcmssXG4gIHNldFRyYWNlRXZlbnRzLFxufSBmcm9tIFwiLi4vaGVscGVycy91dGlsc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNYXJrZXJUaW1pbmdzIGV4dGVuZHMgVEJCYXNlQ29tbWFuZCB7XG4gIHB1YmxpYyBzdGF0aWMgZGVzY3JpcHRpb24gPSBcIkdldCBsaXN0IG9mIGFsbCB1c2VyLXRpbWluZ3MgZnJvbSB0cmFjZVwiO1xuXG4gIHB1YmxpYyBzdGF0aWMgZmxhZ3MgPSB7XG4gICAgdHJhY2VwYXRoOiB0cmFjZXBhdGgoeyByZXF1aXJlZDogdHJ1ZSB9KSxcbiAgICBmaWx0ZXI6IGZpbHRlcigpLFxuICAgIHVybDogdXJsKHsgcmVxdWlyZWQ6IHRydWUgfSksXG4gICAgdHJhY2VGcmFtZTogdHJhY2VGcmFtZSgpLFxuICB9O1xuXG4gIHB1YmxpYyBhc3luYyBydW4oKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3QgeyBmbGFncyB9ID0gdGhpcy5wYXJzZShNYXJrZXJUaW1pbmdzKTtcbiAgICBjb25zdCB7IHRyYWNlcGF0aCB9ID0gZmxhZ3M7XG4gICAgY29uc3QgZmlsdGVyID0gY29sbGVjdChmbGFncy5maWx0ZXIsIFtdKTtcbiAgICBjb25zdCB0cmFjZUZyYW1lOiBzdHJpbmcgPSBmbGFncy50cmFjZUZyYW1lID8gZmxhZ3MudHJhY2VGcmFtZSA6IGZsYWdzLnVybDtcblxuICAgIGxldCBmcmFtZTogYW55ID0gbnVsbDtcbiAgICBsZXQgc3RhcnRUaW1lID0gLTE7XG4gICAgbGV0IHJhd1RyYWNlRGF0YTogYW55ID0gbnVsbDtcbiAgICBsZXQgdHJhY2U6IGFueSA9IG51bGw7XG5cbiAgICBpZiAoIXRyYWNlRnJhbWUgJiYgIXVybCkge1xuICAgICAgdGhpcy5lcnJvcihgRWl0aGVyIGEgdHJhY2VGcmFtZSBvciB1cmwgYXJlIHJlcXVpcmVkIGZsYWdzLmApO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICByYXdUcmFjZURhdGEgPSByZWFkSlNPTlN5bmMocGF0aC5yZXNvbHZlKHRyYWNlcGF0aCkpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHRoaXMuZXJyb3IoZSk7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIHRyYWNlID0gc2V0VHJhY2VFdmVudHMocmF3VHJhY2VEYXRhKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICB0aGlzLmVycm9yKGUpO1xuICAgIH1cblxuICAgIGlmICh0cmFjZUZyYW1lLnN0YXJ0c1dpdGgoXCJodHRwXCIpKSB7XG4gICAgICBmcmFtZSA9IGZpbmRGcmFtZSh0cmFjZSwgdHJhY2VGcmFtZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZyYW1lID0gdHJhY2VGcmFtZTtcbiAgICB9XG4gICAgaWYgKCFmcmFtZSkge1xuICAgICAgdGhpcy5lcnJvcihgZnJhbWUgbm90IGZvdW5kYCk7XG4gICAgfVxuXG4gICAgdHJhY2VcbiAgICAgIC5maWx0ZXIoKGV2ZW50OiBJRXZlbnQpID0+IGlzTWFyayhldmVudCkgfHwgaXNDb21taXRMb2FkKGV2ZW50KSlcbiAgICAgIC5zb3J0KGJ5VGltZSlcbiAgICAgIC5mb3JFYWNoKChldmVudDogYW55KSA9PiB7XG4gICAgICAgIGlmIChpc0ZyYW1lTmF2aWdhdGlvblN0YXJ0KGZyYW1lLCBldmVudCkpIHtcbiAgICAgICAgICBzdGFydFRpbWUgPSBldmVudC50cztcbiAgICAgICAgICB0aGlzLmxvZyhcbiAgICAgICAgICAgIGBNYXJrZXIgVGltaW5nczogJHtmb3JtYXQoZXZlbnQudHMsIHN0YXJ0VGltZSl9ICR7ZXZlbnQubmFtZX1gXG4gICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIGlmIChpc0ZyYW1lTWFyayhmcmFtZSwgZXZlbnQpKSB7XG4gICAgICAgICAgaWYgKHN0YXJ0VGltZSA9PT0gLTEpIHtcbiAgICAgICAgICAgIHN0YXJ0VGltZSA9IGV2ZW50LnRzO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLmxvZyhcbiAgICAgICAgICAgIGBNYXJrZXIgVGltaW5nczogJHtmb3JtYXQoZXZlbnQudHMsIHN0YXJ0VGltZSl9ICR7ZXZlbnQubmFtZX1gXG4gICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIGlmIChpc1VzZXJNYXJrKGV2ZW50KSkge1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIGZpbHRlci5sZW5ndGggPT09IDAgfHxcbiAgICAgICAgICAgIGZpbHRlci5zb21lKChmOiBhbnkpID0+IGV2ZW50Lm5hbWUuaW5kZXhPZihmKSAhPT0gLTEpXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICB0aGlzLmxvZyhcbiAgICAgICAgICAgICAgYE1hcmtlciBUaW1pbmdzOiAke2Zvcm1hdChldmVudC50cywgc3RhcnRUaW1lKX0gJHtldmVudC5uYW1lfWBcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGlzQ29tbWl0TG9hZChldmVudCkpIHtcbiAgICAgICAgICBjb25zdCB7IGRhdGEgfSA9IGV2ZW50LmFyZ3M7XG4gICAgICAgICAgaWYgKGRhdGEuZnJhbWUgPT09IGZyYW1lKSB7XG4gICAgICAgICAgICB0aGlzLmxvZyhcbiAgICAgICAgICAgICAgYE1hcmtlciBUaW1pbmdzOiAke2Zvcm1hdChldmVudC50cywgc3RhcnRUaW1lKX0gJHtldmVudC5uYW1lfSAke1xuICAgICAgICAgICAgICAgIGRhdGEuZnJhbWVcbiAgICAgICAgICAgICAgfSAke2RhdGEudXJsfWBcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgfVxufVxuIl19