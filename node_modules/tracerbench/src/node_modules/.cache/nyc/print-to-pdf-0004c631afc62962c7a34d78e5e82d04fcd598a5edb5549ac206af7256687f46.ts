"use strict";function cov_1gmj5dnhe7(){var path="/Users/malynch/D/tracerbench/packages/cli/src/helpers/print-to-pdf.ts";var hash="3465c4c8367b9c8ec3cf3944c6a9c4b9f11a3f0d";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/malynch/D/tracerbench/packages/cli/src/helpers/print-to-pdf.ts",statementMap:{"0":{start:{line:2,column:0},end:{line:2,column:62}},"1":{start:{line:3,column:34},end:{line:3,column:68}},"2":{start:{line:4,column:19},end:{line:4,column:38}},"3":{start:{line:5,column:14},end:{line:5,column:30}},"4":{start:{line:14,column:18},end:{line:21,column:6}},"5":{start:{line:18,column:16},end:{line:18,column:56}},"6":{start:{line:22,column:4},end:{line:24,column:7}},"7":{start:{line:23,column:8},end:{line:23,column:31}},"8":{start:{line:25,column:4},end:{line:25,column:11}},"9":{start:{line:27,column:0},end:{line:27,column:29}},"10":{start:{line:29,column:19},end:{line:29,column:76}},"11":{start:{line:30,column:4},end:{line:47,column:5}},"12":{start:{line:31,column:24},end:{line:31,column:41}},"13":{start:{line:32,column:29},end:{line:34,column:10}},"14":{start:{line:35,column:21},end:{line:35,column:59}},"15":{start:{line:36,column:8},end:{line:36,column:39}},"16":{start:{line:37,column:8},end:{line:40,column:11}},"17":{start:{line:41,column:25},end:{line:41,column:63}},"18":{start:{line:42,column:8},end:{line:42,column:74}},"19":{start:{line:43,column:8},end:{line:43,column:29}},"20":{start:{line:46,column:8},end:{line:46,column:31}}},fnMap:{"0":{name:"printToPDF",decl:{start:{line:13,column:15},end:{line:13,column:25}},loc:{start:{line:13,column:43},end:{line:26,column:1}},line:13},"1":{name:"(anonymous_1)",decl:{start:{line:17,column:18},end:{line:17,column:19}},loc:{start:{line:17,column:30},end:{line:19,column:13}},line:17},"2":{name:"(anonymous_2)",decl:{start:{line:22,column:28},end:{line:22,column:29}},loc:{start:{line:22,column:39},end:{line:24,column:5}},line:22},"3":{name:"chromePrintToPDF",decl:{start:{line:28,column:15},end:{line:28,column:31}},loc:{start:{line:28,column:49},end:{line:48,column:1}},line:28}},branchMap:{},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0},f:{"0":0,"1":0,"2":0,"3":0},b:{},inputSourceMap:{version:3,file:"/Users/malynch/D/tracerbench/packages/cli/src/helpers/print-to-pdf.ts",sources:["/Users/malynch/D/tracerbench/packages/cli/src/helpers/print-to-pdf.ts"],names:[],mappings:";;AAAA,qEAAsD;AACtD,uCAAyC;AACzC,+BAA+B;AAE/B;;;;;;GAMG;AACY,KAAK,UAAU,UAAU,CACtC,GAAW,EACX,UAAkB;IAElB,MAAM,KAAK,GAAG,IAAI,KAAK,CAAC;QACtB;YACE,KAAK,EAAE,8BAA8B;YACrC,IAAI,EAAE,KAAK,IAAI,EAAE;gBACf,MAAM,gBAAgB,CAAC,GAAG,EAAE,UAAU,CAAC,CAAC;YAC1C,CAAC;SACF;KACF,CAAC,CAAC;IAEH,MAAM,KAAK,CAAC,GAAG,EAAE,CAAC,KAAK,CAAC,CAAC,KAAK,EAAE,EAAE;QAChC,MAAM,IAAI,KAAK,CAAC,KAAK,CAAC,CAAC;IACzB,CAAC,CAAC,CAAC;IAEH,OAAO;AACT,CAAC;AAlBD,6BAkBC;AAED,KAAK,UAAU,gBAAgB,CAC7B,GAAW,EACX,UAAkB;IAElB,MAAM,MAAM,GAAG,qCAAW,CAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC,CAAC;IAC/C,IAAI;QACF,MAAM,OAAO,GAAG,MAAM,CAAC,UAAU,CAAC;QAClC,MAAM,EAAE,QAAQ,EAAE,GAAG,MAAM,OAAO,CAAC,IAAI,CAAC,qBAAqB,EAAE;YAC7D,GAAG,EAAE,aAAa;SACnB,CAAC,CAAC;QACH,MAAM,IAAI,GAAG,MAAM,OAAO,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC;QAEpD,MAAM,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;QAC/B,MAAM,OAAO,CAAC,GAAG,CAAC;YAChB,IAAI,CAAC,KAAK,CAAC,qBAAqB,CAAC;YACjC,IAAI,CAAC,IAAI,CAAC,eAAe,EAAE,EAAE,GAAG,EAAE,CAAC;SACpC,CAAC,CAAC;QACH,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,IAAI,CAAC,IAAI,CAAC,iBAAiB,EAAE,EAAE,CAAC,CAAC;QAExD,wBAAa,CAAC,UAAU,EAAE,MAAM,CAAC,IAAI,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC,CAAC;QAEvD,MAAM,MAAM,CAAC,KAAK,EAAE,CAAC;KACtB;YAAS;QACR,MAAM,MAAM,CAAC,OAAO,EAAE,CAAC;KACxB;AACH,CAAC",sourcesContent:["import { spawnChrome } from \"chrome-debugging-client\";\nimport { writeFileSync } from \"fs-extra\";\nimport * as listr from \"listr\";\n\n/**\n * Spawn a chrome process and visit the given url. Wait until page load event is fired\n * and then create PDF.\n *\n * @param url - URL of page for chrome to visit\n * @param outputPath - Output pdf to this file\n */\nexport default async function printToPDF(\n  url: string,\n  outputPath: string\n): Promise<void> {\n  const tasks = new listr([\n    {\n      title: \"Generating Benchmark Reports\",\n      task: async () => {\n        await chromePrintToPDF(url, outputPath);\n      },\n    },\n  ]);\n\n  await tasks.run().catch((error) => {\n    throw new Error(error);\n  });\n\n  return;\n}\n\nasync function chromePrintToPDF(\n  url: string,\n  outputPath: string\n): Promise<void> {\n  const chrome = spawnChrome({ headless: true });\n  try {\n    const browser = chrome.connection;\n    const { targetId } = await browser.send(\"Target.createTarget\", {\n      url: \"about:blank\",\n    });\n    const page = await browser.attachToTarget(targetId);\n\n    await page.send(\"Page.enable\");\n    await Promise.all([\n      page.until(\"Page.loadEventFired\"),\n      page.send(\"Page.navigate\", { url }),\n    ]);\n    const { data } = await page.send(\"Page.printToPDF\", {});\n\n    writeFileSync(outputPath, Buffer.from(data, \"base64\"));\n\n    await chrome.close();\n  } finally {\n    await chrome.dispose();\n  }\n}\n"]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"3465c4c8367b9c8ec3cf3944c6a9c4b9f11a3f0d"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];cov_1gmj5dnhe7=function(){return actualCoverage;};return actualCoverage;}cov_1gmj5dnhe7().s[0]++;Object.defineProperty(exports,"__esModule",{value:true});const chrome_debugging_client_1=(cov_1gmj5dnhe7().s[1]++,require("chrome-debugging-client"));const fs_extra_1=(cov_1gmj5dnhe7().s[2]++,require("fs-extra"));const listr=(cov_1gmj5dnhe7().s[3]++,require("listr"));/**
 * Spawn a chrome process and visit the given url. Wait until page load event is fired
 * and then create PDF.
 *
 * @param url - URL of page for chrome to visit
 * @param outputPath - Output pdf to this file
 */async function printToPDF(url,outputPath){cov_1gmj5dnhe7().f[0]++;const tasks=(cov_1gmj5dnhe7().s[4]++,new listr([{title:"Generating Benchmark Reports",task:async()=>{cov_1gmj5dnhe7().f[1]++;cov_1gmj5dnhe7().s[5]++;await chromePrintToPDF(url,outputPath);}}]));cov_1gmj5dnhe7().s[6]++;await tasks.run().catch(error=>{cov_1gmj5dnhe7().f[2]++;cov_1gmj5dnhe7().s[7]++;throw new Error(error);});cov_1gmj5dnhe7().s[8]++;return;}cov_1gmj5dnhe7().s[9]++;exports.default=printToPDF;async function chromePrintToPDF(url,outputPath){cov_1gmj5dnhe7().f[3]++;const chrome=(cov_1gmj5dnhe7().s[10]++,chrome_debugging_client_1.spawnChrome({headless:true}));cov_1gmj5dnhe7().s[11]++;try{const browser=(cov_1gmj5dnhe7().s[12]++,chrome.connection);const{targetId}=(cov_1gmj5dnhe7().s[13]++,await browser.send("Target.createTarget",{url:"about:blank"}));const page=(cov_1gmj5dnhe7().s[14]++,await browser.attachToTarget(targetId));cov_1gmj5dnhe7().s[15]++;await page.send("Page.enable");cov_1gmj5dnhe7().s[16]++;await Promise.all([page.until("Page.loadEventFired"),page.send("Page.navigate",{url})]);const{data}=(cov_1gmj5dnhe7().s[17]++,await page.send("Page.printToPDF",{}));cov_1gmj5dnhe7().s[18]++;fs_extra_1.writeFileSync(outputPath,Buffer.from(data,"base64"));cov_1gmj5dnhe7().s[19]++;await chrome.close();}finally{cov_1gmj5dnhe7().s[20]++;await chrome.dispose();}}//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL21hbHluY2gvRC90cmFjZXJiZW5jaC9wYWNrYWdlcy9jbGkvc3JjL2hlbHBlcnMvcHJpbnQtdG8tcGRmLnRzIiwic291cmNlcyI6WyIvVXNlcnMvbWFseW5jaC9EL3RyYWNlcmJlbmNoL3BhY2thZ2VzL2NsaS9zcmMvaGVscGVycy9wcmludC10by1wZGYudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxxRUFBc0Q7QUFDdEQsdUNBQXlDO0FBQ3pDLCtCQUErQjtBQUUvQjs7Ozs7O0dBTUc7QUFDWSxLQUFLLFVBQVUsVUFBVSxDQUN0QyxHQUFXLEVBQ1gsVUFBa0I7SUFFbEIsTUFBTSxLQUFLLEdBQUcsSUFBSSxLQUFLLENBQUM7UUFDdEI7WUFDRSxLQUFLLEVBQUUsOEJBQThCO1lBQ3JDLElBQUksRUFBRSxLQUFLLElBQUksRUFBRTtnQkFDZixNQUFNLGdCQUFnQixDQUFDLEdBQUcsRUFBRSxVQUFVLENBQUMsQ0FBQztZQUMxQyxDQUFDO1NBQ0Y7S0FDRixDQUFDLENBQUM7SUFFSCxNQUFNLEtBQUssQ0FBQyxHQUFHLEVBQUUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxLQUFLLEVBQUUsRUFBRTtRQUNoQyxNQUFNLElBQUksS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ3pCLENBQUMsQ0FBQyxDQUFDO0lBRUgsT0FBTztBQUNULENBQUM7QUFsQkQsNkJBa0JDO0FBRUQsS0FBSyxVQUFVLGdCQUFnQixDQUM3QixHQUFXLEVBQ1gsVUFBa0I7SUFFbEIsTUFBTSxNQUFNLEdBQUcscUNBQVcsQ0FBQyxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDO0lBQy9DLElBQUk7UUFDRixNQUFNLE9BQU8sR0FBRyxNQUFNLENBQUMsVUFBVSxDQUFDO1FBQ2xDLE1BQU0sRUFBRSxRQUFRLEVBQUUsR0FBRyxNQUFNLE9BQU8sQ0FBQyxJQUFJLENBQUMscUJBQXFCLEVBQUU7WUFDN0QsR0FBRyxFQUFFLGFBQWE7U0FDbkIsQ0FBQyxDQUFDO1FBQ0gsTUFBTSxJQUFJLEdBQUcsTUFBTSxPQUFPLENBQUMsY0FBYyxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBRXBELE1BQU0sSUFBSSxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQztRQUMvQixNQUFNLE9BQU8sQ0FBQyxHQUFHLENBQUM7WUFDaEIsSUFBSSxDQUFDLEtBQUssQ0FBQyxxQkFBcUIsQ0FBQztZQUNqQyxJQUFJLENBQUMsSUFBSSxDQUFDLGVBQWUsRUFBRSxFQUFFLEdBQUcsRUFBRSxDQUFDO1NBQ3BDLENBQUMsQ0FBQztRQUNILE1BQU0sRUFBRSxJQUFJLEVBQUUsR0FBRyxNQUFNLElBQUksQ0FBQyxJQUFJLENBQUMsaUJBQWlCLEVBQUUsRUFBRSxDQUFDLENBQUM7UUFFeEQsd0JBQWEsQ0FBQyxVQUFVLEVBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsUUFBUSxDQUFDLENBQUMsQ0FBQztRQUV2RCxNQUFNLE1BQU0sQ0FBQyxLQUFLLEVBQUUsQ0FBQztLQUN0QjtZQUFTO1FBQ1IsTUFBTSxNQUFNLENBQUMsT0FBTyxFQUFFLENBQUM7S0FDeEI7QUFDSCxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgc3Bhd25DaHJvbWUgfSBmcm9tIFwiY2hyb21lLWRlYnVnZ2luZy1jbGllbnRcIjtcbmltcG9ydCB7IHdyaXRlRmlsZVN5bmMgfSBmcm9tIFwiZnMtZXh0cmFcIjtcbmltcG9ydCAqIGFzIGxpc3RyIGZyb20gXCJsaXN0clwiO1xuXG4vKipcbiAqIFNwYXduIGEgY2hyb21lIHByb2Nlc3MgYW5kIHZpc2l0IHRoZSBnaXZlbiB1cmwuIFdhaXQgdW50aWwgcGFnZSBsb2FkIGV2ZW50IGlzIGZpcmVkXG4gKiBhbmQgdGhlbiBjcmVhdGUgUERGLlxuICpcbiAqIEBwYXJhbSB1cmwgLSBVUkwgb2YgcGFnZSBmb3IgY2hyb21lIHRvIHZpc2l0XG4gKiBAcGFyYW0gb3V0cHV0UGF0aCAtIE91dHB1dCBwZGYgdG8gdGhpcyBmaWxlXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIHByaW50VG9QREYoXG4gIHVybDogc3RyaW5nLFxuICBvdXRwdXRQYXRoOiBzdHJpbmdcbik6IFByb21pc2U8dm9pZD4ge1xuICBjb25zdCB0YXNrcyA9IG5ldyBsaXN0cihbXG4gICAge1xuICAgICAgdGl0bGU6IFwiR2VuZXJhdGluZyBCZW5jaG1hcmsgUmVwb3J0c1wiLFxuICAgICAgdGFzazogYXN5bmMgKCkgPT4ge1xuICAgICAgICBhd2FpdCBjaHJvbWVQcmludFRvUERGKHVybCwgb3V0cHV0UGF0aCk7XG4gICAgICB9LFxuICAgIH0sXG4gIF0pO1xuXG4gIGF3YWl0IHRhc2tzLnJ1bigpLmNhdGNoKChlcnJvcikgPT4ge1xuICAgIHRocm93IG5ldyBFcnJvcihlcnJvcik7XG4gIH0pO1xuXG4gIHJldHVybjtcbn1cblxuYXN5bmMgZnVuY3Rpb24gY2hyb21lUHJpbnRUb1BERihcbiAgdXJsOiBzdHJpbmcsXG4gIG91dHB1dFBhdGg6IHN0cmluZ1xuKTogUHJvbWlzZTx2b2lkPiB7XG4gIGNvbnN0IGNocm9tZSA9IHNwYXduQ2hyb21lKHsgaGVhZGxlc3M6IHRydWUgfSk7XG4gIHRyeSB7XG4gICAgY29uc3QgYnJvd3NlciA9IGNocm9tZS5jb25uZWN0aW9uO1xuICAgIGNvbnN0IHsgdGFyZ2V0SWQgfSA9IGF3YWl0IGJyb3dzZXIuc2VuZChcIlRhcmdldC5jcmVhdGVUYXJnZXRcIiwge1xuICAgICAgdXJsOiBcImFib3V0OmJsYW5rXCIsXG4gICAgfSk7XG4gICAgY29uc3QgcGFnZSA9IGF3YWl0IGJyb3dzZXIuYXR0YWNoVG9UYXJnZXQodGFyZ2V0SWQpO1xuXG4gICAgYXdhaXQgcGFnZS5zZW5kKFwiUGFnZS5lbmFibGVcIik7XG4gICAgYXdhaXQgUHJvbWlzZS5hbGwoW1xuICAgICAgcGFnZS51bnRpbChcIlBhZ2UubG9hZEV2ZW50RmlyZWRcIiksXG4gICAgICBwYWdlLnNlbmQoXCJQYWdlLm5hdmlnYXRlXCIsIHsgdXJsIH0pLFxuICAgIF0pO1xuICAgIGNvbnN0IHsgZGF0YSB9ID0gYXdhaXQgcGFnZS5zZW5kKFwiUGFnZS5wcmludFRvUERGXCIsIHt9KTtcblxuICAgIHdyaXRlRmlsZVN5bmMob3V0cHV0UGF0aCwgQnVmZmVyLmZyb20oZGF0YSwgXCJiYXNlNjRcIikpO1xuXG4gICAgYXdhaXQgY2hyb21lLmNsb3NlKCk7XG4gIH0gZmluYWxseSB7XG4gICAgYXdhaXQgY2hyb21lLmRpc3Bvc2UoKTtcbiAgfVxufVxuIl19
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9tYWx5bmNoL0QvdHJhY2VyYmVuY2gvcGFja2FnZXMvY2xpL3NyYy9oZWxwZXJzL3ByaW50LXRvLXBkZi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoicy9LQUFBLEtBQUEsQ0FBQSx5QkFBQSwwQkFBQSxPQUFBLENBQUEseUJBQUEsQ0FBQSxDQUFBLENBQ0EsS0FBQSxDQUFBLFVBQUEsMEJBQUEsT0FBQSxDQUFBLFVBQUEsQ0FBQSxDQUFBLENBQ0EsS0FBQSxDQUFBLEtBQUEsMEJBQUEsT0FBQSxDQUFBLE9BQUEsQ0FBQSxDQUFBLENBRUE7Ozs7OztHQU9lLGNBQWUsQ0FBQSxVQUFmLENBQ2IsR0FEYSxDQUViLFVBRmEsQ0FFSyx5QkFFbEIsS0FBTSxDQUFBLEtBQUssMEJBQUcsR0FBSSxDQUFBLEtBQUosQ0FBVSxDQUN0QixDQUNFLEtBQUssQ0FBRSw4QkFEVCxDQUVFLElBQUksQ0FBRSxTQUFXLGlEQUNmLEtBQU0sQ0FBQSxnQkFBZ0IsQ0FBQyxHQUFELENBQU0sVUFBTixDQUF0QixDQUNELENBSkgsQ0FEc0IsQ0FBVixDQUFILENBQVgsQ0FGa0Isd0JBV2xCLEtBQU0sQ0FBQSxLQUFLLENBQUMsR0FBTixHQUFZLEtBQVosQ0FBbUIsS0FBRCxFQUFVLGlEQUNoQyxLQUFNLElBQUksQ0FBQSxLQUFKLENBQVUsS0FBVixDQUFOLENBQ0QsQ0FGSyxDQUFOLENBWGtCLHdCQWVsQixPQUNELEMsd0JBbEJELE9BQUEsQ0FBQSxPQUFBLENBQUEsVUFBQSxDQW9CQSxjQUFlLENBQUEsZ0JBQWYsQ0FDRSxHQURGLENBRUUsVUFGRixDQUVvQix5QkFFbEIsS0FBTSxDQUFBLE1BQU0sMkJBQUcseUJBQUEsQ0FBQSxXQUFBLENBQVksQ0FBRSxRQUFRLENBQUUsSUFBWixDQUFaLENBQUgsQ0FBWixDQUZrQix5QkFHbEIsR0FBSSxDQUNGLEtBQU0sQ0FBQSxPQUFPLDJCQUFHLE1BQU0sQ0FBQyxVQUFWLENBQWIsQ0FDQSxLQUFNLENBQUUsUUFBRiw0QkFBZSxLQUFNLENBQUEsT0FBTyxDQUFDLElBQVIsQ0FBYSxxQkFBYixDQUFvQyxDQUM3RCxHQUFHLENBQUUsYUFEd0QsQ0FBcEMsQ0FBckIsQ0FBTixDQUdBLEtBQU0sQ0FBQSxJQUFJLDJCQUFHLEtBQU0sQ0FBQSxPQUFPLENBQUMsY0FBUixDQUF1QixRQUF2QixDQUFULENBQVYsQ0FMRSx5QkFPRixLQUFNLENBQUEsSUFBSSxDQUFDLElBQUwsQ0FBVSxhQUFWLENBQU4sQ0FQRSx5QkFRRixLQUFNLENBQUEsT0FBTyxDQUFDLEdBQVIsQ0FBWSxDQUNoQixJQUFJLENBQUMsS0FBTCxDQUFXLHFCQUFYLENBRGdCLENBRWhCLElBQUksQ0FBQyxJQUFMLENBQVUsZUFBVixDQUEyQixDQUFFLEdBQUYsQ0FBM0IsQ0FGZ0IsQ0FBWixDQUFOLENBSUEsS0FBTSxDQUFFLElBQUYsNEJBQVcsS0FBTSxDQUFBLElBQUksQ0FBQyxJQUFMLENBQVUsaUJBQVYsQ0FBNkIsRUFBN0IsQ0FBakIsQ0FBTixDQVpFLHlCQWNGLFVBQUEsQ0FBQSxhQUFBLENBQWMsVUFBZCxDQUEwQixNQUFNLENBQUMsSUFBUCxDQUFZLElBQVosQ0FBa0IsUUFBbEIsQ0FBMUIsRUFkRSx5QkFnQkYsS0FBTSxDQUFBLE1BQU0sQ0FBQyxLQUFQLEVBQU4sQ0FDRCxDQWpCRCxPQWlCVSwwQkFDUixLQUFNLENBQUEsTUFBTSxDQUFDLE9BQVAsRUFBTixDQUNELENBQ0YsQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHNwYXduQ2hyb21lIH0gZnJvbSBcImNocm9tZS1kZWJ1Z2dpbmctY2xpZW50XCI7XG5pbXBvcnQgeyB3cml0ZUZpbGVTeW5jIH0gZnJvbSBcImZzLWV4dHJhXCI7XG5pbXBvcnQgKiBhcyBsaXN0ciBmcm9tIFwibGlzdHJcIjtcblxuLyoqXG4gKiBTcGF3biBhIGNocm9tZSBwcm9jZXNzIGFuZCB2aXNpdCB0aGUgZ2l2ZW4gdXJsLiBXYWl0IHVudGlsIHBhZ2UgbG9hZCBldmVudCBpcyBmaXJlZFxuICogYW5kIHRoZW4gY3JlYXRlIFBERi5cbiAqXG4gKiBAcGFyYW0gdXJsIC0gVVJMIG9mIHBhZ2UgZm9yIGNocm9tZSB0byB2aXNpdFxuICogQHBhcmFtIG91dHB1dFBhdGggLSBPdXRwdXQgcGRmIHRvIHRoaXMgZmlsZVxuICovXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBwcmludFRvUERGKFxuICB1cmw6IHN0cmluZyxcbiAgb3V0cHV0UGF0aDogc3RyaW5nXG4pOiBQcm9taXNlPHZvaWQ+IHtcbiAgY29uc3QgdGFza3MgPSBuZXcgbGlzdHIoW1xuICAgIHtcbiAgICAgIHRpdGxlOiBcIkdlbmVyYXRpbmcgQmVuY2htYXJrIFJlcG9ydHNcIixcbiAgICAgIHRhc2s6IGFzeW5jICgpID0+IHtcbiAgICAgICAgYXdhaXQgY2hyb21lUHJpbnRUb1BERih1cmwsIG91dHB1dFBhdGgpO1xuICAgICAgfSxcbiAgICB9LFxuICBdKTtcblxuICBhd2FpdCB0YXNrcy5ydW4oKS5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3IpO1xuICB9KTtcblxuICByZXR1cm47XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGNocm9tZVByaW50VG9QREYoXG4gIHVybDogc3RyaW5nLFxuICBvdXRwdXRQYXRoOiBzdHJpbmdcbik6IFByb21pc2U8dm9pZD4ge1xuICBjb25zdCBjaHJvbWUgPSBzcGF3bkNocm9tZSh7IGhlYWRsZXNzOiB0cnVlIH0pO1xuICB0cnkge1xuICAgIGNvbnN0IGJyb3dzZXIgPSBjaHJvbWUuY29ubmVjdGlvbjtcbiAgICBjb25zdCB7IHRhcmdldElkIH0gPSBhd2FpdCBicm93c2VyLnNlbmQoXCJUYXJnZXQuY3JlYXRlVGFyZ2V0XCIsIHtcbiAgICAgIHVybDogXCJhYm91dDpibGFua1wiLFxuICAgIH0pO1xuICAgIGNvbnN0IHBhZ2UgPSBhd2FpdCBicm93c2VyLmF0dGFjaFRvVGFyZ2V0KHRhcmdldElkKTtcblxuICAgIGF3YWl0IHBhZ2Uuc2VuZChcIlBhZ2UuZW5hYmxlXCIpO1xuICAgIGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgIHBhZ2UudW50aWwoXCJQYWdlLmxvYWRFdmVudEZpcmVkXCIpLFxuICAgICAgcGFnZS5zZW5kKFwiUGFnZS5uYXZpZ2F0ZVwiLCB7IHVybCB9KSxcbiAgICBdKTtcbiAgICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IHBhZ2Uuc2VuZChcIlBhZ2UucHJpbnRUb1BERlwiLCB7fSk7XG5cbiAgICB3cml0ZUZpbGVTeW5jKG91dHB1dFBhdGgsIEJ1ZmZlci5mcm9tKGRhdGEsIFwiYmFzZTY0XCIpKTtcblxuICAgIGF3YWl0IGNocm9tZS5jbG9zZSgpO1xuICB9IGZpbmFsbHkge1xuICAgIGF3YWl0IGNocm9tZS5kaXNwb3NlKCk7XG4gIH1cbn1cbiJdfQ==