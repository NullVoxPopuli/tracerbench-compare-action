"use strict";function cov_2m952fe49w(){var path="/Users/malynch/D/tracerbench/packages/cli/src/commands/record-har/index.ts";var hash="f97d58db3cae9da9f9819bce25f00e0a93e9e7b8";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/malynch/D/tracerbench/packages/cli/src/commands/record-har/index.ts",statementMap:{"0":{start:{line:2,column:0},end:{line:2,column:62}},"1":{start:{line:3,column:15},end:{line:3,column:43}},"2":{start:{line:4,column:19},end:{line:4,column:38}},"3":{start:{line:5,column:15},end:{line:5,column:30}},"4":{start:{line:6,column:25},end:{line:6,column:56}},"5":{start:{line:7,column:28},end:{line:7,column:77}},"6":{start:{line:8,column:16},end:{line:8,column:46}},"7":{start:{line:11,column:26},end:{line:11,column:47}},"8":{start:{line:12,column:8},end:{line:12,column:96}},"9":{start:{line:15,column:26},end:{line:15,column:47}},"10":{start:{line:16,column:61},end:{line:16,column:66}},"11":{start:{line:17,column:55},end:{line:17,column:72}},"12":{start:{line:18,column:30},end:{line:18,column:47}},"13":{start:{line:19,column:27},end:{line:22,column:9}},"14":{start:{line:23,column:22},end:{line:30,column:9}},"15":{start:{line:31,column:8},end:{line:34,column:9}},"16":{start:{line:33,column:12},end:{line:33,column:77}},"17":{start:{line:36,column:8},end:{line:40,column:9}},"18":{start:{line:37,column:12},end:{line:39,column:52}},"19":{start:{line:42,column:27},end:{line:42,column:102}},"20":{start:{line:43,column:24},end:{line:43,column:60}},"21":{start:{line:44,column:8},end:{line:44,column:70}},"22":{start:{line:45,column:8},end:{line:45,column:64}},"23":{start:{line:48,column:0},end:{line:48,column:28}},"24":{start:{line:49,column:0},end:{line:49,column:59}},"25":{start:{line:51,column:0},end:{line:59,column:2}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:10,column:4},end:{line:10,column:5}},loc:{start:{line:10,column:17},end:{line:13,column:5}},line:10},"1":{name:"(anonymous_1)",decl:{start:{line:14,column:4},end:{line:14,column:5}},loc:{start:{line:14,column:16},end:{line:46,column:5}},line:14}},branchMap:{"0":{loc:{start:{line:20,column:21},end:{line:20,column:47}},type:"cond-expr",locations:[{start:{line:20,column:31},end:{line:20,column:38}},{start:{line:20,column:41},end:{line:20,column:47}}],line:20},"1":{loc:{start:{line:21,column:17},end:{line:21,column:68}},type:"cond-expr",locations:[{start:{line:21,column:35},end:{line:21,column:64}},{start:{line:21,column:67},end:{line:21,column:68}}],line:21},"2":{loc:{start:{line:31,column:8},end:{line:34,column:9}},type:"if",locations:[{start:{line:31,column:8},end:{line:34,column:9}},{start:{line:31,column:8},end:{line:34,column:9}}],line:31},"3":{loc:{start:{line:36,column:8},end:{line:40,column:9}},type:"if",locations:[{start:{line:36,column:8},end:{line:40,column:9}},{start:{line:36,column:8},end:{line:40,column:9}}],line:36},"4":{loc:{start:{line:37,column:26},end:{line:39,column:51}},type:"cond-expr",locations:[{start:{line:38,column:18},end:{line:38,column:71}},{start:{line:39,column:18},end:{line:39,column:51}}],line:37}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0},f:{"0":0,"1":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0]},inputSourceMap:{version:3,file:"/Users/malynch/D/tracerbench/packages/cli/src/commands/record-har/index.ts",sources:["/Users/malynch/D/tracerbench/packages/cli/src/commands/record-har/index.ts"],names:[],mappings:";;AACA,4CAAiE;AACjE,uCAAmD;AACnD,+BAAqC;AAErC,yDAAgE;AAChE,8EAAuE;AACvE,+CAQ6B;AAE7B,MAAqB,SAAU,SAAQ,8BAAa;IAY3C,KAAK,CAAC,IAAI;QACf,MAAM,EAAE,KAAK,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;QACxC,IAAI,CAAC,YAAY,GAAG,0BAAS,CAAC,KAAK,CAAC,MAAM,EAAE,KAAK,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;IACzE,CAAC;IAEM,KAAK,CAAC,GAAG;QACd,MAAM,EAAE,KAAK,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;QACxC,MAAM,EAAE,GAAG,EAAE,IAAI,EAAE,WAAW,EAAE,QAAQ,EAAE,MAAM,EAAE,GAAG,KAAK,CAAC;QAC3D,MAAM,EAAE,OAAO,EAAE,eAAe,EAAE,QAAQ,EAAE,GAAG,IAAI,CAAC,YAAY,CAAC;QACjE,IAAI,EAAE,WAAW,EAAE,GAAG,IAAI,CAAC,YAAY,CAAC;QACxC,MAAM,UAAU,GAAgB;YAC9B,OAAO,EAAE,OAAO,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,MAAM;YACnC,GAAG,EAAE,eAAe,CAAC,CAAC,CAAC,QAAQ,CAAC,eAAyB,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;SACnE,CAAC;QACF,IAAI,OAAO,GAAG;YACZ;gBACE,IAAI,EAAE,EAAE;gBACR,KAAK,EAAE,EAAE;gBACT,MAAM,EAAE,EAAE;gBACV,IAAI,EAAE,EAAE;aACT;SACF,CAAC;QACF,IAAI,WAAW,CAAC,MAAM,EAAE;YACtB,wBAAwB;YACxB,OAAO,GAAG,MAAM,mBAAQ,CAAC,cAAO,CAAC,WAAW,CAAC,CAAC,CAAC;SAChD;QAED,sDAAsD;QACtD,IAAI,QAAQ,EAAE;YACZ,WAAW,GAAG,KAAK,CAAC,OAAO,CAAC,WAAW,CAAC;gBACtC,CAAC,CAAC,WAAW,CAAC,MAAM,CAAC,iCAAa,CAAC;gBACnC,CAAC,CAAC,iCAAa,CAAC;SACnB;QAED,oDAAoD;QACpD,MAAM,UAAU,GAAG,MAAM,sBAAe,CACtC,GAAG,EACH,OAAO,EACP,MAAM,EACN,UAAU,EACV,WAAW,CACZ,CAAC;QAEF,MAAM,OAAO,GAAG,WAAI,CAAC,IAAI,EAAE,GAAG,QAAQ,MAAM,CAAC,CAAC;QAE9C,wBAAa,CAAC,OAAO,EAAE,IAAI,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC,CAAC;QAEnD,IAAI,CAAC,GAAG,CAAC,oCAAoC,OAAO,EAAE,CAAC,CAAC;IAC1D,CAAC;;AA5DH,4BA6DC;AA5De,qBAAW,GAAG,kCAAkC,CAAC;AAC/D,8DAA8D;AAChD,eAAK,GAA0B;IAC3C,GAAG,EAAE,WAAG,CAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,OAAO,EAAE,SAAS,EAAE,CAAC;IAChD,IAAI,EAAE,YAAI,CAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;IAC9B,WAAW,EAAE,mBAAW,CAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;IAC5C,QAAQ,EAAE,gBAAQ,CAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,OAAO,EAAE,aAAa,EAAE,CAAC;IAC9D,MAAM,EAAE,cAAM,CAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;IAClC,MAAM,EAAE,cAAM,EAAE;IAChB,QAAQ,EAAR,gBAAQ;CACT,CAAC",sourcesContent:["import { flags as oclifFlags } from \"@oclif/command\";\nimport { IConditions, recordHARClient } from \"@tracerbench/core\";\nimport { readJson, writeFileSync } from \"fs-extra\";\nimport { join, resolve } from \"path\";\n\nimport { getConfig, TBBaseCommand } from \"../../command-config\";\nimport { headlessFlags } from \"../../command-config/default-flag-args\";\nimport {\n  config,\n  cookiespath,\n  dest,\n  filename,\n  headless,\n  marker,\n  url,\n} from \"../../helpers/flags\";\n\nexport default class RecordHAR extends TBBaseCommand {\n  public static description = \"Generates a HAR file from a URL.\";\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  public static flags: oclifFlags.Input<any> = {\n    url: url({ required: true, default: undefined }),\n    dest: dest({ required: true }),\n    cookiespath: cookiespath({ required: true }),\n    filename: filename({ required: true, default: \"tracerbench\" }),\n    marker: marker({ required: true }),\n    config: config(),\n    headless,\n  };\n  public async init(): Promise<void> {\n    const { flags } = this.parse(RecordHAR);\n    this.parsedConfig = getConfig(flags.config, flags, this.explicitFlags);\n  }\n\n  public async run(): Promise<void> {\n    const { flags } = this.parse(RecordHAR);\n    const { url, dest, cookiespath, filename, marker } = flags;\n    const { network, cpuThrottleRate, headless } = this.parsedConfig;\n    let { browserArgs } = this.parsedConfig;\n    const conditions: IConditions = {\n      network: network ? network : \"none\",\n      cpu: cpuThrottleRate ? parseInt(cpuThrottleRate as string, 10) : 1,\n    };\n    let cookies = [\n      {\n        name: \"\",\n        value: \"\",\n        domain: \"\",\n        path: \"\",\n      },\n    ];\n    if (cookiespath.length) {\n      // grab the auth cookies\n      cookies = await readJson(resolve(cookiespath));\n    }\n\n    // if headless flag is true include the headless flags\n    if (headless) {\n      browserArgs = Array.isArray(browserArgs)\n        ? browserArgs.concat(headlessFlags)\n        : headlessFlags;\n    }\n\n    // record the actual HAR and return the archive file\n    const harArchive = await recordHARClient(\n      url,\n      cookies,\n      marker,\n      conditions,\n      browserArgs\n    );\n\n    const harPath = join(dest, `${filename}.har`);\n\n    writeFileSync(harPath, JSON.stringify(harArchive));\n\n    this.log(`HAR recorded and available here: ${harPath}`);\n  }\n}\n"]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"f97d58db3cae9da9f9819bce25f00e0a93e9e7b8"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_2m952fe49w=function(){return actualCoverage;};}return actualCoverage;}cov_2m952fe49w();cov_2m952fe49w().s[0]++;Object.defineProperty(exports,"__esModule",{value:true});const core_1=(cov_2m952fe49w().s[1]++,require("@tracerbench/core"));const fs_extra_1=(cov_2m952fe49w().s[2]++,require("fs-extra"));const path_1=(cov_2m952fe49w().s[3]++,require("path"));const command_config_1=(cov_2m952fe49w().s[4]++,require("../../command-config"));const default_flag_args_1=(cov_2m952fe49w().s[5]++,require("../../command-config/default-flag-args"));const flags_1=(cov_2m952fe49w().s[6]++,require("../../helpers/flags"));class RecordHAR extends(command_config_1.TBBaseCommand){async init(){cov_2m952fe49w().f[0]++;const{flags}=(cov_2m952fe49w().s[7]++,this.parse(RecordHAR));cov_2m952fe49w().s[8]++;this.parsedConfig=command_config_1.getConfig(flags.config,flags,this.explicitFlags);}async run(){cov_2m952fe49w().f[1]++;const{flags}=(cov_2m952fe49w().s[9]++,this.parse(RecordHAR));const{url,dest,cookiespath,filename,marker}=(cov_2m952fe49w().s[10]++,flags);const{network,cpuThrottleRate,headless}=(cov_2m952fe49w().s[11]++,this.parsedConfig);let{browserArgs}=(cov_2m952fe49w().s[12]++,this.parsedConfig);const conditions=(cov_2m952fe49w().s[13]++,{network:network?(cov_2m952fe49w().b[0][0]++,network):(cov_2m952fe49w().b[0][1]++,"none"),cpu:cpuThrottleRate?(cov_2m952fe49w().b[1][0]++,parseInt(cpuThrottleRate,10)):(cov_2m952fe49w().b[1][1]++,1)});let cookies=(cov_2m952fe49w().s[14]++,[{name:"",value:"",domain:"",path:""}]);cov_2m952fe49w().s[15]++;if(cookiespath.length){cov_2m952fe49w().b[2][0]++;cov_2m952fe49w().s[16]++;// grab the auth cookies
cookies=await fs_extra_1.readJson(path_1.resolve(cookiespath));}else{cov_2m952fe49w().b[2][1]++;}// if headless flag is true include the headless flags
cov_2m952fe49w().s[17]++;if(headless){cov_2m952fe49w().b[3][0]++;cov_2m952fe49w().s[18]++;browserArgs=Array.isArray(browserArgs)?(cov_2m952fe49w().b[4][0]++,browserArgs.concat(default_flag_args_1.headlessFlags)):(cov_2m952fe49w().b[4][1]++,default_flag_args_1.headlessFlags);}else{cov_2m952fe49w().b[3][1]++;}// record the actual HAR and return the archive file
const harArchive=(cov_2m952fe49w().s[19]++,await core_1.recordHARClient(url,cookies,marker,conditions,browserArgs));const harPath=(cov_2m952fe49w().s[20]++,path_1.join(dest,`${filename}.har`));cov_2m952fe49w().s[21]++;fs_extra_1.writeFileSync(harPath,JSON.stringify(harArchive));cov_2m952fe49w().s[22]++;this.log(`HAR recorded and available here: ${harPath}`);}}cov_2m952fe49w().s[23]++;exports.default=RecordHAR;cov_2m952fe49w().s[24]++;RecordHAR.description="Generates a HAR file from a URL.";// eslint-disable-next-line @typescript-eslint/no-explicit-any
cov_2m952fe49w().s[25]++;RecordHAR.flags={url:flags_1.url({required:true,default:undefined}),dest:flags_1.dest({required:true}),cookiespath:flags_1.cookiespath({required:true}),filename:flags_1.filename({required:true,default:"tracerbench"}),marker:flags_1.marker({required:true}),config:flags_1.config(),headless:flags_1.headless};//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL21hbHluY2gvRC90cmFjZXJiZW5jaC9wYWNrYWdlcy9jbGkvc3JjL2NvbW1hbmRzL3JlY29yZC1oYXIvaW5kZXgudHMiLCJzb3VyY2VzIjpbIi9Vc2Vycy9tYWx5bmNoL0QvdHJhY2VyYmVuY2gvcGFja2FnZXMvY2xpL3NyYy9jb21tYW5kcy9yZWNvcmQtaGFyL2luZGV4LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQ0EsNENBQWlFO0FBQ2pFLHVDQUFtRDtBQUNuRCwrQkFBcUM7QUFFckMseURBQWdFO0FBQ2hFLDhFQUF1RTtBQUN2RSwrQ0FRNkI7QUFFN0IsTUFBcUIsU0FBVSxTQUFRLDhCQUFhO0lBWTNDLEtBQUssQ0FBQyxJQUFJO1FBQ2YsTUFBTSxFQUFFLEtBQUssRUFBRSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLENBQUM7UUFDeEMsSUFBSSxDQUFDLFlBQVksR0FBRywwQkFBUyxDQUFDLEtBQUssQ0FBQyxNQUFNLEVBQUUsS0FBSyxFQUFFLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQztJQUN6RSxDQUFDO0lBRU0sS0FBSyxDQUFDLEdBQUc7UUFDZCxNQUFNLEVBQUUsS0FBSyxFQUFFLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsQ0FBQztRQUN4QyxNQUFNLEVBQUUsR0FBRyxFQUFFLElBQUksRUFBRSxXQUFXLEVBQUUsUUFBUSxFQUFFLE1BQU0sRUFBRSxHQUFHLEtBQUssQ0FBQztRQUMzRCxNQUFNLEVBQUUsT0FBTyxFQUFFLGVBQWUsRUFBRSxRQUFRLEVBQUUsR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDO1FBQ2pFLElBQUksRUFBRSxXQUFXLEVBQUUsR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDO1FBQ3hDLE1BQU0sVUFBVSxHQUFnQjtZQUM5QixPQUFPLEVBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLE1BQU07WUFDbkMsR0FBRyxFQUFFLGVBQWUsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLGVBQXlCLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7U0FDbkUsQ0FBQztRQUNGLElBQUksT0FBTyxHQUFHO1lBQ1o7Z0JBQ0UsSUFBSSxFQUFFLEVBQUU7Z0JBQ1IsS0FBSyxFQUFFLEVBQUU7Z0JBQ1QsTUFBTSxFQUFFLEVBQUU7Z0JBQ1YsSUFBSSxFQUFFLEVBQUU7YUFDVDtTQUNGLENBQUM7UUFDRixJQUFJLFdBQVcsQ0FBQyxNQUFNLEVBQUU7WUFDdEIsd0JBQXdCO1lBQ3hCLE9BQU8sR0FBRyxNQUFNLG1CQUFRLENBQUMsY0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUM7U0FDaEQ7UUFFRCxzREFBc0Q7UUFDdEQsSUFBSSxRQUFRLEVBQUU7WUFDWixXQUFXLEdBQUcsS0FBSyxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUM7Z0JBQ3RDLENBQUMsQ0FBQyxXQUFXLENBQUMsTUFBTSxDQUFDLGlDQUFhLENBQUM7Z0JBQ25DLENBQUMsQ0FBQyxpQ0FBYSxDQUFDO1NBQ25CO1FBRUQsb0RBQW9EO1FBQ3BELE1BQU0sVUFBVSxHQUFHLE1BQU0sc0JBQWUsQ0FDdEMsR0FBRyxFQUNILE9BQU8sRUFDUCxNQUFNLEVBQ04sVUFBVSxFQUNWLFdBQVcsQ0FDWixDQUFDO1FBRUYsTUFBTSxPQUFPLEdBQUcsV0FBSSxDQUFDLElBQUksRUFBRSxHQUFHLFFBQVEsTUFBTSxDQUFDLENBQUM7UUFFOUMsd0JBQWEsQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDO1FBRW5ELElBQUksQ0FBQyxHQUFHLENBQUMsb0NBQW9DLE9BQU8sRUFBRSxDQUFDLENBQUM7SUFDMUQsQ0FBQzs7QUE1REgsNEJBNkRDO0FBNURlLHFCQUFXLEdBQUcsa0NBQWtDLENBQUM7QUFDL0QsOERBQThEO0FBQ2hELGVBQUssR0FBMEI7SUFDM0MsR0FBRyxFQUFFLFdBQUcsQ0FBQyxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsT0FBTyxFQUFFLFNBQVMsRUFBRSxDQUFDO0lBQ2hELElBQUksRUFBRSxZQUFJLENBQUMsRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFLENBQUM7SUFDOUIsV0FBVyxFQUFFLG1CQUFXLENBQUMsRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFLENBQUM7SUFDNUMsUUFBUSxFQUFFLGdCQUFRLENBQUMsRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBRSxhQUFhLEVBQUUsQ0FBQztJQUM5RCxNQUFNLEVBQUUsY0FBTSxDQUFDLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBRSxDQUFDO0lBQ2xDLE1BQU0sRUFBRSxjQUFNLEVBQUU7SUFDaEIsUUFBUSxFQUFSLGdCQUFRO0NBQ1QsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGZsYWdzIGFzIG9jbGlmRmxhZ3MgfSBmcm9tIFwiQG9jbGlmL2NvbW1hbmRcIjtcbmltcG9ydCB7IElDb25kaXRpb25zLCByZWNvcmRIQVJDbGllbnQgfSBmcm9tIFwiQHRyYWNlcmJlbmNoL2NvcmVcIjtcbmltcG9ydCB7IHJlYWRKc29uLCB3cml0ZUZpbGVTeW5jIH0gZnJvbSBcImZzLWV4dHJhXCI7XG5pbXBvcnQgeyBqb2luLCByZXNvbHZlIH0gZnJvbSBcInBhdGhcIjtcblxuaW1wb3J0IHsgZ2V0Q29uZmlnLCBUQkJhc2VDb21tYW5kIH0gZnJvbSBcIi4uLy4uL2NvbW1hbmQtY29uZmlnXCI7XG5pbXBvcnQgeyBoZWFkbGVzc0ZsYWdzIH0gZnJvbSBcIi4uLy4uL2NvbW1hbmQtY29uZmlnL2RlZmF1bHQtZmxhZy1hcmdzXCI7XG5pbXBvcnQge1xuICBjb25maWcsXG4gIGNvb2tpZXNwYXRoLFxuICBkZXN0LFxuICBmaWxlbmFtZSxcbiAgaGVhZGxlc3MsXG4gIG1hcmtlcixcbiAgdXJsLFxufSBmcm9tIFwiLi4vLi4vaGVscGVycy9mbGFnc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSZWNvcmRIQVIgZXh0ZW5kcyBUQkJhc2VDb21tYW5kIHtcbiAgcHVibGljIHN0YXRpYyBkZXNjcmlwdGlvbiA9IFwiR2VuZXJhdGVzIGEgSEFSIGZpbGUgZnJvbSBhIFVSTC5cIjtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgcHVibGljIHN0YXRpYyBmbGFnczogb2NsaWZGbGFncy5JbnB1dDxhbnk+ID0ge1xuICAgIHVybDogdXJsKHsgcmVxdWlyZWQ6IHRydWUsIGRlZmF1bHQ6IHVuZGVmaW5lZCB9KSxcbiAgICBkZXN0OiBkZXN0KHsgcmVxdWlyZWQ6IHRydWUgfSksXG4gICAgY29va2llc3BhdGg6IGNvb2tpZXNwYXRoKHsgcmVxdWlyZWQ6IHRydWUgfSksXG4gICAgZmlsZW5hbWU6IGZpbGVuYW1lKHsgcmVxdWlyZWQ6IHRydWUsIGRlZmF1bHQ6IFwidHJhY2VyYmVuY2hcIiB9KSxcbiAgICBtYXJrZXI6IG1hcmtlcih7IHJlcXVpcmVkOiB0cnVlIH0pLFxuICAgIGNvbmZpZzogY29uZmlnKCksXG4gICAgaGVhZGxlc3MsXG4gIH07XG4gIHB1YmxpYyBhc3luYyBpbml0KCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IHsgZmxhZ3MgfSA9IHRoaXMucGFyc2UoUmVjb3JkSEFSKTtcbiAgICB0aGlzLnBhcnNlZENvbmZpZyA9IGdldENvbmZpZyhmbGFncy5jb25maWcsIGZsYWdzLCB0aGlzLmV4cGxpY2l0RmxhZ3MpO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIHJ1bigpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCB7IGZsYWdzIH0gPSB0aGlzLnBhcnNlKFJlY29yZEhBUik7XG4gICAgY29uc3QgeyB1cmwsIGRlc3QsIGNvb2tpZXNwYXRoLCBmaWxlbmFtZSwgbWFya2VyIH0gPSBmbGFncztcbiAgICBjb25zdCB7IG5ldHdvcmssIGNwdVRocm90dGxlUmF0ZSwgaGVhZGxlc3MgfSA9IHRoaXMucGFyc2VkQ29uZmlnO1xuICAgIGxldCB7IGJyb3dzZXJBcmdzIH0gPSB0aGlzLnBhcnNlZENvbmZpZztcbiAgICBjb25zdCBjb25kaXRpb25zOiBJQ29uZGl0aW9ucyA9IHtcbiAgICAgIG5ldHdvcms6IG5ldHdvcmsgPyBuZXR3b3JrIDogXCJub25lXCIsXG4gICAgICBjcHU6IGNwdVRocm90dGxlUmF0ZSA/IHBhcnNlSW50KGNwdVRocm90dGxlUmF0ZSBhcyBzdHJpbmcsIDEwKSA6IDEsXG4gICAgfTtcbiAgICBsZXQgY29va2llcyA9IFtcbiAgICAgIHtcbiAgICAgICAgbmFtZTogXCJcIixcbiAgICAgICAgdmFsdWU6IFwiXCIsXG4gICAgICAgIGRvbWFpbjogXCJcIixcbiAgICAgICAgcGF0aDogXCJcIixcbiAgICAgIH0sXG4gICAgXTtcbiAgICBpZiAoY29va2llc3BhdGgubGVuZ3RoKSB7XG4gICAgICAvLyBncmFiIHRoZSBhdXRoIGNvb2tpZXNcbiAgICAgIGNvb2tpZXMgPSBhd2FpdCByZWFkSnNvbihyZXNvbHZlKGNvb2tpZXNwYXRoKSk7XG4gICAgfVxuXG4gICAgLy8gaWYgaGVhZGxlc3MgZmxhZyBpcyB0cnVlIGluY2x1ZGUgdGhlIGhlYWRsZXNzIGZsYWdzXG4gICAgaWYgKGhlYWRsZXNzKSB7XG4gICAgICBicm93c2VyQXJncyA9IEFycmF5LmlzQXJyYXkoYnJvd3NlckFyZ3MpXG4gICAgICAgID8gYnJvd3NlckFyZ3MuY29uY2F0KGhlYWRsZXNzRmxhZ3MpXG4gICAgICAgIDogaGVhZGxlc3NGbGFncztcbiAgICB9XG5cbiAgICAvLyByZWNvcmQgdGhlIGFjdHVhbCBIQVIgYW5kIHJldHVybiB0aGUgYXJjaGl2ZSBmaWxlXG4gICAgY29uc3QgaGFyQXJjaGl2ZSA9IGF3YWl0IHJlY29yZEhBUkNsaWVudChcbiAgICAgIHVybCxcbiAgICAgIGNvb2tpZXMsXG4gICAgICBtYXJrZXIsXG4gICAgICBjb25kaXRpb25zLFxuICAgICAgYnJvd3NlckFyZ3NcbiAgICApO1xuXG4gICAgY29uc3QgaGFyUGF0aCA9IGpvaW4oZGVzdCwgYCR7ZmlsZW5hbWV9LmhhcmApO1xuXG4gICAgd3JpdGVGaWxlU3luYyhoYXJQYXRoLCBKU09OLnN0cmluZ2lmeShoYXJBcmNoaXZlKSk7XG5cbiAgICB0aGlzLmxvZyhgSEFSIHJlY29yZGVkIGFuZCBhdmFpbGFibGUgaGVyZTogJHtoYXJQYXRofWApO1xuICB9XG59XG4iXX0=
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9tYWx5bmNoL0QvdHJhY2VyYmVuY2gvcGFja2FnZXMvY2xpL3NyYy9jb21tYW5kcy9yZWNvcmQtaGFyL2luZGV4LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJ1alFBb0NJOzRLQW5DSixLQUFBLENBQUEsTUFBQSwwQkFBQSxPQUFBLENBQUEsbUJBQUEsQ0FBQSxDQUFBLENBQ0EsS0FBQSxDQUFBLFVBQUEsMEJBQUEsT0FBQSxDQUFBLFVBQUEsQ0FBQSxDQUFBLENBQ0EsS0FBQSxDQUFBLE1BQUEsMEJBQUEsT0FBQSxDQUFBLE1BQUEsQ0FBQSxDQUFBLENBRUEsS0FBQSxDQUFBLGdCQUFBLDBCQUFBLE9BQUEsQ0FBQSxzQkFBQSxDQUFBLENBQUEsQ0FDQSxLQUFBLENBQUEsbUJBQUEsMEJBQUEsT0FBQSxDQUFBLHdDQUFBLENBQUEsQ0FBQSxDQUNBLEtBQUEsQ0FBQSxPQUFBLDBCQUFBLE9BQUEsQ0FBQSxxQkFBQSxDQUFBLENBQUEsQ0FVQSxLQUFxQixDQUFBLFNBQXJCLFNBQXVDLGdCQUFBLENBQUEsYUFBdkMsQ0FBb0QsQ0FZM0MsS0FBTSxDQUFBLElBQU4sRUFBVSx5QkFDZixLQUFNLENBQUUsS0FBRiwyQkFBWSxLQUFLLEtBQUwsQ0FBVyxTQUFYLENBQVosQ0FBTixDQURlLHdCQUVmLEtBQUssWUFBTCxDQUFvQixnQkFBQSxDQUFBLFNBQUEsQ0FBVSxLQUFLLENBQUMsTUFBaEIsQ0FBd0IsS0FBeEIsQ0FBK0IsS0FBSyxhQUFwQyxDQUFwQixDQUNELENBRU0sS0FBTSxDQUFBLEdBQU4sRUFBUyx5QkFDZCxLQUFNLENBQUUsS0FBRiwyQkFBWSxLQUFLLEtBQUwsQ0FBVyxTQUFYLENBQVosQ0FBTixDQUNBLEtBQU0sQ0FBRSxHQUFGLENBQU8sSUFBUCxDQUFhLFdBQWIsQ0FBMEIsUUFBMUIsQ0FBb0MsTUFBcEMsNEJBQStDLEtBQS9DLENBQU4sQ0FDQSxLQUFNLENBQUUsT0FBRixDQUFXLGVBQVgsQ0FBNEIsUUFBNUIsNEJBQXlDLEtBQUssWUFBOUMsQ0FBTixDQUNBLEdBQUksQ0FBRSxXQUFGLDRCQUFrQixLQUFLLFlBQXZCLENBQUosQ0FDQSxLQUFNLENBQUEsVUFBVSwyQkFBZ0IsQ0FDOUIsT0FBTyxDQUFFLE9BQU8sNkJBQUcsT0FBSCw4QkFBYSxNQUFiLENBRGMsQ0FFOUIsR0FBRyxDQUFFLGVBQWUsNkJBQUcsUUFBUSxDQUFDLGVBQUQsQ0FBNEIsRUFBNUIsQ0FBWCw4QkFBNkMsQ0FBN0MsQ0FGVSxDQUFoQixDQUFoQixDQUlBLEdBQUksQ0FBQSxPQUFPLDJCQUFHLENBQ1osQ0FDRSxJQUFJLENBQUUsRUFEUixDQUVFLEtBQUssQ0FBRSxFQUZULENBR0UsTUFBTSxDQUFFLEVBSFYsQ0FJRSxJQUFJLENBQUUsRUFKUixDQURZLENBQUgsQ0FBWCxDQVRjLHlCQWlCZCxHQUFJLFdBQVcsQ0FBQyxNQUFoQixDQUF3QixxREFDdEI7QUFDQSxPQUFPLENBQUcsS0FBTSxDQUFBLFVBQUEsQ0FBQSxRQUFBLENBQVMsTUFBQSxDQUFBLE9BQUEsQ0FBUSxXQUFSLENBQVQsQ0FBaEIsQ0FDRCxDQUhELGlDQUtBO0FBdEJjLHlCQXVCZCxHQUFJLFFBQUosQ0FBYyxxREFDWixXQUFXLENBQUcsS0FBSyxDQUFDLE9BQU4sQ0FBYyxXQUFkLDhCQUNWLFdBQVcsQ0FBQyxNQUFaLENBQW1CLG1CQUFBLENBQUEsYUFBbkIsQ0FEVSw4QkFFVixtQkFBQSxDQUFBLGFBRlUsQ0FBZCxDQUdELENBSkQsaUNBTUE7QUFDQSxLQUFNLENBQUEsVUFBVSwyQkFBRyxLQUFNLENBQUEsTUFBQSxDQUFBLGVBQUEsQ0FDdkIsR0FEdUIsQ0FFdkIsT0FGdUIsQ0FHdkIsTUFIdUIsQ0FJdkIsVUFKdUIsQ0FLdkIsV0FMdUIsQ0FBVCxDQUFoQixDQVFBLEtBQU0sQ0FBQSxPQUFPLDJCQUFHLE1BQUEsQ0FBQSxJQUFBLENBQUssSUFBTCxDQUFXLEdBQUcsUUFBUSxNQUF0QixDQUFILENBQWIsQ0F0Q2MseUJBd0NkLFVBQUEsQ0FBQSxhQUFBLENBQWMsT0FBZCxDQUF1QixJQUFJLENBQUMsU0FBTCxDQUFlLFVBQWYsQ0FBdkIsRUF4Q2MseUJBMENkLEtBQUssR0FBTCxDQUFTLG9DQUFvQyxPQUFPLEVBQXBELEVBQ0QsQ0E1RGlELEMseUJBQXBELE9BQUEsQ0FBQSxPQUFBLENBQUEsU0FBQSxDLHlCQUNnQixTQUFBLENBQUEsV0FBQSxDQUFjLGtDQUFkLENBQ2Q7eUJBQ2MsU0FBQSxDQUFBLEtBQUEsQ0FBK0IsQ0FDM0MsR0FBRyxDQUFFLE9BQUEsQ0FBQSxHQUFBLENBQUksQ0FBRSxRQUFRLENBQUUsSUFBWixDQUFrQixPQUFPLENBQUUsU0FBM0IsQ0FBSixDQURzQyxDQUUzQyxJQUFJLENBQUUsT0FBQSxDQUFBLElBQUEsQ0FBSyxDQUFFLFFBQVEsQ0FBRSxJQUFaLENBQUwsQ0FGcUMsQ0FHM0MsV0FBVyxDQUFFLE9BQUEsQ0FBQSxXQUFBLENBQVksQ0FBRSxRQUFRLENBQUUsSUFBWixDQUFaLENBSDhCLENBSTNDLFFBQVEsQ0FBRSxPQUFBLENBQUEsUUFBQSxDQUFTLENBQUUsUUFBUSxDQUFFLElBQVosQ0FBa0IsT0FBTyxDQUFFLGFBQTNCLENBQVQsQ0FKaUMsQ0FLM0MsTUFBTSxDQUFFLE9BQUEsQ0FBQSxNQUFBLENBQU8sQ0FBRSxRQUFRLENBQUUsSUFBWixDQUFQLENBTG1DLENBTTNDLE1BQU0sQ0FBRSxPQUFBLENBQUEsTUFBQSxFQU5tQyxDQU8zQyxRQUFRLENBQVIsT0FBQSxDQUFBLFFBUDJDLENBQS9CLEMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBmbGFncyBhcyBvY2xpZkZsYWdzIH0gZnJvbSBcIkBvY2xpZi9jb21tYW5kXCI7XG5pbXBvcnQgeyBJQ29uZGl0aW9ucywgcmVjb3JkSEFSQ2xpZW50IH0gZnJvbSBcIkB0cmFjZXJiZW5jaC9jb3JlXCI7XG5pbXBvcnQgeyByZWFkSnNvbiwgd3JpdGVGaWxlU3luYyB9IGZyb20gXCJmcy1leHRyYVwiO1xuaW1wb3J0IHsgam9pbiwgcmVzb2x2ZSB9IGZyb20gXCJwYXRoXCI7XG5cbmltcG9ydCB7IGdldENvbmZpZywgVEJCYXNlQ29tbWFuZCB9IGZyb20gXCIuLi8uLi9jb21tYW5kLWNvbmZpZ1wiO1xuaW1wb3J0IHsgaGVhZGxlc3NGbGFncyB9IGZyb20gXCIuLi8uLi9jb21tYW5kLWNvbmZpZy9kZWZhdWx0LWZsYWctYXJnc1wiO1xuaW1wb3J0IHtcbiAgY29uZmlnLFxuICBjb29raWVzcGF0aCxcbiAgZGVzdCxcbiAgZmlsZW5hbWUsXG4gIGhlYWRsZXNzLFxuICBtYXJrZXIsXG4gIHVybCxcbn0gZnJvbSBcIi4uLy4uL2hlbHBlcnMvZmxhZ3NcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUmVjb3JkSEFSIGV4dGVuZHMgVEJCYXNlQ29tbWFuZCB7XG4gIHB1YmxpYyBzdGF0aWMgZGVzY3JpcHRpb24gPSBcIkdlbmVyYXRlcyBhIEhBUiBmaWxlIGZyb20gYSBVUkwuXCI7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gIHB1YmxpYyBzdGF0aWMgZmxhZ3M6IG9jbGlmRmxhZ3MuSW5wdXQ8YW55PiA9IHtcbiAgICB1cmw6IHVybCh7IHJlcXVpcmVkOiB0cnVlLCBkZWZhdWx0OiB1bmRlZmluZWQgfSksXG4gICAgZGVzdDogZGVzdCh7IHJlcXVpcmVkOiB0cnVlIH0pLFxuICAgIGNvb2tpZXNwYXRoOiBjb29raWVzcGF0aCh7IHJlcXVpcmVkOiB0cnVlIH0pLFxuICAgIGZpbGVuYW1lOiBmaWxlbmFtZSh7IHJlcXVpcmVkOiB0cnVlLCBkZWZhdWx0OiBcInRyYWNlcmJlbmNoXCIgfSksXG4gICAgbWFya2VyOiBtYXJrZXIoeyByZXF1aXJlZDogdHJ1ZSB9KSxcbiAgICBjb25maWc6IGNvbmZpZygpLFxuICAgIGhlYWRsZXNzLFxuICB9O1xuICBwdWJsaWMgYXN5bmMgaW5pdCgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCB7IGZsYWdzIH0gPSB0aGlzLnBhcnNlKFJlY29yZEhBUik7XG4gICAgdGhpcy5wYXJzZWRDb25maWcgPSBnZXRDb25maWcoZmxhZ3MuY29uZmlnLCBmbGFncywgdGhpcy5leHBsaWNpdEZsYWdzKTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBydW4oKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3QgeyBmbGFncyB9ID0gdGhpcy5wYXJzZShSZWNvcmRIQVIpO1xuICAgIGNvbnN0IHsgdXJsLCBkZXN0LCBjb29raWVzcGF0aCwgZmlsZW5hbWUsIG1hcmtlciB9ID0gZmxhZ3M7XG4gICAgY29uc3QgeyBuZXR3b3JrLCBjcHVUaHJvdHRsZVJhdGUsIGhlYWRsZXNzIH0gPSB0aGlzLnBhcnNlZENvbmZpZztcbiAgICBsZXQgeyBicm93c2VyQXJncyB9ID0gdGhpcy5wYXJzZWRDb25maWc7XG4gICAgY29uc3QgY29uZGl0aW9uczogSUNvbmRpdGlvbnMgPSB7XG4gICAgICBuZXR3b3JrOiBuZXR3b3JrID8gbmV0d29yayA6IFwibm9uZVwiLFxuICAgICAgY3B1OiBjcHVUaHJvdHRsZVJhdGUgPyBwYXJzZUludChjcHVUaHJvdHRsZVJhdGUgYXMgc3RyaW5nLCAxMCkgOiAxLFxuICAgIH07XG4gICAgbGV0IGNvb2tpZXMgPSBbXG4gICAgICB7XG4gICAgICAgIG5hbWU6IFwiXCIsXG4gICAgICAgIHZhbHVlOiBcIlwiLFxuICAgICAgICBkb21haW46IFwiXCIsXG4gICAgICAgIHBhdGg6IFwiXCIsXG4gICAgICB9LFxuICAgIF07XG4gICAgaWYgKGNvb2tpZXNwYXRoLmxlbmd0aCkge1xuICAgICAgLy8gZ3JhYiB0aGUgYXV0aCBjb29raWVzXG4gICAgICBjb29raWVzID0gYXdhaXQgcmVhZEpzb24ocmVzb2x2ZShjb29raWVzcGF0aCkpO1xuICAgIH1cblxuICAgIC8vIGlmIGhlYWRsZXNzIGZsYWcgaXMgdHJ1ZSBpbmNsdWRlIHRoZSBoZWFkbGVzcyBmbGFnc1xuICAgIGlmIChoZWFkbGVzcykge1xuICAgICAgYnJvd3NlckFyZ3MgPSBBcnJheS5pc0FycmF5KGJyb3dzZXJBcmdzKVxuICAgICAgICA/IGJyb3dzZXJBcmdzLmNvbmNhdChoZWFkbGVzc0ZsYWdzKVxuICAgICAgICA6IGhlYWRsZXNzRmxhZ3M7XG4gICAgfVxuXG4gICAgLy8gcmVjb3JkIHRoZSBhY3R1YWwgSEFSIGFuZCByZXR1cm4gdGhlIGFyY2hpdmUgZmlsZVxuICAgIGNvbnN0IGhhckFyY2hpdmUgPSBhd2FpdCByZWNvcmRIQVJDbGllbnQoXG4gICAgICB1cmwsXG4gICAgICBjb29raWVzLFxuICAgICAgbWFya2VyLFxuICAgICAgY29uZGl0aW9ucyxcbiAgICAgIGJyb3dzZXJBcmdzXG4gICAgKTtcblxuICAgIGNvbnN0IGhhclBhdGggPSBqb2luKGRlc3QsIGAke2ZpbGVuYW1lfS5oYXJgKTtcblxuICAgIHdyaXRlRmlsZVN5bmMoaGFyUGF0aCwgSlNPTi5zdHJpbmdpZnkoaGFyQXJjaGl2ZSkpO1xuXG4gICAgdGhpcy5sb2coYEhBUiByZWNvcmRlZCBhbmQgYXZhaWxhYmxlIGhlcmU6ICR7aGFyUGF0aH1gKTtcbiAgfVxufVxuIl19