"use strict";function cov_1ljvm1xizr(){var path="/Users/malynch/D/tracerbench/packages/cli/src/helpers/log-compare-results.ts";var hash="8e22dcca5884c1a4da92e5a3424e1d882f0024be";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/malynch/D/tracerbench/packages/cli/src/helpers/log-compare-results.ts",statementMap:{"0":{start:{line:2,column:0},end:{line:2,column:62}},"1":{start:{line:3,column:16},end:{line:3,column:45}},"2":{start:{line:4,column:14},end:{line:4,column:30}},"3":{start:{line:5,column:25},end:{line:5,column:53}},"4":{start:{line:6,column:33},end:{line:6,column:68}},"5":{start:{line:7,column:19},end:{line:7,column:40}},"6":{start:{line:8,column:16},end:{line:8,column:34}},"7":{start:{line:18,column:4},end:{line:20,column:5}},"8":{start:{line:19,column:8},end:{line:19,column:84}},"9":{start:{line:21,column:4},end:{line:21,column:17}},"10":{start:{line:23,column:0},end:{line:23,column:54}},"11":{start:{line:33,column:22},end:{line:33,column:41}},"12":{start:{line:35,column:8},end:{line:35,column:59}},"13":{start:{line:38,column:19},end:{line:38,column:82}},"14":{start:{line:40,column:4},end:{line:40,column:42}},"15":{start:{line:42,column:0},end:{line:42,column:66}},"16":{start:{line:51,column:46},end:{line:51,column:54}},"17":{start:{line:52,column:33},end:{line:52,column:164}},"18":{start:{line:53,column:4},end:{line:55,column:5}},"19":{start:{line:54,column:8},end:{line:54,column:170}},"20":{start:{line:56,column:4},end:{line:58,column:5}},"21":{start:{line:57,column:8},end:{line:57,column:211}},"22":{start:{line:59,column:4},end:{line:59,column:11}},"23":{start:{line:61,column:0},end:{line:61,column:76}},"24":{start:{line:72,column:4},end:{line:72,column:121}},"25":{start:{line:73,column:4},end:{line:73,column:82}},"26":{start:{line:74,column:4},end:{line:74,column:88}},"27":{start:{line:75,column:4},end:{line:93,column:7}},"28":{start:{line:76,column:63},end:{line:76,column:72}},"29":{start:{line:77,column:18},end:{line:77,column:47}},"30":{start:{line:78,column:8},end:{line:91,column:9}},"31":{start:{line:80,column:12},end:{line:80,column:43}},"32":{start:{line:81,column:12},end:{line:86,column:13}},"33":{start:{line:82,column:16},end:{line:82,column:103}},"34":{start:{line:85,column:16},end:{line:85,column:105}},"35":{start:{line:87,column:12},end:{line:87,column:36}},"36":{start:{line:90,column:12},end:{line:90,column:52}},"37":{start:{line:92,column:8},end:{line:92,column:21}},"38":{start:{line:94,column:4},end:{line:94,column:11}},"39":{start:{line:96,column:0},end:{line:96,column:50}},"40":{start:{line:110,column:24},end:{line:115,column:5}},"41":{start:{line:116,column:4},end:{line:116,column:39}},"42":{start:{line:118,column:0},end:{line:118,column:46}},"43":{start:{line:127,column:24},end:{line:127,column:29}},"44":{start:{line:128,column:44},end:{line:128,column:49}},"45":{start:{line:130,column:4},end:{line:132,column:5}},"46":{start:{line:131,column:8},end:{line:131,column:60}},"47":{start:{line:134,column:4},end:{line:136,column:5}},"48":{start:{line:135,column:8},end:{line:135,column:38}},"49":{start:{line:137,column:27},end:{line:137,column:67}},"50":{start:{line:138,column:23},end:{line:138,column:70}},"51":{start:{line:139,column:24},end:{line:141,column:6}},"52":{start:{line:140,column:8},end:{line:140,column:41}},"53":{start:{line:142,column:27},end:{line:144,column:6}},"54":{start:{line:143,column:8},end:{line:143,column:44}},"55":{start:{line:145,column:33},end:{line:145,column:96}},"56":{start:{line:146,column:36},end:{line:146,column:102}},"57":{start:{line:147,column:22},end:{line:147,column:116}},"58":{start:{line:147,column:70},end:{line:147,column:115}},"59":{start:{line:148,column:34},end:{line:148,column:36}},"60":{start:{line:149,column:26},end:{line:153,column:6}},"61":{start:{line:154,column:4},end:{line:154,column:47}},"62":{start:{line:155,column:4},end:{line:155,column:243}},"63":{start:{line:156,column:4},end:{line:163,column:7}},"64":{start:{line:157,column:8},end:{line:161,column:12}},"65":{start:{line:162,column:8},end:{line:162,column:145}},"66":{start:{line:164,column:37},end:{line:164,column:41}},"67":{start:{line:165,column:31},end:{line:165,column:55}},"68":{start:{line:166,column:27},end:{line:166,column:47}},"69":{start:{line:167,column:34},end:{line:167,column:115}},"70":{start:{line:168,column:4},end:{line:170,column:5}},"71":{start:{line:169,column:8},end:{line:169,column:146}},"72":{start:{line:172,column:4},end:{line:175,column:5}},"73":{start:{line:173,column:8},end:{line:173,column:50}},"74":{start:{line:174,column:8},end:{line:174,column:46}},"75":{start:{line:176,column:4},end:{line:176,column:77}},"76":{start:{line:177,column:4},end:{line:177,column:52}},"77":{start:{line:178,column:4},end:{line:178,column:116}},"78":{start:{line:180,column:0},end:{line:180,column:46}}},fnMap:{"0":{name:"anyResultsSignificant",decl:{start:{line:16,column:9},end:{line:16,column:30}},loc:{start:{line:16,column:79},end:{line:22,column:1}},line:16},"1":{name:"allBelowRegressionThreshold",decl:{start:{line:31,column:9},end:{line:31,column:36}},loc:{start:{line:31,column:116},end:{line:41,column:1}},line:31},"2":{name:"isBelowThreshold",decl:{start:{line:32,column:13},end:{line:32,column:29}},loc:{start:{line:32,column:33},end:{line:36,column:5}},line:32},"3":{name:"outputRunMetaMessagesAndWarnings",decl:{start:{line:50,column:9},end:{line:50,column:41}},loc:{start:{line:50,column:85},end:{line:60,column:1}},line:50},"4":{name:"outputSummaryReport",decl:{start:{line:71,column:9},end:{line:71,column:28}},loc:{start:{line:71,column:57},end:{line:95,column:1}},line:71},"5":{name:"(anonymous_5)",decl:{start:{line:75,column:34},end:{line:75,column:35}},loc:{start:{line:75,column:49},end:{line:93,column:5}},line:75},"6":{name:"outputJSONResults",decl:{start:{line:109,column:9},end:{line:109,column:26}},loc:{start:{line:109,column:114},end:{line:117,column:1}},line:109},"7":{name:"logCompareResults",decl:{start:{line:126,column:15},end:{line:126,column:32}},loc:{start:{line:126,column:54},end:{line:179,column:1}},line:126},"8":{name:"(anonymous_8)",decl:{start:{line:139,column:37},end:{line:139,column:38}},loc:{start:{line:139,column:50},end:{line:141,column:5}},line:139},"9":{name:"(anonymous_9)",decl:{start:{line:142,column:40},end:{line:142,column:41}},loc:{start:{line:142,column:53},end:{line:144,column:5}},line:142},"10":{name:"(anonymous_10)",decl:{start:{line:147,column:63},end:{line:147,column:64}},loc:{start:{line:147,column:70},end:{line:147,column:115}},line:147},"11":{name:"(anonymous_11)",decl:{start:{line:156,column:22},end:{line:156,column:23}},loc:{start:{line:156,column:33},end:{line:163,column:5}},line:156}},branchMap:{"0":{loc:{start:{line:18,column:4},end:{line:20,column:5}},type:"if",locations:[{start:{line:18,column:4},end:{line:20,column:5}},{start:{line:18,column:4},end:{line:20,column:5}}],line:18},"1":{loc:{start:{line:19,column:15},end:{line:19,column:83}},type:"binary-expr",locations:[{start:{line:19,column:15},end:{line:19,column:49}},{start:{line:19,column:53},end:{line:19,column:83}}],line:19},"2":{loc:{start:{line:35,column:15},end:{line:35,column:58}},type:"cond-expr",locations:[{start:{line:35,column:46},end:{line:35,column:51}},{start:{line:35,column:54},end:{line:35,column:58}}],line:35},"3":{loc:{start:{line:35,column:15},end:{line:35,column:43}},type:"binary-expr",locations:[{start:{line:35,column:15},end:{line:35,column:20}},{start:{line:35,column:24},end:{line:35,column:43}}],line:35},"4":{loc:{start:{line:53,column:4},end:{line:55,column:5}},type:"if",locations:[{start:{line:53,column:4},end:{line:55,column:5}},{start:{line:53,column:4},end:{line:55,column:5}}],line:53},"5":{loc:{start:{line:56,column:4},end:{line:58,column:5}},type:"if",locations:[{start:{line:56,column:4},end:{line:58,column:5}},{start:{line:56,column:4},end:{line:58,column:5}}],line:56},"6":{loc:{start:{line:78,column:8},end:{line:91,column:9}},type:"if",locations:[{start:{line:78,column:8},end:{line:91,column:9}},{start:{line:78,column:8},end:{line:91,column:9}}],line:78},"7":{loc:{start:{line:78,column:12},end:{line:78,column:45}},type:"binary-expr",locations:[{start:{line:78,column:12},end:{line:78,column:25}},{start:{line:78,column:29},end:{line:78,column:45}}],line:78},"8":{loc:{start:{line:81,column:12},end:{line:86,column:13}},type:"if",locations:[{start:{line:81,column:12},end:{line:86,column:13}},{start:{line:81,column:12},end:{line:86,column:13}}],line:81},"9":{loc:{start:{line:130,column:4},end:{line:132,column:5}},type:"if",locations:[{start:{line:130,column:4},end:{line:132,column:5}},{start:{line:130,column:4},end:{line:132,column:5}}],line:130},"10":{loc:{start:{line:134,column:4},end:{line:136,column:5}},type:"if",locations:[{start:{line:134,column:4},end:{line:136,column:5}},{start:{line:134,column:4},end:{line:136,column:5}}],line:134},"11":{loc:{start:{line:168,column:4},end:{line:170,column:5}},type:"if",locations:[{start:{line:168,column:4},end:{line:170,column:5}},{start:{line:168,column:4},end:{line:170,column:5}}],line:168},"12":{loc:{start:{line:172,column:4},end:{line:175,column:5}},type:"if",locations:[{start:{line:172,column:4},end:{line:175,column:5}},{start:{line:172,column:4},end:{line:175,column:5}}],line:172}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0]},inputSourceMap:{version:3,file:"/Users/malynch/D/tracerbench/packages/cli/src/helpers/log-compare-results.ts",sources:["/Users/malynch/D/tracerbench/packages/cli/src/helpers/log-compare-results.ts"],names:[],mappings:"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",sourcesContent:["import { Command } from \"@oclif/command\";\nimport { ISevenFigureSummary, Stats } from \"@tracerbench/stats\";\nimport * as chalk from \"chalk\";\n\nimport { fidelityLookup } from \"../command-config\";\nimport { CompareAnalyzeFlags } from \"../commands/compare/analyze\";\nimport {\n  bucketPhaseValues,\n  formatPhaseData,\n  HTMLSectionRenderData,\n  ITracerBenchTraceResult,\n  PAGE_LOAD_TIME,\n} from \"./create-consumable-html\";\nimport TBTable from \"./tb-table\";\nimport { chalkScheme } from \"./utils\";\n\nexport interface ICompareJSONResult {\n  heading: string;\n  phaseName: string;\n  isSignificant: boolean;\n  estimatorDelta: string;\n  controlSampleCount: number;\n  experimentSampleCount: number;\n  confidenceInterval: string[];\n  controlSevenFigureSummary: ISevenFigureSummary;\n  experimentSevenFigureSummary: ISevenFigureSummary;\n}\n\nexport interface ICompareJSONResults {\n  benchmarkTableData: ICompareJSONResult[];\n  phaseTableData: ICompareJSONResult[];\n  areResultsSignificant: boolean;\n  isBelowRegressionThreshold: boolean;\n}\n\n/**\n * If fidelity is at acceptable number, return true if any of the phase results were significant\n *\n * @param fidelity - Use this to determine if the sample count is too low\n * @param benchmarkIsSigArray - Array of strings of either \"Yes\" or \"No\" from TBTable\n * @param phaseIsSigArray - Array of strings of either \"Yes\" or \"No\" from TBTable\n */\nexport function anyResultsSignificant(\n  fidelity: number,\n  benchmarkIsSigArray: boolean[],\n  phaseIsSigArray: boolean[]\n): boolean {\n  // if fidelity !== 'test'\n  if (fidelity > fidelityLookup.test) {\n    return benchmarkIsSigArray.includes(true) || phaseIsSigArray.includes(true);\n  }\n  return false;\n}\n\n/**\n * If any phase of the experiment has regressed slower beyond the threshold limit returns false; otherwise true\n *\n * @param regressionThreshold - Positive number in milliseconds the experiment has regressed slower defaults to 100\n * @param benchmarkTableEstimatorDeltas - Array of Estimator Deltas for the Benchmark Table\n * @param phaseTableEstimatorDeltas - Array of Estimator Deltas for the Phase Table\n */\nexport function allBelowRegressionThreshold(\n  regressionThreshold: number,\n  benchmarkTableEstimatorDeltas: number[],\n  phaseTableEstimatorDeltas: number[]\n): boolean {\n  function isBelowThreshold(n: number): boolean {\n    const limit = regressionThreshold;\n    // if the delta is a negative number and abs(delta) greater than threshold return false\n    return n < 0 && Math.abs(n) > limit ? false : true;\n  }\n  // concat estimator deltas from all phases\n  const deltas: number[] = benchmarkTableEstimatorDeltas.concat(\n    phaseTableEstimatorDeltas\n  );\n  // if the experiment is slower beyond the threshold return false;\n  return deltas.every(isBelowThreshold);\n}\n\n/**\n * Output meta data about the benchmark run and FYI messages to the user.\n *\n * @param cli - This is expected to be a \"compare\" Command instance\n * @param cliFlags - This is expected to be CLI flags from the \"compare:analyze\" command\n * @param isBelowRegressionThreshold - Boolean indicating if there were any deltas below \"regressionThreshold\" flag\n */\nexport function outputRunMetaMessagesAndWarnings(\n  cli: Command,\n  cliFlags: CompareAnalyzeFlags,\n  isBelowRegressionThreshold: boolean\n): void {\n  const { fidelity, regressionThreshold } = cliFlags;\n  const LOW_FIDELITY_WARNING =\n    'The fidelity setting was set below the recommended for a viable result. Rerun TracerBench with at least \"--fidelity=low\" OR >= 10';\n\n  if (fidelity < 10) {\n    cli.log(\n      `\\n${chalkScheme.blackBgYellow(\n        `    ${chalkScheme.white(\"WARNING\")}    `\n      )} ${chalkScheme.warning(` ${LOW_FIDELITY_WARNING}`)}\\n`\n    );\n  }\n\n  if (!isBelowRegressionThreshold) {\n    cli.log(\n      `\\n${chalkScheme.blackBgRed(\n        `    ${chalkScheme.white(\"!! ALERT\")}    `\n      )} ${chalk.red(\n        ` Regression found exceeding the set regression threshold of ${regressionThreshold} ms`\n      )}\\n`\n    );\n  }\n\n  return;\n}\n\n/**\n * Generate the summary section for the results.\n *\n * For each phase, color the significance appropriately by the HL estimated difference. Red for regression, green for\n * improvement. Color with monotone if not significant.\n *\n * @param cli - This is expected to be a \"compare\" Command instance\n * @param phaseResultsFormatted - Array of results from calling formatPhaseData\n */\nexport function outputSummaryReport(\n  cli: Command,\n  phaseResultsFormatted: Array<\n    Pick<\n      HTMLSectionRenderData,\n      \"phase\" | \"hlDiff\" | \"isSignificant\" | \"ciMin\" | \"ciMax\"\n    >\n  >\n): void {\n  cli.log(\n    `\\n${chalkScheme.blackBgBlue(\n      `    ${chalkScheme.white(\"Benchmark Results Summary\")}    `\n    )}`\n  );\n\n  cli.log(`\\n${chalk.red(\"Red\")} color means the experiment was a regression.`);\n  cli.log(\n    `${chalk.green(\"Green\")} color means the experiment was an improvement.\\n`\n  );\n  phaseResultsFormatted.forEach((phaseData) => {\n    const { phase, hlDiff, isSignificant, ciMin, ciMax } = phaseData;\n    let msg = `${chalk.bold(phase)} phase `;\n\n    if (isSignificant && Math.abs(hlDiff)) {\n      let coloredDiff;\n\n      msg += \"estimated difference \";\n\n      if (hlDiff < 0) {\n        coloredDiff = chalk.red(\n          `+${Math.abs(hlDiff)}ms [${ciMax * -1}ms to ${ciMin * -1}ms]`\n        );\n      } else {\n        coloredDiff = chalk.green(\n          `-${Math.abs(hlDiff)}ms [${ciMax * -1}ms to ${ciMin * -1}ms]`\n        );\n      }\n\n      msg += `${coloredDiff}`;\n    } else {\n      msg += `${chalk.grey(\"no difference\")}`;\n    }\n    cli.log(msg);\n  });\n\n  return;\n}\n\n/**\n * Return the trimmed compare results in JSON format\n *\n * This is propogated as the default return all the way up to the Compare command directly\n * without the need for the legacy --json flag\n *\n * @param benchmarkTableData - ICompareJSONResult[] from instantiated TBTable#getData() for the top level duration\n * @param phaseTableData - ICompareJSONResult[] from instantiated TBTable#getData() for all sub phases of the top level duration\n * @param areResultsSignificant - A culled boolean if any results are significant this is truthy\n * @param isBelowRegressionThreshold - A culled boolean to check if all results are below the config regression threshold\n * @return jsonResults - A JSON.stringified return of the trimmed compare results\n */\nexport function outputJSONResults(\n  benchmarkTableData: ICompareJSONResult[],\n  phaseTableData: ICompareJSONResult[],\n  areResultsSignificant: boolean,\n  isBelowRegressionThreshold: boolean\n): string {\n  const jsonResults: ICompareJSONResults = {\n    benchmarkTableData,\n    phaseTableData,\n    areResultsSignificant,\n    isBelowRegressionThreshold,\n  };\n  return JSON.stringify(jsonResults);\n}\n\n/**\n * Collect and analyze the data for the different phases for the experiment and control set and output the result to the console.\n *\n * @param results - This is expected to be generated from tracerbench core's runner. Containing the dataset for experiment and control\n * @param flags - This is expected to be CLI flags from the \"compare\" command\n * @param cli - This is expected to be a \"compare\" Command instance\n */\nexport async function logCompareResults(\n  results: ITracerBenchTraceResult[],\n  flags: CompareAnalyzeFlags,\n  cli: Command\n): Promise<string> {\n  const { isCIEnv } = flags;\n  let { fidelity, regressionThreshold } = flags;\n\n  // check for eg 100ms\n  if (typeof regressionThreshold === \"string\") {\n    regressionThreshold = parseInt(regressionThreshold);\n  }\n  // check from low/med/high\n  if (typeof fidelity === \"string\") {\n    fidelity = parseInt(fidelity);\n  }\n\n  const benchmarkTable = new TBTable(\"Initial Render\");\n  const phaseTable = new TBTable(\"Sub Phase of Duration\");\n\n  const controlData = results.find((element) => {\n    return element.set === \"control\";\n  }) as ITracerBenchTraceResult;\n\n  const experimentData = results.find((element) => {\n    return element.set === \"experiment\";\n  }) as ITracerBenchTraceResult;\n\n  const valuesByPhaseControl = bucketPhaseValues(controlData.samples);\n  const valuesByPhaseExperiment = bucketPhaseValues(experimentData.samples);\n\n  const subPhases = Object.keys(valuesByPhaseControl).filter(\n    (k) => k !== PAGE_LOAD_TIME\n  );\n  const phaseResultsFormatted: Array<Pick<\n    HTMLSectionRenderData,\n    \"phase\" | \"hlDiff\" | \"isSignificant\" | \"ciMin\" | \"ciMax\"\n  >> = [];\n\n  const durationStats = new Stats({\n    control: valuesByPhaseControl.duration,\n    experiment: valuesByPhaseExperiment.duration,\n    name: \"duration\",\n  });\n  benchmarkTable.display.push(durationStats);\n  phaseResultsFormatted.push(\n    formatPhaseData(\n      valuesByPhaseControl[PAGE_LOAD_TIME],\n      valuesByPhaseExperiment[PAGE_LOAD_TIME],\n      PAGE_LOAD_TIME\n    )\n  );\n\n  subPhases.forEach((phase) => {\n    phaseTable.display.push(\n      new Stats({\n        control: valuesByPhaseControl[phase],\n        experiment: valuesByPhaseExperiment[phase],\n        name: phase,\n      })\n    );\n    phaseResultsFormatted.push(\n      formatPhaseData(\n        valuesByPhaseControl[phase],\n        valuesByPhaseExperiment[phase],\n        phase\n      )\n    );\n  });\n\n  let isBelowRegressionThreshold = true;\n\n  const benchmarkTableData = benchmarkTable.getData();\n  const phaseTableData = phaseTable.getData();\n  const areResultsSignificant = anyResultsSignificant(\n    fidelity,\n    benchmarkTable.isSigArray,\n    phaseTable.isSigArray\n  );\n  if (areResultsSignificant) {\n    isBelowRegressionThreshold = allBelowRegressionThreshold(\n      regressionThreshold,\n      benchmarkTable.estimatorDeltas,\n      phaseTable.estimatorDeltas\n    );\n  }\n\n  // only log the tables when NOT in a CI env\n  if (!isCIEnv) {\n    cli.log(`\\n\\n${benchmarkTable.render()}`);\n    cli.log(`\\n\\n${phaseTable.render()}`);\n  }\n\n  outputRunMetaMessagesAndWarnings(cli, flags, isBelowRegressionThreshold);\n  outputSummaryReport(cli, phaseResultsFormatted);\n\n  return outputJSONResults(\n    benchmarkTableData,\n    phaseTableData,\n    areResultsSignificant,\n    isBelowRegressionThreshold\n  );\n}\n"]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"8e22dcca5884c1a4da92e5a3424e1d882f0024be"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];cov_1ljvm1xizr=function(){return actualCoverage;};return actualCoverage;}cov_1ljvm1xizr().s[0]++;Object.defineProperty(exports,"__esModule",{value:true});const stats_1=(cov_1ljvm1xizr().s[1]++,require("@tracerbench/stats"));const chalk=(cov_1ljvm1xizr().s[2]++,require("chalk"));const command_config_1=(cov_1ljvm1xizr().s[3]++,require("../command-config"));const create_consumable_html_1=(cov_1ljvm1xizr().s[4]++,require("./create-consumable-html"));const tb_table_1=(cov_1ljvm1xizr().s[5]++,require("./tb-table"));const utils_1=(cov_1ljvm1xizr().s[6]++,require("./utils"));/**
 * If fidelity is at acceptable number, return true if any of the phase results were significant
 *
 * @param fidelity - Use this to determine if the sample count is too low
 * @param benchmarkIsSigArray - Array of strings of either "Yes" or "No" from TBTable
 * @param phaseIsSigArray - Array of strings of either "Yes" or "No" from TBTable
 */function anyResultsSignificant(fidelity,benchmarkIsSigArray,phaseIsSigArray){cov_1ljvm1xizr().f[0]++;cov_1ljvm1xizr().s[7]++;// if fidelity !== 'test'
if(fidelity>command_config_1.fidelityLookup.test){cov_1ljvm1xizr().b[0][0]++;cov_1ljvm1xizr().s[8]++;return(cov_1ljvm1xizr().b[1][0]++,benchmarkIsSigArray.includes(true))||(cov_1ljvm1xizr().b[1][1]++,phaseIsSigArray.includes(true));}else{cov_1ljvm1xizr().b[0][1]++;}cov_1ljvm1xizr().s[9]++;return false;}cov_1ljvm1xizr().s[10]++;exports.anyResultsSignificant=anyResultsSignificant;/**
 * If any phase of the experiment has regressed slower beyond the threshold limit returns false; otherwise true
 *
 * @param regressionThreshold - Positive number in milliseconds the experiment has regressed slower defaults to 100
 * @param benchmarkTableEstimatorDeltas - Array of Estimator Deltas for the Benchmark Table
 * @param phaseTableEstimatorDeltas - Array of Estimator Deltas for the Phase Table
 */function allBelowRegressionThreshold(regressionThreshold,benchmarkTableEstimatorDeltas,phaseTableEstimatorDeltas){cov_1ljvm1xizr().f[1]++;function isBelowThreshold(n){cov_1ljvm1xizr().f[2]++;const limit=(cov_1ljvm1xizr().s[11]++,regressionThreshold);// if the delta is a negative number and abs(delta) greater than threshold return false
cov_1ljvm1xizr().s[12]++;return(cov_1ljvm1xizr().b[3][0]++,n<0)&&(cov_1ljvm1xizr().b[3][1]++,Math.abs(n)>limit)?(cov_1ljvm1xizr().b[2][0]++,false):(cov_1ljvm1xizr().b[2][1]++,true);}// concat estimator deltas from all phases
const deltas=(cov_1ljvm1xizr().s[13]++,benchmarkTableEstimatorDeltas.concat(phaseTableEstimatorDeltas));// if the experiment is slower beyond the threshold return false;
cov_1ljvm1xizr().s[14]++;return deltas.every(isBelowThreshold);}cov_1ljvm1xizr().s[15]++;exports.allBelowRegressionThreshold=allBelowRegressionThreshold;/**
 * Output meta data about the benchmark run and FYI messages to the user.
 *
 * @param cli - This is expected to be a "compare" Command instance
 * @param cliFlags - This is expected to be CLI flags from the "compare:analyze" command
 * @param isBelowRegressionThreshold - Boolean indicating if there were any deltas below "regressionThreshold" flag
 */function outputRunMetaMessagesAndWarnings(cli,cliFlags,isBelowRegressionThreshold){cov_1ljvm1xizr().f[3]++;const{fidelity,regressionThreshold}=(cov_1ljvm1xizr().s[16]++,cliFlags);const LOW_FIDELITY_WARNING=(cov_1ljvm1xizr().s[17]++,'The fidelity setting was set below the recommended for a viable result. Rerun TracerBench with at least "--fidelity=low" OR >= 10');cov_1ljvm1xizr().s[18]++;if(fidelity<10){cov_1ljvm1xizr().b[4][0]++;cov_1ljvm1xizr().s[19]++;cli.log(`\n${utils_1.chalkScheme.blackBgYellow(`    ${utils_1.chalkScheme.white("WARNING")}    `)} ${utils_1.chalkScheme.warning(` ${LOW_FIDELITY_WARNING}`)}\n`);}else{cov_1ljvm1xizr().b[4][1]++;}cov_1ljvm1xizr().s[20]++;if(!isBelowRegressionThreshold){cov_1ljvm1xizr().b[5][0]++;cov_1ljvm1xizr().s[21]++;cli.log(`\n${utils_1.chalkScheme.blackBgRed(`    ${utils_1.chalkScheme.white("!! ALERT")}    `)} ${chalk.red(` Regression found exceeding the set regression threshold of ${regressionThreshold} ms`)}\n`);}else{cov_1ljvm1xizr().b[5][1]++;}cov_1ljvm1xizr().s[22]++;return;}cov_1ljvm1xizr().s[23]++;exports.outputRunMetaMessagesAndWarnings=outputRunMetaMessagesAndWarnings;/**
 * Generate the summary section for the results.
 *
 * For each phase, color the significance appropriately by the HL estimated difference. Red for regression, green for
 * improvement. Color with monotone if not significant.
 *
 * @param cli - This is expected to be a "compare" Command instance
 * @param phaseResultsFormatted - Array of results from calling formatPhaseData
 */function outputSummaryReport(cli,phaseResultsFormatted){cov_1ljvm1xizr().f[4]++;cov_1ljvm1xizr().s[24]++;cli.log(`\n${utils_1.chalkScheme.blackBgBlue(`    ${utils_1.chalkScheme.white("Benchmark Results Summary")}    `)}`);cov_1ljvm1xizr().s[25]++;cli.log(`\n${chalk.red("Red")} color means the experiment was a regression.`);cov_1ljvm1xizr().s[26]++;cli.log(`${chalk.green("Green")} color means the experiment was an improvement.\n`);cov_1ljvm1xizr().s[27]++;phaseResultsFormatted.forEach(phaseData=>{cov_1ljvm1xizr().f[5]++;const{phase,hlDiff,isSignificant,ciMin,ciMax}=(cov_1ljvm1xizr().s[28]++,phaseData);let msg=(cov_1ljvm1xizr().s[29]++,`${chalk.bold(phase)} phase `);cov_1ljvm1xizr().s[30]++;if((cov_1ljvm1xizr().b[7][0]++,isSignificant)&&(cov_1ljvm1xizr().b[7][1]++,Math.abs(hlDiff))){cov_1ljvm1xizr().b[6][0]++;let coloredDiff;cov_1ljvm1xizr().s[31]++;msg+="estimated difference ";cov_1ljvm1xizr().s[32]++;if(hlDiff<0){cov_1ljvm1xizr().b[8][0]++;cov_1ljvm1xizr().s[33]++;coloredDiff=chalk.red(`+${Math.abs(hlDiff)}ms [${ciMax*-1}ms to ${ciMin*-1}ms]`);}else{cov_1ljvm1xizr().b[8][1]++;cov_1ljvm1xizr().s[34]++;coloredDiff=chalk.green(`-${Math.abs(hlDiff)}ms [${ciMax*-1}ms to ${ciMin*-1}ms]`);}cov_1ljvm1xizr().s[35]++;msg+=`${coloredDiff}`;}else{cov_1ljvm1xizr().b[6][1]++;cov_1ljvm1xizr().s[36]++;msg+=`${chalk.grey("no difference")}`;}cov_1ljvm1xizr().s[37]++;cli.log(msg);});cov_1ljvm1xizr().s[38]++;return;}cov_1ljvm1xizr().s[39]++;exports.outputSummaryReport=outputSummaryReport;/**
 * Return the trimmed compare results in JSON format
 *
 * This is propogated as the default return all the way up to the Compare command directly
 * without the need for the legacy --json flag
 *
 * @param benchmarkTableData - ICompareJSONResult[] from instantiated TBTable#getData() for the top level duration
 * @param phaseTableData - ICompareJSONResult[] from instantiated TBTable#getData() for all sub phases of the top level duration
 * @param areResultsSignificant - A culled boolean if any results are significant this is truthy
 * @param isBelowRegressionThreshold - A culled boolean to check if all results are below the config regression threshold
 * @return jsonResults - A JSON.stringified return of the trimmed compare results
 */function outputJSONResults(benchmarkTableData,phaseTableData,areResultsSignificant,isBelowRegressionThreshold){cov_1ljvm1xizr().f[6]++;const jsonResults=(cov_1ljvm1xizr().s[40]++,{benchmarkTableData,phaseTableData,areResultsSignificant,isBelowRegressionThreshold});cov_1ljvm1xizr().s[41]++;return JSON.stringify(jsonResults);}cov_1ljvm1xizr().s[42]++;exports.outputJSONResults=outputJSONResults;/**
 * Collect and analyze the data for the different phases for the experiment and control set and output the result to the console.
 *
 * @param results - This is expected to be generated from tracerbench core's runner. Containing the dataset for experiment and control
 * @param flags - This is expected to be CLI flags from the "compare" command
 * @param cli - This is expected to be a "compare" Command instance
 */async function logCompareResults(results,flags,cli){cov_1ljvm1xizr().f[7]++;const{isCIEnv}=(cov_1ljvm1xizr().s[43]++,flags);let{fidelity,regressionThreshold}=(cov_1ljvm1xizr().s[44]++,flags);// check for eg 100ms
cov_1ljvm1xizr().s[45]++;if(typeof regressionThreshold==="string"){cov_1ljvm1xizr().b[9][0]++;cov_1ljvm1xizr().s[46]++;regressionThreshold=parseInt(regressionThreshold);}else{cov_1ljvm1xizr().b[9][1]++;}// check from low/med/high
cov_1ljvm1xizr().s[47]++;if(typeof fidelity==="string"){cov_1ljvm1xizr().b[10][0]++;cov_1ljvm1xizr().s[48]++;fidelity=parseInt(fidelity);}else{cov_1ljvm1xizr().b[10][1]++;}const benchmarkTable=(cov_1ljvm1xizr().s[49]++,new tb_table_1.default("Initial Render"));const phaseTable=(cov_1ljvm1xizr().s[50]++,new tb_table_1.default("Sub Phase of Duration"));const controlData=(cov_1ljvm1xizr().s[51]++,results.find(element=>{cov_1ljvm1xizr().f[8]++;cov_1ljvm1xizr().s[52]++;return element.set==="control";}));const experimentData=(cov_1ljvm1xizr().s[53]++,results.find(element=>{cov_1ljvm1xizr().f[9]++;cov_1ljvm1xizr().s[54]++;return element.set==="experiment";}));const valuesByPhaseControl=(cov_1ljvm1xizr().s[55]++,create_consumable_html_1.bucketPhaseValues(controlData.samples));const valuesByPhaseExperiment=(cov_1ljvm1xizr().s[56]++,create_consumable_html_1.bucketPhaseValues(experimentData.samples));const subPhases=(cov_1ljvm1xizr().s[57]++,Object.keys(valuesByPhaseControl).filter(k=>{cov_1ljvm1xizr().f[10]++;cov_1ljvm1xizr().s[58]++;return k!==create_consumable_html_1.PAGE_LOAD_TIME;}));const phaseResultsFormatted=(cov_1ljvm1xizr().s[59]++,[]);const durationStats=(cov_1ljvm1xizr().s[60]++,new stats_1.Stats({control:valuesByPhaseControl.duration,experiment:valuesByPhaseExperiment.duration,name:"duration"}));cov_1ljvm1xizr().s[61]++;benchmarkTable.display.push(durationStats);cov_1ljvm1xizr().s[62]++;phaseResultsFormatted.push(create_consumable_html_1.formatPhaseData(valuesByPhaseControl[create_consumable_html_1.PAGE_LOAD_TIME],valuesByPhaseExperiment[create_consumable_html_1.PAGE_LOAD_TIME],create_consumable_html_1.PAGE_LOAD_TIME));cov_1ljvm1xizr().s[63]++;subPhases.forEach(phase=>{cov_1ljvm1xizr().f[11]++;cov_1ljvm1xizr().s[64]++;phaseTable.display.push(new stats_1.Stats({control:valuesByPhaseControl[phase],experiment:valuesByPhaseExperiment[phase],name:phase}));cov_1ljvm1xizr().s[65]++;phaseResultsFormatted.push(create_consumable_html_1.formatPhaseData(valuesByPhaseControl[phase],valuesByPhaseExperiment[phase],phase));});let isBelowRegressionThreshold=(cov_1ljvm1xizr().s[66]++,true);const benchmarkTableData=(cov_1ljvm1xizr().s[67]++,benchmarkTable.getData());const phaseTableData=(cov_1ljvm1xizr().s[68]++,phaseTable.getData());const areResultsSignificant=(cov_1ljvm1xizr().s[69]++,anyResultsSignificant(fidelity,benchmarkTable.isSigArray,phaseTable.isSigArray));cov_1ljvm1xizr().s[70]++;if(areResultsSignificant){cov_1ljvm1xizr().b[11][0]++;cov_1ljvm1xizr().s[71]++;isBelowRegressionThreshold=allBelowRegressionThreshold(regressionThreshold,benchmarkTable.estimatorDeltas,phaseTable.estimatorDeltas);}else{cov_1ljvm1xizr().b[11][1]++;}// only log the tables when NOT in a CI env
cov_1ljvm1xizr().s[72]++;if(!isCIEnv){cov_1ljvm1xizr().b[12][0]++;cov_1ljvm1xizr().s[73]++;cli.log(`\n\n${benchmarkTable.render()}`);cov_1ljvm1xizr().s[74]++;cli.log(`\n\n${phaseTable.render()}`);}else{cov_1ljvm1xizr().b[12][1]++;}cov_1ljvm1xizr().s[75]++;outputRunMetaMessagesAndWarnings(cli,flags,isBelowRegressionThreshold);cov_1ljvm1xizr().s[76]++;outputSummaryReport(cli,phaseResultsFormatted);cov_1ljvm1xizr().s[77]++;return outputJSONResults(benchmarkTableData,phaseTableData,areResultsSignificant,isBelowRegressionThreshold);}cov_1ljvm1xizr().s[78]++;exports.logCompareResults=logCompareResults;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL21hbHluY2gvRC90cmFjZXJiZW5jaC9wYWNrYWdlcy9jbGkvc3JjL2hlbHBlcnMvbG9nLWNvbXBhcmUtcmVzdWx0cy50cyIsInNvdXJjZXMiOlsiL1VzZXJzL21hbHluY2gvRC90cmFjZXJiZW5jaC9wYWNrYWdlcy9jbGkvc3JjL2hlbHBlcnMvbG9nLWNvbXBhcmUtcmVzdWx0cy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUNBLDhDQUFnRTtBQUNoRSwrQkFBK0I7QUFFL0Isc0RBQW1EO0FBRW5ELHFFQU1rQztBQUNsQyx5Q0FBaUM7QUFDakMsbUNBQXNDO0FBcUJ0Qzs7Ozs7O0dBTUc7QUFDSCxTQUFnQixxQkFBcUIsQ0FDbkMsUUFBZ0IsRUFDaEIsbUJBQThCLEVBQzlCLGVBQTBCO0lBRTFCLHlCQUF5QjtJQUN6QixJQUFJLFFBQVEsR0FBRywrQkFBYyxDQUFDLElBQUksRUFBRTtRQUNsQyxPQUFPLG1CQUFtQixDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsSUFBSSxlQUFlLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDO0tBQzdFO0lBQ0QsT0FBTyxLQUFLLENBQUM7QUFDZixDQUFDO0FBVkQsc0RBVUM7QUFFRDs7Ozs7O0dBTUc7QUFDSCxTQUFnQiwyQkFBMkIsQ0FDekMsbUJBQTJCLEVBQzNCLDZCQUF1QyxFQUN2Qyx5QkFBbUM7SUFFbkMsU0FBUyxnQkFBZ0IsQ0FBQyxDQUFTO1FBQ2pDLE1BQU0sS0FBSyxHQUFHLG1CQUFtQixDQUFDO1FBQ2xDLHVGQUF1RjtRQUN2RixPQUFPLENBQUMsR0FBRyxDQUFDLElBQUksSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDO0lBQ3JELENBQUM7SUFDRCwwQ0FBMEM7SUFDMUMsTUFBTSxNQUFNLEdBQWEsNkJBQTZCLENBQUMsTUFBTSxDQUMzRCx5QkFBeUIsQ0FDMUIsQ0FBQztJQUNG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d0NBQWUsQ0FDYixvQkFBb0IsQ0FBQyxLQUFLLENBQUMsRUFDM0IsdUJBQXVCLENBQUMsS0FBSyxDQUFDLEVBQzlCLEtBQUssQ0FDTixDQUNGLENBQUM7SUFDSixDQUFDLENBQUMsQ0FBQztJQUVILElBQUksMEJBQTBCLEdBQUcsSUFBSSxDQUFDO0lBRXRDLE1BQU0sa0JBQWtCLEdBQUcsY0FBYyxDQUFDLE9BQU8sRUFBRSxDQUFDO0lBQ3BELE1BQU0sY0FBYyxHQUFHLFVBQVUsQ0FBQyxPQUFPLEVBQUUsQ0FBQztJQUM1QyxNQUFNLHFCQUFxQixHQUFHLHFCQUFxQixDQUNqRCxRQUFRLEVBQ1IsY0FBYyxDQUFDLFVBQVUsRUFDekIsVUFBVSxDQUFDLFVBQVUsQ0FDdEIsQ0FBQztJQUNGLElBQUkscUJBQXFCLEVBQUU7UUFDekIsMEJBQTBCLEdBQUcsMkJBQTJCLENBQ3RELG1CQUFtQixFQUNuQixjQUFjLENBQUMsZUFBZSxFQUM5QixVQUFVLENBQUMsZUFBZSxDQUMzQixDQUFDO0tBQ0g7SUFFRCwyQ0FBMkM7SUFDM0MsSUFBSSxDQUFDLE9BQU8sRUFBRTtRQUNaLEdBQUcsQ0FBQyxHQUFHLENBQUMsT0FBTyxjQUFjLENBQUMsTUFBTSxFQUFFLEVBQUUsQ0FBQyxDQUFDO1FBQzFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsT0FBTyxVQUFVLENBQUMsTUFBTSxFQUFFLEVBQUUsQ0FBQyxDQUFDO0tBQ3ZDO0lBRUQsZ0NBQWdDLENBQUMsR0FBRyxFQUFFLEtBQUssRUFBRSwwQkFBMEIsQ0FBQyxDQUFDO0lBQ3pFLG1CQUFtQixDQUFDLEdBQUcsRUFBRSxxQkFBcUIsQ0FBQyxDQUFDO0lBRWhELE9BQU8saUJBQWlCLENBQ3RCLGtCQUFrQixFQUNsQixjQUFjLEVBQ2QscUJBQXFCLEVBQ3JCLDBCQUEwQixDQUMzQixDQUFDO0FBQ0osQ0FBQztBQXRHRCw4Q0FzR0MiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21tYW5kIH0gZnJvbSBcIkBvY2xpZi9jb21tYW5kXCI7XG5pbXBvcnQgeyBJU2V2ZW5GaWd1cmVTdW1tYXJ5LCBTdGF0cyB9IGZyb20gXCJAdHJhY2VyYmVuY2gvc3RhdHNcIjtcbmltcG9ydCAqIGFzIGNoYWxrIGZyb20gXCJjaGFsa1wiO1xuXG5pbXBvcnQgeyBmaWRlbGl0eUxvb2t1cCB9IGZyb20gXCIuLi9jb21tYW5kLWNvbmZpZ1wiO1xuaW1wb3J0IHsgQ29tcGFyZUFuYWx5emVGbGFncyB9IGZyb20gXCIuLi9jb21tYW5kcy9jb21wYXJlL2FuYWx5emVcIjtcbmltcG9ydCB7XG4gIGJ1Y2tldFBoYXNlVmFsdWVzLFxuICBmb3JtYXRQaGFzZURhdGEsXG4gIEhUTUxTZWN0aW9uUmVuZGVyRGF0YSxcbiAgSVRyYWNlckJlbmNoVHJhY2VSZXN1bHQsXG4gIFBBR0VfTE9BRF9USU1FLFxufSBmcm9tIFwiLi9jcmVhdGUtY29uc3VtYWJsZS1odG1sXCI7XG5pbXBvcnQgVEJUYWJsZSBmcm9tIFwiLi90Yi10YWJsZVwiO1xuaW1wb3J0IHsgY2hhbGtTY2hlbWUgfSBmcm9tIFwiLi91dGlsc1wiO1xuXG5leHBvcnQgaW50ZXJmYWNlIElDb21wYXJlSlNPTlJlc3VsdCB7XG4gIGhlYWRpbmc6IHN0cmluZztcbiAgcGhhc2VOYW1lOiBzdHJpbmc7XG4gIGlzU2lnbmlmaWNhbnQ6IGJvb2xlYW47XG4gIGVzdGltYXRvckRlbHRhOiBzdHJpbmc7XG4gIGNvbnRyb2xTYW1wbGVDb3VudDogbnVtYmVyO1xuICBleHBlcmltZW50U2FtcGxlQ291bnQ6IG51bWJlcjtcbiAgY29uZmlkZW5jZUludGVydmFsOiBzdHJpbmdbXTtcbiAgY29udHJvbFNldmVuRmlndXJlU3VtbWFyeTogSVNldmVuRmlndXJlU3VtbWFyeTtcbiAgZXhwZXJpbWVudFNldmVuRmlndXJlU3VtbWFyeTogSVNldmVuRmlndXJlU3VtbWFyeTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJQ29tcGFyZUpTT05SZXN1bHRzIHtcbiAgYmVuY2htYXJrVGFibGVEYXRhOiBJQ29tcGFyZUpTT05SZXN1bHRbXTtcbiAgcGhhc2VUYWJsZURhdGE6IElDb21wYXJlSlNPTlJlc3VsdFtdO1xuICBhcmVSZXN1bHRzU2lnbmlmaWNhbnQ6IGJvb2xlYW47XG4gIGlzQmVsb3dSZWdyZXNzaW9uVGhyZXNob2xkOiBib29sZWFuO1xufVxuXG4vKipcbiAqIElmIGZpZGVsaXR5IGlzIGF0IGFjY2VwdGFibGUgbnVtYmVyLCByZXR1cm4gdHJ1ZSBpZiBhbnkgb2YgdGhlIHBoYXNlIHJlc3VsdHMgd2VyZSBzaWduaWZpY2FudFxuICpcbiAqIEBwYXJhbSBmaWRlbGl0eSAtIFVzZSB0aGlzIHRvIGRldGVybWluZSBpZiB0aGUgc2FtcGxlIGNvdW50IGlzIHRvbyBsb3dcbiAqIEBwYXJhbSBiZW5jaG1hcmtJc1NpZ0FycmF5IC0gQXJyYXkgb2Ygc3RyaW5ncyBvZiBlaXRoZXIgXCJZZXNcIiBvciBcIk5vXCIgZnJvbSBUQlRhYmxlXG4gKiBAcGFyYW0gcGhhc2VJc1NpZ0FycmF5IC0gQXJyYXkgb2Ygc3RyaW5ncyBvZiBlaXRoZXIgXCJZZXNcIiBvciBcIk5vXCIgZnJvbSBUQlRhYmxlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhbnlSZXN1bHRzU2lnbmlmaWNhbnQoXG4gIGZpZGVsaXR5OiBudW1iZXIsXG4gIGJlbmNobWFya0lzU2lnQXJyYXk6IGJvb2xlYW5bXSxcbiAgcGhhc2VJc1NpZ0FycmF5OiBib29sZWFuW11cbik6IGJvb2xlYW4ge1xuICAvLyBpZiBmaWRlbGl0eSAhPT0gJ3Rlc3QnXG4gIGlmIChmaWRlbGl0eSA+IGZpZGVsaXR5TG9va3VwLnRlc3QpIHtcbiAgICByZXR1cm4gYmVuY2htYXJrSXNTaWdBcnJheS5pbmNsdWRlcyh0cnVlKSB8fCBwaGFzZUlzU2lnQXJyYXkuaW5jbHVkZXModHJ1ZSk7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG4vKipcbiAqIElmIGFueSBwaGFzZSBvZiB0aGUgZXhwZXJpbWVudCBoYXMgcmVncmVzc2VkIHNsb3dlciBiZXlvbmQgdGhlIHRocmVzaG9sZCBsaW1pdCByZXR1cm5zIGZhbHNlOyBvdGhlcndpc2UgdHJ1ZVxuICpcbiAqIEBwYXJhbSByZWdyZXNzaW9uVGhyZXNob2xkIC0gUG9zaXRpdmUgbnVtYmVyIGluIG1pbGxpc2Vjb25kcyB0aGUgZXhwZXJpbWVudCBoYXMgcmVncmVzc2VkIHNsb3dlciBkZWZhdWx0cyB0byAxMDBcbiAqIEBwYXJhbSBiZW5jaG1hcmtUYWJsZUVzdGltYXRvckRlbHRhcyAtIEFycmF5IG9mIEVzdGltYXRvciBEZWx0YXMgZm9yIHRoZSBCZW5jaG1hcmsgVGFibGVcbiAqIEBwYXJhbSBwaGFzZVRhYmxlRXN0aW1hdG9yRGVsdGFzIC0gQXJyYXkgb2YgRXN0aW1hdG9yIERlbHRhcyBmb3IgdGhlIFBoYXNlIFRhYmxlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhbGxCZWxvd1JlZ3Jlc3Npb25UaHJlc2hvbGQoXG4gIHJlZ3Jlc3Npb25UaHJlc2hvbGQ6IG51bWJlcixcbiAgYmVuY2htYXJrVGFibGVFc3RpbWF0b3JEZWx0YXM6IG51bWJlcltdLFxuICBwaGFzZVRhYmxlRXN0aW1hdG9yRGVsdGFzOiBudW1iZXJbXVxuKTogYm9vbGVhbiB7XG4gIGZ1bmN0aW9uIGlzQmVsb3dUaHJlc2hvbGQobjogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgY29uc3QgbGltaXQgPSByZWdyZXNzaW9uVGhyZXNob2xkO1xuICAgIC8vIGlmIHRoZSBkZWx0YSBpcyBhIG5lZ2F0aXZlIG51bWJlciBhbmQgYWJzKGRlbHRhKSBncmVhdGVyIHRoYW4gdGhyZXNob2xkIHJldHVybiBmYWxzZVxuICAgIHJldHVybiBuIDwgMCAmJiBNYXRoLmFicyhuKSA+IGxpbWl0ID8gZmFsc2UgOiB0cnVlO1xuICB9XG4gIC8vIGNvbmNhdCBlc3RpbWF0b3IgZGVsdGFzIGZyb20gYWxsIHBoYXNlc1xuICBjb25zdCBkZWx0YXM6IG51bWJlcltdID0gYmVuY2htYXJrVGFibGVFc3RpbWF0b3JEZWx0YXMuY29uY2F0KFxuICAgIHBoYXNlVGFibGVFc3RpbWF0b3JEZWx0YXNcbiAgKTtcbiAgLy8gaWYgdGhlIGV4cGVyaW1lbnQgaXMgc2xvd2VyIGJleW9uZCB0aGUgdGhyZXNob2xkIHJldHVybiBmYWxzZTtcbiAgcmV0dXJuIGRlbHRhcy5ldmVyeShpc0JlbG93VGhyZXNob2xkKTtcbn1cblxuLyoqXG4gKiBPdXRwdXQgbWV0YSBkYXRhIGFib3V0IHRoZSBiZW5jaG1hcmsgcnVuIGFuZCBGWUkgbWVzc2FnZXMgdG8gdGhlIHVzZXIuXG4gKlxuICogQHBhcmFtIGNsaSAtIFRoaXMgaXMgZXhwZWN0ZWQgdG8gYmUgYSBcImNvbXBhcmVcIiBDb21tYW5kIGluc3RhbmNlXG4gKiBAcGFyYW0gY2xpRmxhZ3MgLSBUaGlzIGlzIGV4cGVjdGVkIHRvIGJlIENMSSBmbGFncyBmcm9tIHRoZSBcImNvbXBhcmU6YW5hbHl6ZVwiIGNvbW1hbmRcbiAqIEBwYXJhbSBpc0JlbG93UmVncmVzc2lvblRocmVzaG9sZCAtIEJvb2xlYW4gaW5kaWNhdGluZyBpZiB0aGVyZSB3ZXJlIGFueSBkZWx0YXMgYmVsb3cgXCJyZWdyZXNzaW9uVGhyZXNob2xkXCIgZmxhZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gb3V0cHV0UnVuTWV0YU1lc3NhZ2VzQW5kV2FybmluZ3MoXG4gIGNsaTogQ29tbWFuZCxcbiAgY2xpRmxhZ3M6IENvbXBhcmVBbmFseXplRmxhZ3MsXG4gIGlzQmVsb3dSZWdyZXNzaW9uVGhyZXNob2xkOiBib29sZWFuXG4pOiB2b2lkIHtcbiAgY29uc3QgeyBmaWRlbGl0eSwgcmVncmVzc2lvblRocmVzaG9sZCB9ID0gY2xpRmxhZ3M7XG4gIGNvbnN0IExPV19GSURFTElUWV9XQVJOSU5HID1cbiAgICAnVGhlIGZpZGVsaXR5IHNldHRpbmcgd2FzIHNldCBiZWxvdyB0aGUgcmVjb21tZW5kZWQgZm9yIGEgdmlhYmxlIHJlc3VsdC4gUmVydW4gVHJhY2VyQmVuY2ggd2l0aCBhdCBsZWFzdCBcIi0tZmlkZWxpdHk9bG93XCIgT1IgPj0gMTAnO1xuXG4gIGlmIChmaWRlbGl0eSA8IDEwKSB7XG4gICAgY2xpLmxvZyhcbiAgICAgIGBcXG4ke2NoYWxrU2NoZW1lLmJsYWNrQmdZZWxsb3coXG4gICAgICAgIGAgICAgJHtjaGFsa1NjaGVtZS53aGl0ZShcIldBUk5JTkdcIil9ICAgIGBcbiAgICAgICl9ICR7Y2hhbGtTY2hlbWUud2FybmluZyhgICR7TE9XX0ZJREVMSVRZX1dBUk5JTkd9YCl9XFxuYFxuICAgICk7XG4gIH1cblxuICBpZiAoIWlzQmVsb3dSZWdyZXNzaW9uVGhyZXNob2xkKSB7XG4gICAgY2xpLmxvZyhcbiAgICAgIGBcXG4ke2NoYWxrU2NoZW1lLmJsYWNrQmdSZWQoXG4gICAgICAgIGAgICAgJHtjaGFsa1NjaGVtZS53aGl0ZShcIiEhIEFMRVJUXCIpfSAgICBgXG4gICAgICApfSAke2NoYWxrLnJlZChcbiAgICAgICAgYCBSZWdyZXNzaW9uIGZvdW5kIGV4Y2VlZGluZyB0aGUgc2V0IHJlZ3Jlc3Npb24gdGhyZXNob2xkIG9mICR7cmVncmVzc2lvblRocmVzaG9sZH0gbXNgXG4gICAgICApfVxcbmBcbiAgICApO1xuICB9XG5cbiAgcmV0dXJuO1xufVxuXG4vKipcbiAqIEdlbmVyYXRlIHRoZSBzdW1tYXJ5IHNlY3Rpb24gZm9yIHRoZSByZXN1bHRzLlxuICpcbiAqIEZvciBlYWNoIHBoYXNlLCBjb2xvciB0aGUgc2lnbmlmaWNhbmNlIGFwcHJvcHJpYXRlbHkgYnkgdGhlIEhMIGVzdGltYXRlZCBkaWZmZXJlbmNlLiBSZWQgZm9yIHJlZ3Jlc3Npb24sIGdyZWVuIGZvclxuICogaW1wcm92ZW1lbnQuIENvbG9yIHdpdGggbW9ub3RvbmUgaWYgbm90IHNpZ25pZmljYW50LlxuICpcbiAqIEBwYXJhbSBjbGkgLSBUaGlzIGlzIGV4cGVjdGVkIHRvIGJlIGEgXCJjb21wYXJlXCIgQ29tbWFuZCBpbnN0YW5jZVxuICogQHBhcmFtIHBoYXNlUmVzdWx0c0Zvcm1hdHRlZCAtIEFycmF5IG9mIHJlc3VsdHMgZnJvbSBjYWxsaW5nIGZvcm1hdFBoYXNlRGF0YVxuICovXG5leHBvcnQgZnVuY3Rpb24gb3V0cHV0U3VtbWFyeVJlcG9ydChcbiAgY2xpOiBDb21tYW5kLFxuICBwaGFzZVJlc3VsdHNGb3JtYXR0ZWQ6IEFycmF5PFxuICAgIFBpY2s8XG4gICAgICBIVE1MU2VjdGlvblJlbmRlckRhdGEsXG4gICAgICBcInBoYXNlXCIgfCBcImhsRGlmZlwiIHwgXCJpc1NpZ25pZmljYW50XCIgfCBcImNpTWluXCIgfCBcImNpTWF4XCJcbiAgICA+XG4gID5cbik6IHZvaWQge1xuICBjbGkubG9nKFxuICAgIGBcXG4ke2NoYWxrU2NoZW1lLmJsYWNrQmdCbHVlKFxuICAgICAgYCAgICAke2NoYWxrU2NoZW1lLndoaXRlKFwiQmVuY2htYXJrIFJlc3VsdHMgU3VtbWFyeVwiKX0gICAgYFxuICAgICl9YFxuICApO1xuXG4gIGNsaS5sb2coYFxcbiR7Y2hhbGsucmVkKFwiUmVkXCIpfSBjb2xvciBtZWFucyB0aGUgZXhwZXJpbWVudCB3YXMgYSByZWdyZXNzaW9uLmApO1xuICBjbGkubG9nKFxuICAgIGAke2NoYWxrLmdyZWVuKFwiR3JlZW5cIil9IGNvbG9yIG1lYW5zIHRoZSBleHBlcmltZW50IHdhcyBhbiBpbXByb3ZlbWVudC5cXG5gXG4gICk7XG4gIHBoYXNlUmVzdWx0c0Zvcm1hdHRlZC5mb3JFYWNoKChwaGFzZURhdGEpID0+IHtcbiAgICBjb25zdCB7IHBoYXNlLCBobERpZmYsIGlzU2lnbmlmaWNhbnQsIGNpTWluLCBjaU1heCB9ID0gcGhhc2VEYXRhO1xuICAgIGxldCBtc2cgPSBgJHtjaGFsay5ib2xkKHBoYXNlKX0gcGhhc2UgYDtcblxuICAgIGlmIChpc1NpZ25pZmljYW50ICYmIE1hdGguYWJzKGhsRGlmZikpIHtcbiAgICAgIGxldCBjb2xvcmVkRGlmZjtcblxuICAgICAgbXNnICs9IFwiZXN0aW1hdGVkIGRpZmZlcmVuY2UgXCI7XG5cbiAgICAgIGlmIChobERpZmYgPCAwKSB7XG4gICAgICAgIGNvbG9yZWREaWZmID0gY2hhbGsucmVkKFxuICAgICAgICAgIGArJHtNYXRoLmFicyhobERpZmYpfW1zIFske2NpTWF4ICogLTF9bXMgdG8gJHtjaU1pbiAqIC0xfW1zXWBcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbG9yZWREaWZmID0gY2hhbGsuZ3JlZW4oXG4gICAgICAgICAgYC0ke01hdGguYWJzKGhsRGlmZil9bXMgWyR7Y2lNYXggKiAtMX1tcyB0byAke2NpTWluICogLTF9bXNdYFxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICBtc2cgKz0gYCR7Y29sb3JlZERpZmZ9YDtcbiAgICB9IGVsc2Uge1xuICAgICAgbXNnICs9IGAke2NoYWxrLmdyZXkoXCJubyBkaWZmZXJlbmNlXCIpfWA7XG4gICAgfVxuICAgIGNsaS5sb2cobXNnKTtcbiAgfSk7XG5cbiAgcmV0dXJuO1xufVxuXG4vKipcbiAqIFJldHVybiB0aGUgdHJpbW1lZCBjb21wYXJlIHJlc3VsdHMgaW4gSlNPTiBmb3JtYXRcbiAqXG4gKiBUaGlzIGlzIHByb3BvZ2F0ZWQgYXMgdGhlIGRlZmF1bHQgcmV0dXJuIGFsbCB0aGUgd2F5IHVwIHRvIHRoZSBDb21wYXJlIGNvbW1hbmQgZGlyZWN0bHlcbiAqIHdpdGhvdXQgdGhlIG5lZWQgZm9yIHRoZSBsZWdhY3kgLS1qc29uIGZsYWdcbiAqXG4gKiBAcGFyYW0gYmVuY2htYXJrVGFibGVEYXRhIC0gSUNvbXBhcmVKU09OUmVzdWx0W10gZnJvbSBpbnN0YW50aWF0ZWQgVEJUYWJsZSNnZXREYXRhKCkgZm9yIHRoZSB0b3AgbGV2ZWwgZHVyYXRpb25cbiAqIEBwYXJhbSBwaGFzZVRhYmxlRGF0YSAtIElDb21wYXJlSlNPTlJlc3VsdFtdIGZyb20gaW5zdGFudGlhdGVkIFRCVGFibGUjZ2V0RGF0YSgpIGZvciBhbGwgc3ViIHBoYXNlcyBvZiB0aGUgdG9wIGxldmVsIGR1cmF0aW9uXG4gKiBAcGFyYW0gYXJlUmVzdWx0c1NpZ25pZmljYW50IC0gQSBjdWxsZWQgYm9vbGVhbiBpZiBhbnkgcmVzdWx0cyBhcmUgc2lnbmlmaWNhbnQgdGhpcyBpcyB0cnV0aHlcbiAqIEBwYXJhbSBpc0JlbG93UmVncmVzc2lvblRocmVzaG9sZCAtIEEgY3VsbGVkIGJvb2xlYW4gdG8gY2hlY2sgaWYgYWxsIHJlc3VsdHMgYXJlIGJlbG93IHRoZSBjb25maWcgcmVncmVzc2lvbiB0aHJlc2hvbGRcbiAqIEByZXR1cm4ganNvblJlc3VsdHMgLSBBIEpTT04uc3RyaW5naWZpZWQgcmV0dXJuIG9mIHRoZSB0cmltbWVkIGNvbXBhcmUgcmVzdWx0c1xuICovXG5leHBvcnQgZnVuY3Rpb24gb3V0cHV0SlNPTlJlc3VsdHMoXG4gIGJlbmNobWFya1RhYmxlRGF0YTogSUNvbXBhcmVKU09OUmVzdWx0W10sXG4gIHBoYXNlVGFibGVEYXRhOiBJQ29tcGFyZUpTT05SZXN1bHRbXSxcbiAgYXJlUmVzdWx0c1NpZ25pZmljYW50OiBib29sZWFuLFxuICBpc0JlbG93UmVncmVzc2lvblRocmVzaG9sZDogYm9vbGVhblxuKTogc3RyaW5nIHtcbiAgY29uc3QganNvblJlc3VsdHM6IElDb21wYXJlSlNPTlJlc3VsdHMgPSB7XG4gICAgYmVuY2htYXJrVGFibGVEYXRhLFxuICAgIHBoYXNlVGFibGVEYXRhLFxuICAgIGFyZVJlc3VsdHNTaWduaWZpY2FudCxcbiAgICBpc0JlbG93UmVncmVzc2lvblRocmVzaG9sZCxcbiAgfTtcbiAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGpzb25SZXN1bHRzKTtcbn1cblxuLyoqXG4gKiBDb2xsZWN0IGFuZCBhbmFseXplIHRoZSBkYXRhIGZvciB0aGUgZGlmZmVyZW50IHBoYXNlcyBmb3IgdGhlIGV4cGVyaW1lbnQgYW5kIGNvbnRyb2wgc2V0IGFuZCBvdXRwdXQgdGhlIHJlc3VsdCB0byB0aGUgY29uc29sZS5cbiAqXG4gKiBAcGFyYW0gcmVzdWx0cyAtIFRoaXMgaXMgZXhwZWN0ZWQgdG8gYmUgZ2VuZXJhdGVkIGZyb20gdHJhY2VyYmVuY2ggY29yZSdzIHJ1bm5lci4gQ29udGFpbmluZyB0aGUgZGF0YXNldCBmb3IgZXhwZXJpbWVudCBhbmQgY29udHJvbFxuICogQHBhcmFtIGZsYWdzIC0gVGhpcyBpcyBleHBlY3RlZCB0byBiZSBDTEkgZmxhZ3MgZnJvbSB0aGUgXCJjb21wYXJlXCIgY29tbWFuZFxuICogQHBhcmFtIGNsaSAtIFRoaXMgaXMgZXhwZWN0ZWQgdG8gYmUgYSBcImNvbXBhcmVcIiBDb21tYW5kIGluc3RhbmNlXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsb2dDb21wYXJlUmVzdWx0cyhcbiAgcmVzdWx0czogSVRyYWNlckJlbmNoVHJhY2VSZXN1bHRbXSxcbiAgZmxhZ3M6IENvbXBhcmVBbmFseXplRmxhZ3MsXG4gIGNsaTogQ29tbWFuZFxuKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgY29uc3QgeyBpc0NJRW52IH0gPSBmbGFncztcbiAgbGV0IHsgZmlkZWxpdHksIHJlZ3Jlc3Npb25UaHJlc2hvbGQgfSA9IGZsYWdzO1xuXG4gIC8vIGNoZWNrIGZvciBlZyAxMDBtc1xuICBpZiAodHlwZW9mIHJlZ3Jlc3Npb25UaHJlc2hvbGQgPT09IFwic3RyaW5nXCIpIHtcbiAgICByZWdyZXNzaW9uVGhyZXNob2xkID0gcGFyc2VJbnQocmVncmVzc2lvblRocmVzaG9sZCk7XG4gIH1cbiAgLy8gY2hlY2sgZnJvbSBsb3cvbWVkL2hpZ2hcbiAgaWYgKHR5cGVvZiBmaWRlbGl0eSA9PT0gXCJzdHJpbmdcIikge1xuICAgIGZpZGVsaXR5ID0gcGFyc2VJbnQoZmlkZWxpdHkpO1xuICB9XG5cbiAgY29uc3QgYmVuY2htYXJrVGFibGUgPSBuZXcgVEJUYWJsZShcIkluaXRpYWwgUmVuZGVyXCIpO1xuICBjb25zdCBwaGFzZVRhYmxlID0gbmV3IFRCVGFibGUoXCJTdWIgUGhhc2Ugb2YgRHVyYXRpb25cIik7XG5cbiAgY29uc3QgY29udHJvbERhdGEgPSByZXN1bHRzLmZpbmQoKGVsZW1lbnQpID0+IHtcbiAgICByZXR1cm4gZWxlbWVudC5zZXQgPT09IFwiY29udHJvbFwiO1xuICB9KSBhcyBJVHJhY2VyQmVuY2hUcmFjZVJlc3VsdDtcblxuICBjb25zdCBleHBlcmltZW50RGF0YSA9IHJlc3VsdHMuZmluZCgoZWxlbWVudCkgPT4ge1xuICAgIHJldHVybiBlbGVtZW50LnNldCA9PT0gXCJleHBlcmltZW50XCI7XG4gIH0pIGFzIElUcmFjZXJCZW5jaFRyYWNlUmVzdWx0O1xuXG4gIGNvbnN0IHZhbHVlc0J5UGhhc2VDb250cm9sID0gYnVja2V0UGhhc2VWYWx1ZXMoY29udHJvbERhdGEuc2FtcGxlcyk7XG4gIGNvbnN0IHZhbHVlc0J5UGhhc2VFeHBlcmltZW50ID0gYnVja2V0UGhhc2VWYWx1ZXMoZXhwZXJpbWVudERhdGEuc2FtcGxlcyk7XG5cbiAgY29uc3Qgc3ViUGhhc2VzID0gT2JqZWN0LmtleXModmFsdWVzQnlQaGFzZUNvbnRyb2wpLmZpbHRlcihcbiAgICAoaykgPT4gayAhPT0gUEFHRV9MT0FEX1RJTUVcbiAgKTtcbiAgY29uc3QgcGhhc2VSZXN1bHRzRm9ybWF0dGVkOiBBcnJheTxQaWNrPFxuICAgIEhUTUxTZWN0aW9uUmVuZGVyRGF0YSxcbiAgICBcInBoYXNlXCIgfCBcImhsRGlmZlwiIHwgXCJpc1NpZ25pZmljYW50XCIgfCBcImNpTWluXCIgfCBcImNpTWF4XCJcbiAgPj4gPSBbXTtcblxuICBjb25zdCBkdXJhdGlvblN0YXRzID0gbmV3IFN0YXRzKHtcbiAgICBjb250cm9sOiB2YWx1ZXNCeVBoYXNlQ29udHJvbC5kdXJhdGlvbixcbiAgICBleHBlcmltZW50OiB2YWx1ZXNCeVBoYXNlRXhwZXJpbWVudC5kdXJhdGlvbixcbiAgICBuYW1lOiBcImR1cmF0aW9uXCIsXG4gIH0pO1xuICBiZW5jaG1hcmtUYWJsZS5kaXNwbGF5LnB1c2goZHVyYXRpb25TdGF0cyk7XG4gIHBoYXNlUmVzdWx0c0Zvcm1hdHRlZC5wdXNoKFxuICAgIGZvcm1hdFBoYXNlRGF0YShcbiAgICAgIHZhbHVlc0J5UGhhc2VDb250cm9sW1BBR0VfTE9BRF9USU1FXSxcbiAgICAgIHZhbHVlc0J5UGhhc2VFeHBlcmltZW50W1BBR0VfTE9BRF9USU1FXSxcbiAgICAgIFBBR0VfTE9BRF9USU1FXG4gICAgKVxuICApO1xuXG4gIHN1YlBoYXNlcy5mb3JFYWNoKChwaGFzZSkgPT4ge1xuICAgIHBoYXNlVGFibGUuZGlzcGxheS5wdXNoKFxuICAgICAgbmV3IFN0YXRzKHtcbiAgICAgICAgY29udHJvbDogdmFsdWVzQnlQaGFzZUNvbnRyb2xbcGhhc2VdLFxuICAgICAgICBleHBlcmltZW50OiB2YWx1ZXNCeVBoYXNlRXhwZXJpbWVudFtwaGFzZV0sXG4gICAgICAgIG5hbWU6IHBoYXNlLFxuICAgICAgfSlcbiAgICApO1xuICAgIHBoYXNlUmVzdWx0c0Zvcm1hdHRlZC5wdXNoKFxuICAgICAgZm9ybWF0UGhhc2VEYXRhKFxuICAgICAgICB2YWx1ZXNCeVBoYXNlQ29udHJvbFtwaGFzZV0sXG4gICAgICAgIHZhbHVlc0J5UGhhc2VFeHBlcmltZW50W3BoYXNlXSxcbiAgICAgICAgcGhhc2VcbiAgICAgIClcbiAgICApO1xuICB9KTtcblxuICBsZXQgaXNCZWxvd1JlZ3Jlc3Npb25UaHJlc2hvbGQgPSB0cnVlO1xuXG4gIGNvbnN0IGJlbmNobWFya1RhYmxlRGF0YSA9IGJlbmNobWFya1RhYmxlLmdldERhdGEoKTtcbiAgY29uc3QgcGhhc2VUYWJsZURhdGEgPSBwaGFzZVRhYmxlLmdldERhdGEoKTtcbiAgY29uc3QgYXJlUmVzdWx0c1NpZ25pZmljYW50ID0gYW55UmVzdWx0c1NpZ25pZmljYW50KFxuICAgIGZpZGVsaXR5LFxuICAgIGJlbmNobWFya1RhYmxlLmlzU2lnQXJyYXksXG4gICAgcGhhc2VUYWJsZS5pc1NpZ0FycmF5XG4gICk7XG4gIGlmIChhcmVSZXN1bHRzU2lnbmlmaWNhbnQpIHtcbiAgICBpc0JlbG93UmVncmVzc2lvblRocmVzaG9sZCA9IGFsbEJlbG93UmVncmVzc2lvblRocmVzaG9sZChcbiAgICAgIHJlZ3Jlc3Npb25UaHJlc2hvbGQsXG4gICAgICBiZW5jaG1hcmtUYWJsZS5lc3RpbWF0b3JEZWx0YXMsXG4gICAgICBwaGFzZVRhYmxlLmVzdGltYXRvckRlbHRhc1xuICAgICk7XG4gIH1cblxuICAvLyBvbmx5IGxvZyB0aGUgdGFibGVzIHdoZW4gTk9UIGluIGEgQ0kgZW52XG4gIGlmICghaXNDSUVudikge1xuICAgIGNsaS5sb2coYFxcblxcbiR7YmVuY2htYXJrVGFibGUucmVuZGVyKCl9YCk7XG4gICAgY2xpLmxvZyhgXFxuXFxuJHtwaGFzZVRhYmxlLnJlbmRlcigpfWApO1xuICB9XG5cbiAgb3V0cHV0UnVuTWV0YU1lc3NhZ2VzQW5kV2FybmluZ3MoY2xpLCBmbGFncywgaXNCZWxvd1JlZ3Jlc3Npb25UaHJlc2hvbGQpO1xuICBvdXRwdXRTdW1tYXJ5UmVwb3J0KGNsaSwgcGhhc2VSZXN1bHRzRm9ybWF0dGVkKTtcblxuICByZXR1cm4gb3V0cHV0SlNPTlJlc3VsdHMoXG4gICAgYmVuY2htYXJrVGFibGVEYXRhLFxuICAgIHBoYXNlVGFibGVEYXRhLFxuICAgIGFyZVJlc3VsdHNTaWduaWZpY2FudCxcbiAgICBpc0JlbG93UmVncmVzc2lvblRocmVzaG9sZFxuICApO1xufVxuIl19
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9tYWx5bmNoL0QvdHJhY2VyYmVuY2gvcGFja2FnZXMvY2xpL3NyYy9oZWxwZXJzL2xvZy1jb21wYXJlLXJlc3VsdHMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6ImlwekJBQ0EsS0FBQSxDQUFBLE9BQUEsMEJBQUEsT0FBQSxDQUFBLG9CQUFBLENBQUEsQ0FBQSxDQUNBLEtBQUEsQ0FBQSxLQUFBLDBCQUFBLE9BQUEsQ0FBQSxPQUFBLENBQUEsQ0FBQSxDQUVBLEtBQUEsQ0FBQSxnQkFBQSwwQkFBQSxPQUFBLENBQUEsbUJBQUEsQ0FBQSxDQUFBLENBRUEsS0FBQSxDQUFBLHdCQUFBLDBCQUFBLE9BQUEsQ0FBQSwwQkFBQSxDQUFBLENBQUEsQ0FPQSxLQUFBLENBQUEsVUFBQSwwQkFBQSxPQUFBLENBQUEsWUFBQSxDQUFBLENBQUEsQ0FDQSxLQUFBLENBQUEsT0FBQSwwQkFBQSxPQUFBLENBQUEsU0FBQSxDQUFBLENBQUEsQ0FxQkE7Ozs7OztHQU9BLFFBQWdCLENBQUEscUJBQWhCLENBQ0UsUUFERixDQUVFLG1CQUZGLENBR0UsZUFIRixDQUc0QixpREFFMUI7QUFDQSxHQUFJLFFBQVEsQ0FBRyxnQkFBQSxDQUFBLGNBQUEsQ0FBZSxJQUE5QixDQUFvQyxvREFDbEMsTUFBTyw0QkFBQSxtQkFBbUIsQ0FBQyxRQUFwQixDQUE2QixJQUE3QixnQ0FBc0MsZUFBZSxDQUFDLFFBQWhCLENBQXlCLElBQXpCLENBQXRDLENBQVAsQ0FDRCxDQUZELGlDQUgwQix3QkFNMUIsTUFBTyxNQUFQLENBQ0QsQyx5QkFWRCxPQUFBLENBQUEscUJBQUEsQ0FBQSxxQkFBQSxDQVlBOzs7Ozs7R0FPQSxRQUFnQixDQUFBLDJCQUFoQixDQUNFLG1CQURGLENBRUUsNkJBRkYsQ0FHRSx5QkFIRixDQUdxQyx5QkFFbkMsUUFBUyxDQUFBLGdCQUFULENBQTBCLENBQTFCLENBQW1DLHlCQUNqQyxLQUFNLENBQUEsS0FBSywyQkFBRyxtQkFBSCxDQUFYLENBQ0E7QUFG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QixDQUEzQixDQXZFWSx5QkE0RVosR0FBSSxxQkFBSixDQUEyQixzREFDekIsMEJBQTBCLENBQUcsMkJBQTJCLENBQ3RELG1CQURzRCxDQUV0RCxjQUFjLENBQUMsZUFGdUMsQ0FHdEQsVUFBVSxDQUFDLGVBSDJDLENBQXhELENBS0QsQ0FORCxrQ0FRQTtBQXBGWSx5QkFxRlosR0FBSSxDQUFDLE9BQUwsQ0FBYyxzREFDWixHQUFHLENBQUMsR0FBSixDQUFRLE9BQU8sY0FBYyxDQUFDLE1BQWYsRUFBdUIsRUFBdEMsRUFEWSx5QkFFWixHQUFHLENBQUMsR0FBSixDQUFRLE9BQU8sVUFBVSxDQUFDLE1BQVgsRUFBbUIsRUFBbEMsRUFDRCxDQUhELGtDQXJGWSx5QkEwRlosZ0NBQWdDLENBQUMsR0FBRCxDQUFNLEtBQU4sQ0FBYSwwQkFBYixDQUFoQyxDQTFGWSx5QkEyRlosbUJBQW1CLENBQUMsR0FBRCxDQUFNLHFCQUFOLENBQW5CLENBM0ZZLHlCQTZGWixNQUFPLENBQUEsaUJBQWlCLENBQ3RCLGtCQURzQixDQUV0QixjQUZzQixDQUd0QixxQkFIc0IsQ0FJdEIsMEJBSnNCLENBQXhCLENBTUQsQyx5QkF0R0QsT0FBQSxDQUFBLGlCQUFBLENBQUEsaUJBQUEsQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbW1hbmQgfSBmcm9tIFwiQG9jbGlmL2NvbW1hbmRcIjtcbmltcG9ydCB7IElTZXZlbkZpZ3VyZVN1bW1hcnksIFN0YXRzIH0gZnJvbSBcIkB0cmFjZXJiZW5jaC9zdGF0c1wiO1xuaW1wb3J0ICogYXMgY2hhbGsgZnJvbSBcImNoYWxrXCI7XG5cbmltcG9ydCB7IGZpZGVsaXR5TG9va3VwIH0gZnJvbSBcIi4uL2NvbW1hbmQtY29uZmlnXCI7XG5pbXBvcnQgeyBDb21wYXJlQW5hbHl6ZUZsYWdzIH0gZnJvbSBcIi4uL2NvbW1hbmRzL2NvbXBhcmUvYW5hbHl6ZVwiO1xuaW1wb3J0IHtcbiAgYnVja2V0UGhhc2VWYWx1ZXMsXG4gIGZvcm1hdFBoYXNlRGF0YSxcbiAgSFRNTFNlY3Rpb25SZW5kZXJEYXRhLFxuICBJVHJhY2VyQmVuY2hUcmFjZVJlc3VsdCxcbiAgUEFHRV9MT0FEX1RJTUUsXG59IGZyb20gXCIuL2NyZWF0ZS1jb25zdW1hYmxlLWh0bWxcIjtcbmltcG9ydCBUQlRhYmxlIGZyb20gXCIuL3RiLXRhYmxlXCI7XG5pbXBvcnQgeyBjaGFsa1NjaGVtZSB9IGZyb20gXCIuL3V0aWxzXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUNvbXBhcmVKU09OUmVzdWx0IHtcbiAgaGVhZGluZzogc3RyaW5nO1xuICBwaGFzZU5hbWU6IHN0cmluZztcbiAgaXNTaWduaWZpY2FudDogYm9vbGVhbjtcbiAgZXN0aW1hdG9yRGVsdGE6IHN0cmluZztcbiAgY29udHJvbFNhbXBsZUNvdW50OiBudW1iZXI7XG4gIGV4cGVyaW1lbnRTYW1wbGVDb3VudDogbnVtYmVyO1xuICBjb25maWRlbmNlSW50ZXJ2YWw6IHN0cmluZ1tdO1xuICBjb250cm9sU2V2ZW5GaWd1cmVTdW1tYXJ5OiBJU2V2ZW5GaWd1cmVTdW1tYXJ5O1xuICBleHBlcmltZW50U2V2ZW5GaWd1cmVTdW1tYXJ5OiBJU2V2ZW5GaWd1cmVTdW1tYXJ5O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElDb21wYXJlSlNPTlJlc3VsdHMge1xuICBiZW5jaG1hcmtUYWJsZURhdGE6IElDb21wYXJlSlNPTlJlc3VsdFtdO1xuICBwaGFzZVRhYmxlRGF0YTogSUNvbXBhcmVKU09OUmVzdWx0W107XG4gIGFyZVJlc3VsdHNTaWduaWZpY2FudDogYm9vbGVhbjtcbiAgaXNCZWxvd1JlZ3Jlc3Npb25UaHJlc2hvbGQ6IGJvb2xlYW47XG59XG5cbi8qKlxuICogSWYgZmlkZWxpdHkgaXMgYXQgYWNjZXB0YWJsZSBudW1iZXIsIHJldHVybiB0cnVlIGlmIGFueSBvZiB0aGUgcGhhc2UgcmVzdWx0cyB3ZXJlIHNpZ25pZmljYW50XG4gKlxuICogQHBhcmFtIGZpZGVsaXR5IC0gVXNlIHRoaXMgdG8gZGV0ZXJtaW5lIGlmIHRoZSBzYW1wbGUgY291bnQgaXMgdG9vIGxvd1xuICogQHBhcmFtIGJlbmNobWFya0lzU2lnQXJyYXkgLSBBcnJheSBvZiBzdHJpbmdzIG9mIGVpdGhlciBcIlllc1wiIG9yIFwiTm9cIiBmcm9tIFRCVGFibGVcbiAqIEBwYXJhbSBwaGFzZUlzU2lnQXJyYXkgLSBBcnJheSBvZiBzdHJpbmdzIG9mIGVpdGhlciBcIlllc1wiIG9yIFwiTm9cIiBmcm9tIFRCVGFibGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFueVJlc3VsdHNTaWduaWZpY2FudChcbiAgZmlkZWxpdHk6IG51bWJlcixcbiAgYmVuY2htYXJrSXNTaWdBcnJheTogYm9vbGVhbltdLFxuICBwaGFzZUlzU2lnQXJyYXk6IGJvb2xlYW5bXVxuKTogYm9vbGVhbiB7XG4gIC8vIGlmIGZpZGVsaXR5ICE9PSAndGVzdCdcbiAgaWYgKGZpZGVsaXR5ID4gZmlkZWxpdHlMb29rdXAudGVzdCkge1xuICAgIHJldHVybiBiZW5jaG1hcmtJc1NpZ0FycmF5LmluY2x1ZGVzKHRydWUpIHx8IHBoYXNlSXNTaWdBcnJheS5pbmNsdWRlcyh0cnVlKTtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5cbi8qKlxuICogSWYgYW55IHBoYXNlIG9mIHRoZSBleHBlcmltZW50IGhhcyByZWdyZXNzZWQgc2xvd2VyIGJleW9uZCB0aGUgdGhyZXNob2xkIGxpbWl0IHJldHVybnMgZmFsc2U7IG90aGVyd2lzZSB0cnVlXG4gKlxuICogQHBhcmFtIHJlZ3Jlc3Npb25UaHJlc2hvbGQgLSBQb3NpdGl2ZSBudW1iZXIgaW4gbWlsbGlzZWNvbmRzIHRoZSBleHBlcmltZW50IGhhcyByZWdyZXNzZWQgc2xvd2VyIGRlZmF1bHRzIHRvIDEwMFxuICogQHBhcmFtIGJlbmNobWFya1RhYmxlRXN0aW1hdG9yRGVsdGFzIC0gQXJyYXkgb2YgRXN0aW1hdG9yIERlbHRhcyBmb3IgdGhlIEJlbmNobWFyayBUYWJsZVxuICogQHBhcmFtIHBoYXNlVGFibGVFc3RpbWF0b3JEZWx0YXMgLSBBcnJheSBvZiBFc3RpbWF0b3IgRGVsdGFzIGZvciB0aGUgUGhhc2UgVGFibGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFsbEJlbG93UmVncmVzc2lvblRocmVzaG9sZChcbiAgcmVncmVzc2lvblRocmVzaG9sZDogbnVtYmVyLFxuICBiZW5jaG1hcmtUYWJsZUVzdGltYXRvckRlbHRhczogbnVtYmVyW10sXG4gIHBoYXNlVGFibGVFc3RpbWF0b3JEZWx0YXM6IG51bWJlcltdXG4pOiBib29sZWFuIHtcbiAgZnVuY3Rpb24gaXNCZWxvd1RocmVzaG9sZChuOiBudW1iZXIpOiBib29sZWFuIHtcbiAgICBjb25zdCBsaW1pdCA9IHJlZ3Jlc3Npb25UaHJlc2hvbGQ7XG4gICAgLy8gaWYgdGhlIGRlbHRhIGlzIGEgbmVnYXRpdmUgbnVtYmVyIGFuZCBhYnMoZGVsdGEpIGdyZWF0ZXIgdGhhbiB0aHJlc2hvbGQgcmV0dXJuIGZhbHNlXG4gICAgcmV0dXJuIG4gPCAwICYmIE1hdGguYWJzKG4pID4gbGltaXQgPyBmYWxzZSA6IHRydWU7XG4gIH1cbiAgLy8gY29uY2F0IGVzdGltYXRvciBkZWx0YXMgZnJvbSBhbGwgcGhhc2VzXG4gIGNvbnN0IGRlbHRhczogbnVtYmVyW10gPSBiZW5jaG1hcmtUYWJsZUVzdGltYXRvckRlbHRhcy5jb25jYXQoXG4gICAgcGhhc2VUYWJsZUVzdGltYXRvckRlbHRhc1xuICApO1xuICAvLyBpZiB0aGUgZXhwZXJpbWVudCBpcyBzbG93ZXIgYmV5b25kIHRoZSB0aHJlc2hvbGQgcmV0dXJuIGZhbHNlO1xuICByZXR1cm4gZGVsdGFzLmV2ZXJ5KGlzQmVsb3dUaHJlc2hvbGQpO1xufVxuXG4vKipcbiAqIE91dHB1dCBtZXRhIGRhdGEgYWJvdXQgdGhlIGJlbmNobWFyayBydW4gYW5kIEZZSSBtZXNzYWdlcyB0byB0aGUgdXNlci5cbiAqXG4gKiBAcGFyYW0gY2xpIC0gVGhpcyBpcyBleHBlY3RlZCB0byBiZSBhIFwiY29tcGFyZVwiIENvbW1hbmQgaW5zdGFuY2VcbiAqIEBwYXJhbSBjbGlGbGFncyAtIFRoaXMgaXMgZXhwZWN0ZWQgdG8gYmUgQ0xJIGZsYWdzIGZyb20gdGhlIFwiY29tcGFyZTphbmFseXplXCIgY29tbWFuZFxuICogQHBhcmFtIGlzQmVsb3dSZWdyZXNzaW9uVGhyZXNob2xkIC0gQm9vbGVhbiBpbmRpY2F0aW5nIGlmIHRoZXJlIHdlcmUgYW55IGRlbHRhcyBiZWxvdyBcInJlZ3Jlc3Npb25UaHJlc2hvbGRcIiBmbGFnXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBvdXRwdXRSdW5NZXRhTWVzc2FnZXNBbmRXYXJuaW5ncyhcbiAgY2xpOiBDb21tYW5kLFxuICBjbGlGbGFnczogQ29tcGFyZUFuYWx5emVGbGFncyxcbiAgaXNCZWxvd1JlZ3Jlc3Npb25UaHJlc2hvbGQ6IGJvb2xlYW5cbik6IHZvaWQge1xuICBjb25zdCB7IGZpZGVsaXR5LCByZWdyZXNzaW9uVGhyZXNob2xkIH0gPSBjbGlGbGFncztcbiAgY29uc3QgTE9XX0ZJREVMSVRZX1dBUk5JTkcgPVxuICAgICdUaGUgZmlkZWxpdHkgc2V0dGluZyB3YXMgc2V0IGJlbG93IHRoZSByZWNvbW1lbmRlZCBmb3IgYSB2aWFibGUgcmVzdWx0LiBSZXJ1biBUcmFjZXJCZW5jaCB3aXRoIGF0IGxlYXN0IFwiLS1maWRlbGl0eT1sb3dcIiBPUiA+PSAxMCc7XG5cbiAgaWYgKGZpZGVsaXR5IDwgMTApIHtcbiAgICBjbGkubG9nKFxuICAgICAgYFxcbiR7Y2hhbGtTY2hlbWUuYmxhY2tCZ1llbGxvdyhcbiAgICAgICAgYCAgICAke2NoYWxrU2NoZW1lLndoaXRlKFwiV0FSTklOR1wiKX0gICAgYFxuICAgICAgKX0gJHtjaGFsa1NjaGVtZS53YXJuaW5nKGAgJHtMT1dfRklERUxJVFlfV0FSTklOR31gKX1cXG5gXG4gICAgKTtcbiAgfVxuXG4gIGlmICghaXNCZWxvd1JlZ3Jlc3Npb25UaHJlc2hvbGQpIHtcbiAgICBjbGkubG9nKFxuICAgICAgYFxcbiR7Y2hhbGtTY2hlbWUuYmxhY2tCZ1JlZChcbiAgICAgICAgYCAgICAke2NoYWxrU2NoZW1lLndoaXRlKFwiISEgQUxFUlRcIil9ICAgIGBcbiAgICAgICl9ICR7Y2hhbGsucmVkKFxuICAgICAgICBgIFJlZ3Jlc3Npb24gZm91bmQgZXhjZWVkaW5nIHRoZSBzZXQgcmVncmVzc2lvbiB0aHJlc2hvbGQgb2YgJHtyZWdyZXNzaW9uVGhyZXNob2xkfSBtc2BcbiAgICAgICl9XFxuYFxuICAgICk7XG4gIH1cblxuICByZXR1cm47XG59XG5cbi8qKlxuICogR2VuZXJhdGUgdGhlIHN1bW1hcnkgc2VjdGlvbiBmb3IgdGhlIHJlc3VsdHMuXG4gKlxuICogRm9yIGVhY2ggcGhhc2UsIGNvbG9yIHRoZSBzaWduaWZpY2FuY2UgYXBwcm9wcmlhdGVseSBieSB0aGUgSEwgZXN0aW1hdGVkIGRpZmZlcmVuY2UuIFJlZCBmb3IgcmVncmVzc2lvbiwgZ3JlZW4gZm9yXG4gKiBpbXByb3ZlbWVudC4gQ29sb3Igd2l0aCBtb25vdG9uZSBpZiBub3Qgc2lnbmlmaWNhbnQuXG4gKlxuICogQHBhcmFtIGNsaSAtIFRoaXMgaXMgZXhwZWN0ZWQgdG8gYmUgYSBcImNvbXBhcmVcIiBDb21tYW5kIGluc3RhbmNlXG4gKiBAcGFyYW0gcGhhc2VSZXN1bHRzRm9ybWF0dGVkIC0gQXJyYXkgb2YgcmVzdWx0cyBmcm9tIGNhbGxpbmcgZm9ybWF0UGhhc2VEYXRhXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBvdXRwdXRTdW1tYXJ5UmVwb3J0KFxuICBjbGk6IENvbW1hbmQsXG4gIHBoYXNlUmVzdWx0c0Zvcm1hdHRlZDogQXJyYXk8XG4gICAgUGljazxcbiAgICAgIEhUTUxTZWN0aW9uUmVuZGVyRGF0YSxcbiAgICAgIFwicGhhc2VcIiB8IFwiaGxEaWZmXCIgfCBcImlzU2lnbmlmaWNhbnRcIiB8IFwiY2lNaW5cIiB8IFwiY2lNYXhcIlxuICAgID5cbiAgPlxuKTogdm9pZCB7XG4gIGNsaS5sb2coXG4gICAgYFxcbiR7Y2hhbGtTY2hlbWUuYmxhY2tCZ0JsdWUoXG4gICAgICBgICAgICR7Y2hhbGtTY2hlbWUud2hpdGUoXCJCZW5jaG1hcmsgUmVzdWx0cyBTdW1tYXJ5XCIpfSAgICBgXG4gICAgKX1gXG4gICk7XG5cbiAgY2xpLmxvZyhgXFxuJHtjaGFsay5yZWQoXCJSZWRcIil9IGNvbG9yIG1lYW5zIHRoZSBleHBlcmltZW50IHdhcyBhIHJlZ3Jlc3Npb24uYCk7XG4gIGNsaS5sb2coXG4gICAgYCR7Y2hhbGsuZ3JlZW4oXCJHcmVlblwiKX0gY29sb3IgbWVhbnMgdGhlIGV4cGVyaW1lbnQgd2FzIGFuIGltcHJvdmVtZW50LlxcbmBcbiAgKTtcbiAgcGhhc2VSZXN1bHRzRm9ybWF0dGVkLmZvckVhY2goKHBoYXNlRGF0YSkgPT4ge1xuICAgIGNvbnN0IHsgcGhhc2UsIGhsRGlmZiwgaXNTaWduaWZpY2FudCwgY2lNaW4sIGNpTWF4IH0gPSBwaGFzZURhdGE7XG4gICAgbGV0IG1zZyA9IGAke2NoYWxrLmJvbGQocGhhc2UpfSBwaGFzZSBgO1xuXG4gICAgaWYgKGlzU2lnbmlmaWNhbnQgJiYgTWF0aC5hYnMoaGxEaWZmKSkge1xuICAgICAgbGV0IGNvbG9yZWREaWZmO1xuXG4gICAgICBtc2cgKz0gXCJlc3RpbWF0ZWQgZGlmZmVyZW5jZSBcIjtcblxuICAgICAgaWYgKGhsRGlmZiA8IDApIHtcbiAgICAgICAgY29sb3JlZERpZmYgPSBjaGFsay5yZWQoXG4gICAgICAgICAgYCske01hdGguYWJzKGhsRGlmZil9bXMgWyR7Y2lNYXggKiAtMX1tcyB0byAke2NpTWluICogLTF9bXNdYFxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29sb3JlZERpZmYgPSBjaGFsay5ncmVlbihcbiAgICAgICAgICBgLSR7TWF0aC5hYnMoaGxEaWZmKX1tcyBbJHtjaU1heCAqIC0xfW1zIHRvICR7Y2lNaW4gKiAtMX1tc11gXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIG1zZyArPSBgJHtjb2xvcmVkRGlmZn1gO1xuICAgIH0gZWxzZSB7XG4gICAgICBtc2cgKz0gYCR7Y2hhbGsuZ3JleShcIm5vIGRpZmZlcmVuY2VcIil9YDtcbiAgICB9XG4gICAgY2xpLmxvZyhtc2cpO1xuICB9KTtcblxuICByZXR1cm47XG59XG5cbi8qKlxuICogUmV0dXJuIHRoZSB0cmltbWVkIGNvbXBhcmUgcmVzdWx0cyBpbiBKU09OIGZvcm1hdFxuICpcbiAqIFRoaXMgaXMgcHJvcG9nYXRlZCBhcyB0aGUgZGVmYXVsdCByZXR1cm4gYWxsIHRoZSB3YXkgdXAgdG8gdGhlIENvbXBhcmUgY29tbWFuZCBkaXJlY3RseVxuICogd2l0aG91dCB0aGUgbmVlZCBmb3IgdGhlIGxlZ2FjeSAtLWpzb24gZmxhZ1xuICpcbiAqIEBwYXJhbSBiZW5jaG1hcmtUYWJsZURhdGEgLSBJQ29tcGFyZUpTT05SZXN1bHRbXSBmcm9tIGluc3RhbnRpYXRlZCBUQlRhYmxlI2dldERhdGEoKSBmb3IgdGhlIHRvcCBsZXZlbCBkdXJhdGlvblxuICogQHBhcmFtIHBoYXNlVGFibGVEYXRhIC0gSUNvbXBhcmVKU09OUmVzdWx0W10gZnJvbSBpbnN0YW50aWF0ZWQgVEJUYWJsZSNnZXREYXRhKCkgZm9yIGFsbCBzdWIgcGhhc2VzIG9mIHRoZSB0b3AgbGV2ZWwgZHVyYXRpb25cbiAqIEBwYXJhbSBhcmVSZXN1bHRzU2lnbmlmaWNhbnQgLSBBIGN1bGxlZCBib29sZWFuIGlmIGFueSByZXN1bHRzIGFyZSBzaWduaWZpY2FudCB0aGlzIGlzIHRydXRoeVxuICogQHBhcmFtIGlzQmVsb3dSZWdyZXNzaW9uVGhyZXNob2xkIC0gQSBjdWxsZWQgYm9vbGVhbiB0byBjaGVjayBpZiBhbGwgcmVzdWx0cyBhcmUgYmVsb3cgdGhlIGNvbmZpZyByZWdyZXNzaW9uIHRocmVzaG9sZFxuICogQHJldHVybiBqc29uUmVzdWx0cyAtIEEgSlNPTi5zdHJpbmdpZmllZCByZXR1cm4gb2YgdGhlIHRyaW1tZWQgY29tcGFyZSByZXN1bHRzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBvdXRwdXRKU09OUmVzdWx0cyhcbiAgYmVuY2htYXJrVGFibGVEYXRhOiBJQ29tcGFyZUpTT05SZXN1bHRbXSxcbiAgcGhhc2VUYWJsZURhdGE6IElDb21wYXJlSlNPTlJlc3VsdFtdLFxuICBhcmVSZXN1bHRzU2lnbmlmaWNhbnQ6IGJvb2xlYW4sXG4gIGlzQmVsb3dSZWdyZXNzaW9uVGhyZXNob2xkOiBib29sZWFuXG4pOiBzdHJpbmcge1xuICBjb25zdCBqc29uUmVzdWx0czogSUNvbXBhcmVKU09OUmVzdWx0cyA9IHtcbiAgICBiZW5jaG1hcmtUYWJsZURhdGEsXG4gICAgcGhhc2VUYWJsZURhdGEsXG4gICAgYXJlUmVzdWx0c1NpZ25pZmljYW50LFxuICAgIGlzQmVsb3dSZWdyZXNzaW9uVGhyZXNob2xkLFxuICB9O1xuICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoanNvblJlc3VsdHMpO1xufVxuXG4vKipcbiAqIENvbGxlY3QgYW5kIGFuYWx5emUgdGhlIGRhdGEgZm9yIHRoZSBkaWZmZXJlbnQgcGhhc2VzIGZvciB0aGUgZXhwZXJpbWVudCBhbmQgY29udHJvbCBzZXQgYW5kIG91dHB1dCB0aGUgcmVzdWx0IHRvIHRoZSBjb25zb2xlLlxuICpcbiAqIEBwYXJhbSByZXN1bHRzIC0gVGhpcyBpcyBleHBlY3RlZCB0byBiZSBnZW5lcmF0ZWQgZnJvbSB0cmFjZXJiZW5jaCBjb3JlJ3MgcnVubmVyLiBDb250YWluaW5nIHRoZSBkYXRhc2V0IGZvciBleHBlcmltZW50IGFuZCBjb250cm9sXG4gKiBAcGFyYW0gZmxhZ3MgLSBUaGlzIGlzIGV4cGVjdGVkIHRvIGJlIENMSSBmbGFncyBmcm9tIHRoZSBcImNvbXBhcmVcIiBjb21tYW5kXG4gKiBAcGFyYW0gY2xpIC0gVGhpcyBpcyBleHBlY3RlZCB0byBiZSBhIFwiY29tcGFyZVwiIENvbW1hbmQgaW5zdGFuY2VcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxvZ0NvbXBhcmVSZXN1bHRzKFxuICByZXN1bHRzOiBJVHJhY2VyQmVuY2hUcmFjZVJlc3VsdFtdLFxuICBmbGFnczogQ29tcGFyZUFuYWx5emVGbGFncyxcbiAgY2xpOiBDb21tYW5kXG4pOiBQcm9taXNlPHN0cmluZz4ge1xuICBjb25zdCB7IGlzQ0lFbnYgfSA9IGZsYWdzO1xuICBsZXQgeyBmaWRlbGl0eSwgcmVncmVzc2lvblRocmVzaG9sZCB9ID0gZmxhZ3M7XG5cbiAgLy8gY2hlY2sgZm9yIGVnIDEwMG1zXG4gIGlmICh0eXBlb2YgcmVncmVzc2lvblRocmVzaG9sZCA9PT0gXCJzdHJpbmdcIikge1xuICAgIHJlZ3Jlc3Npb25UaHJlc2hvbGQgPSBwYXJzZUludChyZWdyZXNzaW9uVGhyZXNob2xkKTtcbiAgfVxuICAvLyBjaGVjayBmcm9tIGxvdy9tZWQvaGlnaFxuICBpZiAodHlwZW9mIGZpZGVsaXR5ID09PSBcInN0cmluZ1wiKSB7XG4gICAgZmlkZWxpdHkgPSBwYXJzZUludChmaWRlbGl0eSk7XG4gIH1cblxuICBjb25zdCBiZW5jaG1hcmtUYWJsZSA9IG5ldyBUQlRhYmxlKFwiSW5pdGlhbCBSZW5kZXJcIik7XG4gIGNvbnN0IHBoYXNlVGFibGUgPSBuZXcgVEJUYWJsZShcIlN1YiBQaGFzZSBvZiBEdXJhdGlvblwiKTtcblxuICBjb25zdCBjb250cm9sRGF0YSA9IHJlc3VsdHMuZmluZCgoZWxlbWVudCkgPT4ge1xuICAgIHJldHVybiBlbGVtZW50LnNldCA9PT0gXCJjb250cm9sXCI7XG4gIH0pIGFzIElUcmFjZXJCZW5jaFRyYWNlUmVzdWx0O1xuXG4gIGNvbnN0IGV4cGVyaW1lbnREYXRhID0gcmVzdWx0cy5maW5kKChlbGVtZW50KSA9PiB7XG4gICAgcmV0dXJuIGVsZW1lbnQuc2V0ID09PSBcImV4cGVyaW1lbnRcIjtcbiAgfSkgYXMgSVRyYWNlckJlbmNoVHJhY2VSZXN1bHQ7XG5cbiAgY29uc3QgdmFsdWVzQnlQaGFzZUNvbnRyb2wgPSBidWNrZXRQaGFzZVZhbHVlcyhjb250cm9sRGF0YS5zYW1wbGVzKTtcbiAgY29uc3QgdmFsdWVzQnlQaGFzZUV4cGVyaW1lbnQgPSBidWNrZXRQaGFzZVZhbHVlcyhleHBlcmltZW50RGF0YS5zYW1wbGVzKTtcblxuICBjb25zdCBzdWJQaGFzZXMgPSBPYmplY3Qua2V5cyh2YWx1ZXNCeVBoYXNlQ29udHJvbCkuZmlsdGVyKFxuICAgIChrKSA9PiBrICE9PSBQQUdFX0xPQURfVElNRVxuICApO1xuICBjb25zdCBwaGFzZVJlc3VsdHNGb3JtYXR0ZWQ6IEFycmF5PFBpY2s8XG4gICAgSFRNTFNlY3Rpb25SZW5kZXJEYXRhLFxuICAgIFwicGhhc2VcIiB8IFwiaGxEaWZmXCIgfCBcImlzU2lnbmlmaWNhbnRcIiB8IFwiY2lNaW5cIiB8IFwiY2lNYXhcIlxuICA+PiA9IFtdO1xuXG4gIGNvbnN0IGR1cmF0aW9uU3RhdHMgPSBuZXcgU3RhdHMoe1xuICAgIGNvbnRyb2w6IHZhbHVlc0J5UGhhc2VDb250cm9sLmR1cmF0aW9uLFxuICAgIGV4cGVyaW1lbnQ6IHZhbHVlc0J5UGhhc2VFeHBlcmltZW50LmR1cmF0aW9uLFxuICAgIG5hbWU6IFwiZHVyYXRpb25cIixcbiAgfSk7XG4gIGJlbmNobWFya1RhYmxlLmRpc3BsYXkucHVzaChkdXJhdGlvblN0YXRzKTtcbiAgcGhhc2VSZXN1bHRzRm9ybWF0dGVkLnB1c2goXG4gICAgZm9ybWF0UGhhc2VEYXRhKFxuICAgICAgdmFsdWVzQnlQaGFzZUNvbnRyb2xbUEFHRV9MT0FEX1RJTUVdLFxuICAgICAgdmFsdWVzQnlQaGFzZUV4cGVyaW1lbnRbUEFHRV9MT0FEX1RJTUVdLFxuICAgICAgUEFHRV9MT0FEX1RJTUVcbiAgICApXG4gICk7XG5cbiAgc3ViUGhhc2VzLmZvckVhY2goKHBoYXNlKSA9PiB7XG4gICAgcGhhc2VUYWJsZS5kaXNwbGF5LnB1c2goXG4gICAgICBuZXcgU3RhdHMoe1xuICAgICAgICBjb250cm9sOiB2YWx1ZXNCeVBoYXNlQ29udHJvbFtwaGFzZV0sXG4gICAgICAgIGV4cGVyaW1lbnQ6IHZhbHVlc0J5UGhhc2VFeHBlcmltZW50W3BoYXNlXSxcbiAgICAgICAgbmFtZTogcGhhc2UsXG4gICAgICB9KVxuICAgICk7XG4gICAgcGhhc2VSZXN1bHRzRm9ybWF0dGVkLnB1c2goXG4gICAgICBmb3JtYXRQaGFzZURhdGEoXG4gICAgICAgIHZhbHVlc0J5UGhhc2VDb250cm9sW3BoYXNlXSxcbiAgICAgICAgdmFsdWVzQnlQaGFzZUV4cGVyaW1lbnRbcGhhc2VdLFxuICAgICAgICBwaGFzZVxuICAgICAgKVxuICAgICk7XG4gIH0pO1xuXG4gIGxldCBpc0JlbG93UmVncmVzc2lvblRocmVzaG9sZCA9IHRydWU7XG5cbiAgY29uc3QgYmVuY2htYXJrVGFibGVEYXRhID0gYmVuY2htYXJrVGFibGUuZ2V0RGF0YSgpO1xuICBjb25zdCBwaGFzZVRhYmxlRGF0YSA9IHBoYXNlVGFibGUuZ2V0RGF0YSgpO1xuICBjb25zdCBhcmVSZXN1bHRzU2lnbmlmaWNhbnQgPSBhbnlSZXN1bHRzU2lnbmlmaWNhbnQoXG4gICAgZmlkZWxpdHksXG4gICAgYmVuY2htYXJrVGFibGUuaXNTaWdBcnJheSxcbiAgICBwaGFzZVRhYmxlLmlzU2lnQXJyYXlcbiAgKTtcbiAgaWYgKGFyZVJlc3VsdHNTaWduaWZpY2FudCkge1xuICAgIGlzQmVsb3dSZWdyZXNzaW9uVGhyZXNob2xkID0gYWxsQmVsb3dSZWdyZXNzaW9uVGhyZXNob2xkKFxuICAgICAgcmVncmVzc2lvblRocmVzaG9sZCxcbiAgICAgIGJlbmNobWFya1RhYmxlLmVzdGltYXRvckRlbHRhcyxcbiAgICAgIHBoYXNlVGFibGUuZXN0aW1hdG9yRGVsdGFzXG4gICAgKTtcbiAgfVxuXG4gIC8vIG9ubHkgbG9nIHRoZSB0YWJsZXMgd2hlbiBOT1QgaW4gYSBDSSBlbnZcbiAgaWYgKCFpc0NJRW52KSB7XG4gICAgY2xpLmxvZyhgXFxuXFxuJHtiZW5jaG1hcmtUYWJsZS5yZW5kZXIoKX1gKTtcbiAgICBjbGkubG9nKGBcXG5cXG4ke3BoYXNlVGFibGUucmVuZGVyKCl9YCk7XG4gIH1cblxuICBvdXRwdXRSdW5NZXRhTWVzc2FnZXNBbmRXYXJuaW5ncyhjbGksIGZsYWdzLCBpc0JlbG93UmVncmVzc2lvblRocmVzaG9sZCk7XG4gIG91dHB1dFN1bW1hcnlSZXBvcnQoY2xpLCBwaGFzZVJlc3VsdHNGb3JtYXR0ZWQpO1xuXG4gIHJldHVybiBvdXRwdXRKU09OUmVzdWx0cyhcbiAgICBiZW5jaG1hcmtUYWJsZURhdGEsXG4gICAgcGhhc2VUYWJsZURhdGEsXG4gICAgYXJlUmVzdWx0c1NpZ25pZmljYW50LFxuICAgIGlzQmVsb3dSZWdyZXNzaW9uVGhyZXNob2xkXG4gICk7XG59XG4iXX0=