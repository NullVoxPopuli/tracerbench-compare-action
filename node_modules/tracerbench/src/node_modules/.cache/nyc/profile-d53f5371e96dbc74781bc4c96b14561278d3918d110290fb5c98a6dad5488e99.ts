"use strict";function cov_1skb92i4ln(){var path="/Users/malynch/D/tracerbench/packages/cli/src/commands/profile.ts";var hash="7dcb595332bbcac88aa2d42a52625617183de4ba";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/malynch/D/tracerbench/packages/cli/src/commands/profile.ts",statementMap:{"0":{start:{line:2,column:0},end:{line:2,column:62}},"1":{start:{line:4,column:15},end:{line:4,column:43}},"2":{start:{line:5,column:19},end:{line:5,column:38}},"3":{start:{line:6,column:14},end:{line:6,column:30}},"4":{start:{line:7,column:15},end:{line:7,column:30}},"5":{start:{line:8,column:25},end:{line:8,column:53}},"6":{start:{line:9,column:15},end:{line:9,column:41}},"7":{start:{line:10,column:16},end:{line:10,column:43}},"8":{start:{line:11,column:16},end:{line:11,column:43}},"9":{start:{line:12,column:28},end:{line:255,column:4}},"10":{start:{line:15,column:12},end:{line:15,column:32}},"11":{start:{line:16,column:12},end:{line:16,column:28}},"12":{start:{line:19,column:36},end:{line:19,column:55}},"13":{start:{line:20,column:85},end:{line:20,column:90}},"14":{start:{line:21,column:32},end:{line:21,column:36}},"15":{start:{line:22,column:28},end:{line:29,column:13}},"16":{start:{line:30,column:31},end:{line:33,column:13}},"17":{start:{line:34,column:26},end:{line:106,column:14}},"18":{start:{line:39,column:24},end:{line:41,column:38}},"19":{start:{line:49,column:24},end:{line:56,column:25}},"20":{start:{line:50,column:28},end:{line:52,column:29}},"21":{start:{line:51,column:32},end:{line:51,column:70}},"22":{start:{line:55,column:28},end:{line:55,column:46}},"23":{start:{line:63,column:24},end:{line:63,column:89}},"24":{start:{line:64,column:24},end:{line:64,column:87}},"25":{start:{line:65,column:24},end:{line:65,column:106}},"26":{start:{line:67,column:24},end:{line:67,column:72}},"27":{start:{line:69,column:28},end:{line:75,column:29}},"28":{start:{line:70,column:44},end:{line:70,column:82}},"29":{start:{line:71,column:32},end:{line:71,column:43}},"30":{start:{line:74,column:32},end:{line:74,column:145}},"31":{start:{line:82,column:49},end:{line:82,column:52}},"32":{start:{line:83,column:24},end:{line:90,column:25}},"33":{start:{line:85,column:52},end:{line:85,column:117}},"34":{start:{line:86,column:28},end:{line:86,column:58}},"35":{start:{line:89,column:28},end:{line:89,column:51}},"36":{start:{line:96,column:48},end:{line:96,column:51}},"37":{start:{line:98,column:24},end:{line:103,column:25}},"38":{start:{line:99,column:28},end:{line:99,column:77}},"39":{start:{line:102,column:28},end:{line:102,column:51}},"40":{start:{line:107,column:12},end:{line:119,column:15}},"41":{start:{line:110,column:16},end:{line:110,column:39}},"42":{start:{line:114,column:16},end:{line:114,column:37}},"43":{start:{line:116,column:16},end:{line:116,column:38}},"44":{start:{line:118,column:16},end:{line:118,column:69}},"45":{start:{line:122,column:34},end:{line:122,column:35}},"46":{start:{line:123,column:31},end:{line:123,column:33}},"47":{start:{line:124,column:12},end:{line:136,column:15}},"48":{start:{line:125,column:35},end:{line:125,column:66}},"49":{start:{line:126,column:35},end:{line:126,column:54}},"50":{start:{line:128,column:28},end:{line:128,column:47}},"51":{start:{line:129,column:37},end:{line:129,column:53}},"52":{start:{line:130,column:16},end:{line:130,column:48}},"53":{start:{line:131,column:16},end:{line:135,column:19}},"54":{start:{line:137,column:12},end:{line:137,column:88}},"55":{start:{line:139,column:12},end:{line:145,column:15}},"56":{start:{line:141,column:16},end:{line:141,column:47}},"57":{start:{line:144,column:16},end:{line:144,column:46}},"58":{start:{line:148,column:35},end:{line:148,column:36}},"59":{start:{line:149,column:32},end:{line:149,column:34}},"60":{start:{line:150,column:12},end:{line:162,column:15}},"61":{start:{line:151,column:35},end:{line:151,column:73}},"62":{start:{line:152,column:35},end:{line:152,column:64}},"63":{start:{line:154,column:28},end:{line:154,column:57}},"64":{start:{line:155,column:37},end:{line:155,column:53}},"65":{start:{line:156,column:16},end:{line:156,column:49}},"66":{start:{line:157,column:16},end:{line:161,column:19}},"67":{start:{line:163,column:12},end:{line:163,column:90}},"68":{start:{line:165,column:12},end:{line:171,column:15}},"69":{start:{line:167,column:16},end:{line:167,column:47}},"70":{start:{line:170,column:16},end:{line:170,column:46}},"71":{start:{line:176,column:28},end:{line:176,column:30}},"72":{start:{line:177,column:31},end:{line:177,column:35}},"73":{start:{line:179,column:31},end:{line:179,column:33}},"74":{start:{line:180,column:12},end:{line:182,column:13}},"75":{start:{line:181,column:16},end:{line:181,column:114}},"76":{start:{line:183,column:12},end:{line:188,column:13}},"77":{start:{line:184,column:16},end:{line:184,column:88}},"78":{start:{line:187,column:16},end:{line:187,column:30}},"79":{start:{line:189,column:12},end:{line:194,column:13}},"80":{start:{line:190,column:16},end:{line:190,column:67}},"81":{start:{line:193,column:16},end:{line:193,column:30}},"82":{start:{line:195,column:12},end:{line:200,column:13}},"83":{start:{line:196,column:16},end:{line:196,column:60}},"84":{start:{line:199,column:16},end:{line:199,column:28}},"85":{start:{line:201,column:12},end:{line:203,column:13}},"86":{start:{line:202,column:16},end:{line:202,column:144}},"87":{start:{line:204,column:12},end:{line:219,column:15}},"88":{start:{line:205,column:35},end:{line:205,column:87}},"89":{start:{line:208,column:16},end:{line:218,column:17}},"90":{start:{line:209,column:20},end:{line:209,column:41}},"91":{start:{line:210,column:20},end:{line:210,column:76}},"92":{start:{line:212,column:21},end:{line:218,column:17}},"93":{start:{line:214,column:20},end:{line:216,column:21}},"94":{start:{line:215,column:24},end:{line:215,column:31}},"95":{start:{line:217,column:20},end:{line:217,column:76}},"96":{start:{line:220,column:12},end:{line:220,column:46}},"97":{start:{line:223,column:12},end:{line:229,column:14}},"98":{start:{line:232,column:34},end:{line:232,column:76}},"99":{start:{line:233,column:12},end:{line:233,column:87}},"100":{start:{line:234,column:12},end:{line:240,column:15}},"101":{start:{line:235,column:16},end:{line:239,column:20}},"102":{start:{line:244,column:4},end:{line:244,column:32}},"103":{start:{line:245,column:4},end:{line:245,column:80}},"104":{start:{line:246,column:4},end:{line:246,column:36}},"105":{start:{line:247,column:4},end:{line:253,column:6}},"106":{start:{line:254,column:4},end:{line:254,column:19}},"107":{start:{line:256,column:0},end:{line:256,column:26}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:12,column:29},end:{line:12,column:30}},loc:{start:{line:12,column:35},end:{line:255,column:1}},line:12},"1":{name:"(anonymous_1)",decl:{start:{line:14,column:8},end:{line:14,column:9}},loc:{start:{line:14,column:22},end:{line:17,column:9}},line:14},"2":{name:"(anonymous_2)",decl:{start:{line:18,column:8},end:{line:18,column:9}},loc:{start:{line:18,column:20},end:{line:120,column:9}},line:18},"3":{name:"(anonymous_3)",decl:{start:{line:37,column:26},end:{line:37,column:27}},loc:{start:{line:37,column:41},end:{line:42,column:21}},line:37},"4":{name:"(anonymous_4)",decl:{start:{line:46,column:26},end:{line:46,column:27}},loc:{start:{line:46,column:32},end:{line:57,column:21}},line:46},"5":{name:"(anonymous_5)",decl:{start:{line:61,column:26},end:{line:61,column:27}},loc:{start:{line:61,column:41},end:{line:77,column:21}},line:61},"6":{name:"getURLFromHAR",decl:{start:{line:68,column:33},end:{line:68,column:46}},loc:{start:{line:68,column:52},end:{line:76,column:25}},line:68},"7":{name:"(anonymous_7)",decl:{start:{line:81,column:26},end:{line:81,column:27}},loc:{start:{line:81,column:41},end:{line:91,column:21}},line:81},"8":{name:"(anonymous_8)",decl:{start:{line:95,column:26},end:{line:95,column:27}},loc:{start:{line:95,column:41},end:{line:104,column:21}},line:95},"9":{name:"(anonymous_9)",decl:{start:{line:109,column:23},end:{line:109,column:24}},loc:{start:{line:109,column:34},end:{line:111,column:13}},line:109},"10":{name:"(anonymous_10)",decl:{start:{line:112,column:22},end:{line:112,column:23}},loc:{start:{line:112,column:37},end:{line:119,column:13}},line:112},"11":{name:"(anonymous_11)",decl:{start:{line:121,column:8},end:{line:121,column:9}},loc:{start:{line:121,column:24},end:{line:146,column:9}},line:121},"12":{name:"(anonymous_12)",decl:{start:{line:125,column:24},end:{line:125,column:25}},loc:{start:{line:125,column:35},end:{line:125,column:66}},line:125},"13":{name:"(anonymous_13)",decl:{start:{line:126,column:24},end:{line:126,column:25}},loc:{start:{line:126,column:35},end:{line:126,column:54}},line:126},"14":{name:"(anonymous_14)",decl:{start:{line:127,column:25},end:{line:127,column:26}},loc:{start:{line:127,column:36},end:{line:136,column:13}},line:127},"15":{name:"(anonymous_15)",decl:{start:{line:140,column:22},end:{line:140,column:23}},loc:{start:{line:140,column:32},end:{line:142,column:13}},line:140},"16":{name:"(anonymous_16)",decl:{start:{line:143,column:25},end:{line:143,column:26}},loc:{start:{line:143,column:34},end:{line:145,column:13}},line:143},"17":{name:"(anonymous_17)",decl:{start:{line:147,column:8},end:{line:147,column:9}},loc:{start:{line:147,column:25},end:{line:172,column:9}},line:147},"18":{name:"(anonymous_18)",decl:{start:{line:151,column:24},end:{line:151,column:25}},loc:{start:{line:151,column:35},end:{line:151,column:73}},line:151},"19":{name:"(anonymous_19)",decl:{start:{line:152,column:24},end:{line:152,column:25}},loc:{start:{line:152,column:35},end:{line:152,column:64}},line:152},"20":{name:"(anonymous_20)",decl:{start:{line:153,column:25},end:{line:153,column:26}},loc:{start:{line:153,column:36},end:{line:162,column:13}},line:153},"21":{name:"(anonymous_21)",decl:{start:{line:166,column:22},end:{line:166,column:23}},loc:{start:{line:166,column:32},end:{line:168,column:13}},line:166},"22":{name:"(anonymous_22)",decl:{start:{line:169,column:25},end:{line:169,column:26}},loc:{start:{line:169,column:34},end:{line:171,column:13}},line:169},"23":{name:"(anonymous_23)",decl:{start:{line:174,column:8},end:{line:174,column:9}},loc:{start:{line:174,column:48},end:{line:221,column:9}},line:174},"24":{name:"(anonymous_24)",decl:{start:{line:205,column:24},end:{line:205,column:25}},loc:{start:{line:205,column:35},end:{line:205,column:87}},line:205},"25":{name:"(anonymous_25)",decl:{start:{line:207,column:25},end:{line:207,column:26}},loc:{start:{line:207,column:36},end:{line:219,column:13}},line:207},"26":{name:"(anonymous_26)",decl:{start:{line:222,column:8},end:{line:222,column:9}},loc:{start:{line:222,column:42},end:{line:230,column:9}},line:222},"27":{name:"(anonymous_27)",decl:{start:{line:231,column:8},end:{line:231,column:9}},loc:{start:{line:231,column:37},end:{line:241,column:9}},line:231},"28":{name:"(anonymous_28)",decl:{start:{line:234,column:31},end:{line:234,column:32}},loc:{start:{line:234,column:40},end:{line:240,column:13}},line:234}},branchMap:{"0":{loc:{start:{line:39,column:38},end:{line:41,column:37}},type:"cond-expr",locations:[{start:{line:40,column:30},end:{line:40,column:84}},{start:{line:41,column:30},end:{line:41,column:37}}],line:39},"1":{loc:{start:{line:50,column:28},end:{line:52,column:29}},type:"if",locations:[{start:{line:50,column:28},end:{line:52,column:29}},{start:{line:50,column:28},end:{line:52,column:29}}],line:50},"2":{loc:{start:{line:67,column:34},end:{line:67,column:71}},type:"cond-expr",locations:[{start:{line:67,column:47},end:{line:67,column:50}},{start:{line:67,column:53},end:{line:67,column:71}}],line:67},"3":{loc:{start:{line:180,column:12},end:{line:182,column:13}},type:"if",locations:[{start:{line:180,column:12},end:{line:182,column:13}},{start:{line:180,column:12},end:{line:182,column:13}}],line:180},"4":{loc:{start:{line:195,column:12},end:{line:200,column:13}},type:"if",locations:[{start:{line:195,column:12},end:{line:200,column:13}},{start:{line:195,column:12},end:{line:200,column:13}}],line:195},"5":{loc:{start:{line:201,column:12},end:{line:203,column:13}},type:"if",locations:[{start:{line:201,column:12},end:{line:203,column:13}},{start:{line:201,column:12},end:{line:203,column:13}}],line:201},"6":{loc:{start:{line:205,column:35},end:{line:205,column:87}},type:"binary-expr",locations:[{start:{line:205,column:35},end:{line:205,column:56}},{start:{line:205,column:60},end:{line:205,column:87}}],line:205},"7":{loc:{start:{line:208,column:16},end:{line:218,column:17}},type:"if",locations:[{start:{line:208,column:16},end:{line:218,column:17}},{start:{line:208,column:16},end:{line:218,column:17}}],line:208},"8":{loc:{start:{line:212,column:21},end:{line:218,column:17}},type:"if",locations:[{start:{line:212,column:21},end:{line:218,column:17}},{start:{line:212,column:21},end:{line:218,column:17}}],line:212},"9":{loc:{start:{line:212,column:25},end:{line:213,column:52}},type:"binary-expr",locations:[{start:{line:212,column:25},end:{line:212,column:58}},{start:{line:213,column:20},end:{line:213,column:52}}],line:212},"10":{loc:{start:{line:214,column:20},end:{line:216,column:21}},type:"if",locations:[{start:{line:214,column:20},end:{line:216,column:21}},{start:{line:214,column:20},end:{line:216,column:21}}],line:214}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0]},inputSourceMap:{version:3,file:"/Users/malynch/D/tracerbench/packages/cli/src/commands/profile.ts",sources:["/Users/malynch/D/tracerbench/packages/cli/src/commands/profile.ts"],names:[],mappings:"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",sourcesContent:["/* eslint-disable @typescript-eslint/no-explicit-any */\nimport {\n  IConditions,\n  ITraceEvent,\n  ITraceEventFrame,\n  liveTrace,\n} from \"@tracerbench/core\";\nimport { Archive } from \"@tracerbench/har\";\nimport Protocol from \"devtools-protocol\";\nimport { existsSync, mkdirSync, readJson, writeFileSync } from \"fs-extra\";\nimport * as listr from \"listr\";\nimport { join, resolve } from \"path\";\n\nimport { TBBaseCommand } from \"../command-config\";\nimport { harpath } from \"../helpers/args\";\nimport {\n  cookiespath,\n  cpuThrottleRate,\n  network,\n  tbResultsFolder,\n  url,\n} from \"../helpers/flags\";\nimport {\n  byTime,\n  convertToSentCase,\n  findFrame,\n  formatToDuration,\n  isCommitLoad,\n  isFrameMark,\n  isFrameNavigationStart,\n  isMark,\n  logBar,\n  logBarOptions,\n  logHeading,\n  setTraceEvents,\n} from \"../helpers/utils\";\n\ninterface ProfileContext {\n  cookies: Protocol.Network.CookieParam[];\n  harJSON: Archive;\n  traceJSONPath: string;\n  traceEvents: ITraceEventFrame[];\n  url: string;\n}\n\ntype markerLogMeta = {\n  name: string;\n  sentanceCaseName: string;\n  duration: number;\n  startTime: number;\n  bar: string;\n};\n\nexport default class Profile extends TBBaseCommand {\n  // include backwards compat to trace cmd\n  static aliases = [\"trace\"];\n  public trace: ITraceEventFrame[] = [];\n  public static description = `Parses a CPU profile with asset and marker timings.`;\n  public static args = [harpath];\n  public static flags = {\n    cpuThrottleRate: cpuThrottleRate({ required: true }),\n    tbResultsFolder: tbResultsFolder({ required: true }),\n    network: network(),\n    url: url({ required: true }),\n    cookiespath: cookiespath({ required: true }),\n  };\n\n  public async run(): Promise<void> {\n    const { flags, args } = this.parse(Profile);\n    const {\n      cpuThrottleRate,\n      cookiespath,\n      tbResultsFolder,\n      network,\n      url,\n    } = flags;\n    const { harpath } = args;\n    const cookies = [\n      {\n        name: \"\",\n        value: \"\",\n        domain: \"\",\n        path: \"\",\n      },\n    ];\n    const conditions: IConditions = {\n      cpu: cpuThrottleRate,\n      network,\n    };\n\n    const tasks = new listr([\n      {\n        title: \"Reading cookies json\",\n        task: async (ctx: ProfileContext) => {\n          // read cookies json file from path and set to context\n          ctx.cookies = cookiespath.length\n            ? await readJson(resolve(cookiespath))\n            : cookies;\n        },\n      },\n      {\n        title: \"Preparing results folder\",\n        task: () => {\n          // if the folder for the tracerbench results file\n          // does not exist then create it\n          try {\n            if (!existsSync(tbResultsFolder)) {\n              mkdirSync(tbResultsFolder);\n            }\n          } catch (error) {\n            this.error(error);\n          }\n        },\n      },\n      {\n        title: \"Validating & Cloning HAR file\",\n        task: async (ctx: ProfileContext) => {\n          // validate har and clone it to trace.json which will be mutated\n          ctx.harJSON = await readJson(resolve(harpath));\n          ctx.traceJSONPath = join(tbResultsFolder, \"trace.json\");\n          writeFileSync(\n            ctx.traceJSONPath,\n            JSON.stringify(ctx.harJSON, null, 2)\n          );\n          // if no url get url from har otherwise set with cmd url\n          ctx.url = url.length ? url : getURLFromHAR(ctx);\n\n          function getURLFromHAR(ctx: ProfileContext): string {\n            try {\n              const url = ctx.harJSON.log.entries[0].request.url;\n              return url;\n            } catch (error) {\n              throw new Error(\n                `${error}. Could not extract the URL from the HAR. Explicitly pass via \"--url\" flag and rerun.`\n              );\n            }\n          }\n        },\n      },\n      {\n        title: \"Recording the live trace\",\n        task: async (ctx: ProfileContext) => {\n          const { cookies, url } = ctx;\n          try {\n            // run the liveTrace\n            const { traceEvents } = await liveTrace(\n              url,\n              tbResultsFolder,\n              cookies,\n              conditions\n            );\n            ctx.traceEvents = traceEvents as ITraceEventFrame[];\n          } catch (error) {\n            this.error(`${error}`);\n          }\n        },\n      },\n      {\n        title: \"Setting trace events\",\n        task: async (ctx: ProfileContext) => {\n          const { traceEvents } = ctx;\n          // mutates this.trace\n          try {\n            this.trace = setTraceEvents(traceEvents);\n          } catch (error) {\n            this.error(`${error}`);\n          }\n        },\n      },\n    ]);\n\n    await tasks\n      .run()\n      .catch((error) => {\n        this.error(`${error}`);\n      })\n      .then(async (ctx) => {\n        // log js-eval-time\n        this.logJSEvalTime();\n        // log css-parse\n        this.logCSSEvalTime();\n        // log user timings\n        await this.markerTimings(ctx.traceJSONPath, ctx.url);\n      });\n  }\n\n  private logJSEvalTime(): void {\n    let totalJSDuration = 0;\n    const jsEvalLogs: logBarOptions[] = [];\n    this.trace\n      .filter((event: ITraceEvent) => event.name === \"EvaluateScript\")\n      .filter((event: any) => event.args.data.url)\n      .forEach((event: any) => {\n        const url = event.args.data.url;\n        const durationInMs = event.dur / 1000;\n        totalJSDuration += durationInMs;\n        jsEvalLogs.push({\n          totalDuration: totalJSDuration,\n          duration: durationInMs,\n          title: url,\n        });\n      });\n\n    logHeading(`JS Evaluation :: Total Duration ${totalJSDuration} ms`);\n\n    // log js-eval-time\n    jsEvalLogs\n      .sort((a, b) => {\n        return a.duration - b.duration;\n      })\n      .forEach((log) => {\n        this.log(logBar(log));\n      });\n  }\n\n  private logCSSEvalTime(): void {\n    let totalCSSDuration = 0;\n    const cssEvalLogs: logBarOptions[] = [];\n\n    this.trace\n      .filter((event: ITraceEvent) => event.name === \"ParseAuthorStyleSheet\")\n      .filter((event: any) => event.args.data.styleSheetUrl)\n      .forEach((event: any) => {\n        const url = event.args.data.styleSheetUrl;\n        const durationInMs = event.dur / 1000;\n        totalCSSDuration += durationInMs;\n        cssEvalLogs.push({\n          totalDuration: totalCSSDuration,\n          duration: durationInMs,\n          title: url,\n        });\n      });\n\n    logHeading(`CSS Evaluation :: Total Duration ${totalCSSDuration} ms`);\n\n    // log css-parse-time\n    cssEvalLogs\n      .sort((a, b) => {\n        return a.duration - b.duration;\n      })\n      .forEach((log) => {\n        this.log(logBar(log));\n      });\n  }\n\n  // tracerbench marker-timings cmd moved here\n  private async markerTimings(\n    traceJSONPath: string,\n    url: string\n  ): Promise<void> {\n    let frame: string;\n    let startTime = -1;\n    let rawTraceData: any = null;\n    let customTrace: ITraceEventFrame[];\n    const markerLogs: markerLogMeta[] = [];\n\n    if (!url) {\n      this.error(\n        `Could not extract the URL from the HAR. Explicitly pass via \"--url\" flag and rerun.`\n      );\n    }\n\n    try {\n      rawTraceData = await readJson(resolve(traceJSONPath));\n    } catch (e) {\n      this.error(e);\n    }\n\n    try {\n      customTrace = setTraceEvents(rawTraceData);\n    } catch (e) {\n      this.error(e);\n    }\n\n    if (url.startsWith(\"http\")) {\n      frame = findFrame(customTrace, url);\n    } else {\n      frame = url;\n    }\n\n    if (!frame) {\n      this.error(\n        `Could not extract frame from trace. Explicitly opt-out of usertimings via \"--usertimings\" boolean flag and rerun.`\n      );\n    }\n\n    customTrace\n      .filter((event: ITraceEventFrame) => isMark(event) || isCommitLoad(event))\n      .sort(byTime)\n      .forEach((event: ITraceEventFrame) => {\n        if (isFrameNavigationStart(frame, event, url)) {\n          startTime = event.ts;\n          markerLogs.push(this.buildMarkerLogs(event, startTime));\n        } else if (\n          isFrameMark(frame, event) &&\n          event.name !== \"navigationStart\"\n        ) {\n          if (startTime === -1) {\n            return;\n          }\n          markerLogs.push(this.buildMarkerLogs(event, startTime));\n        }\n      });\n\n    this.logMarkerTimings(markerLogs);\n  }\n\n  private buildMarkerLogs(\n    event: ITraceEventFrame,\n    startTime: number\n  ): markerLogMeta {\n    return {\n      name: event.name,\n      sentanceCaseName: convertToSentCase(event.name),\n      duration: formatToDuration(event.ts, startTime),\n      startTime,\n      bar: \"\",\n    };\n  }\n\n  private logMarkerTimings(markerLogs: markerLogMeta[]): void {\n    const totalDuration = markerLogs[markerLogs.length - 1].duration;\n\n    logHeading(`Marker Timings :: Total Duration ${totalDuration} ms`);\n    markerLogs.forEach((log) => {\n      this.log(\n        logBar({\n          totalDuration,\n          duration: log.duration,\n          title: log.sentanceCaseName,\n        })\n      );\n    });\n  }\n}\n"]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"7dcb595332bbcac88aa2d42a52625617183de4ba"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];cov_1skb92i4ln=function(){return actualCoverage;};return actualCoverage;}cov_1skb92i4ln().s[0]++;Object.defineProperty(exports,"__esModule",{value:true});/* eslint-disable @typescript-eslint/no-explicit-any */const core_1=(cov_1skb92i4ln().s[1]++,require("@tracerbench/core"));const fs_extra_1=(cov_1skb92i4ln().s[2]++,require("fs-extra"));const listr=(cov_1skb92i4ln().s[3]++,require("listr"));const path_1=(cov_1skb92i4ln().s[4]++,require("path"));const command_config_1=(cov_1skb92i4ln().s[5]++,require("../command-config"));const args_1=(cov_1skb92i4ln().s[6]++,require("../helpers/args"));const flags_1=(cov_1skb92i4ln().s[7]++,require("../helpers/flags"));const utils_1=(cov_1skb92i4ln().s[8]++,require("../helpers/utils"));let Profile=(/** @class */cov_1skb92i4ln().s[9]++,(()=>{cov_1skb92i4ln().f[0]++;class Profile extends(command_config_1.TBBaseCommand){constructor(){cov_1skb92i4ln().f[1]++;cov_1skb92i4ln().s[10]++;super(...arguments);cov_1skb92i4ln().s[11]++;this.trace=[];}async run(){cov_1skb92i4ln().f[2]++;const{flags,args}=(cov_1skb92i4ln().s[12]++,this.parse(Profile));const{cpuThrottleRate,cookiespath,tbResultsFolder,network,url}=(cov_1skb92i4ln().s[13]++,flags);const{harpath}=(cov_1skb92i4ln().s[14]++,args);const cookies=(cov_1skb92i4ln().s[15]++,[{name:"",value:"",domain:"",path:""}]);const conditions=(cov_1skb92i4ln().s[16]++,{cpu:cpuThrottleRate,network});const tasks=(cov_1skb92i4ln().s[17]++,new listr([{title:"Reading cookies json",task:async ctx=>{cov_1skb92i4ln().f[3]++;cov_1skb92i4ln().s[18]++;// read cookies json file from path and set to context
ctx.cookies=cookiespath.length?(cov_1skb92i4ln().b[0][0]++,await fs_extra_1.readJson(path_1.resolve(cookiespath))):(cov_1skb92i4ln().b[0][1]++,cookies);}},{title:"Preparing results folder",task:()=>{cov_1skb92i4ln().f[4]++;cov_1skb92i4ln().s[19]++;// if the folder for the tracerbench results file
// does not exist then create it
try{cov_1skb92i4ln().s[20]++;if(!fs_extra_1.existsSync(tbResultsFolder)){cov_1skb92i4ln().b[1][0]++;cov_1skb92i4ln().s[21]++;fs_extra_1.mkdirSync(tbResultsFolder);}else{cov_1skb92i4ln().b[1][1]++;}}catch(error){cov_1skb92i4ln().s[22]++;this.error(error);}}},{title:"Validating & Cloning HAR file",task:async ctx=>{cov_1skb92i4ln().f[5]++;cov_1skb92i4ln().s[23]++;// validate har and clone it to trace.json which will be mutated
ctx.harJSON=await fs_extra_1.readJson(path_1.resolve(harpath));cov_1skb92i4ln().s[24]++;ctx.traceJSONPath=path_1.join(tbResultsFolder,"trace.json");cov_1skb92i4ln().s[25]++;fs_extra_1.writeFileSync(ctx.traceJSONPath,JSON.stringify(ctx.harJSON,null,2));// if no url get url from har otherwise set with cmd url
cov_1skb92i4ln().s[26]++;ctx.url=url.length?(cov_1skb92i4ln().b[2][0]++,url):(cov_1skb92i4ln().b[2][1]++,getURLFromHAR(ctx));function getURLFromHAR(ctx){cov_1skb92i4ln().f[6]++;cov_1skb92i4ln().s[27]++;try{const url=(cov_1skb92i4ln().s[28]++,ctx.harJSON.log.entries[0].request.url);cov_1skb92i4ln().s[29]++;return url;}catch(error){cov_1skb92i4ln().s[30]++;throw new Error(`${error}. Could not extract the URL from the HAR. Explicitly pass via "--url" flag and rerun.`);}}}},{title:"Recording the live trace",task:async ctx=>{cov_1skb92i4ln().f[7]++;const{cookies,url}=(cov_1skb92i4ln().s[31]++,ctx);cov_1skb92i4ln().s[32]++;try{// run the liveTrace
const{traceEvents}=(cov_1skb92i4ln().s[33]++,await core_1.liveTrace(url,tbResultsFolder,cookies,conditions));cov_1skb92i4ln().s[34]++;ctx.traceEvents=traceEvents;}catch(error){cov_1skb92i4ln().s[35]++;this.error(`${error}`);}}},{title:"Setting trace events",task:async ctx=>{cov_1skb92i4ln().f[8]++;const{traceEvents}=(cov_1skb92i4ln().s[36]++,ctx);// mutates this.trace
cov_1skb92i4ln().s[37]++;try{cov_1skb92i4ln().s[38]++;this.trace=utils_1.setTraceEvents(traceEvents);}catch(error){cov_1skb92i4ln().s[39]++;this.error(`${error}`);}}}]));cov_1skb92i4ln().s[40]++;await tasks.run().catch(error=>{cov_1skb92i4ln().f[9]++;cov_1skb92i4ln().s[41]++;this.error(`${error}`);}).then(async ctx=>{cov_1skb92i4ln().f[10]++;cov_1skb92i4ln().s[42]++;// log js-eval-time
this.logJSEvalTime();// log css-parse
cov_1skb92i4ln().s[43]++;this.logCSSEvalTime();// log user timings
cov_1skb92i4ln().s[44]++;await this.markerTimings(ctx.traceJSONPath,ctx.url);});}logJSEvalTime(){cov_1skb92i4ln().f[11]++;let totalJSDuration=(cov_1skb92i4ln().s[45]++,0);const jsEvalLogs=(cov_1skb92i4ln().s[46]++,[]);cov_1skb92i4ln().s[47]++;this.trace.filter(event=>{cov_1skb92i4ln().f[12]++;cov_1skb92i4ln().s[48]++;return event.name==="EvaluateScript";}).filter(event=>{cov_1skb92i4ln().f[13]++;cov_1skb92i4ln().s[49]++;return event.args.data.url;}).forEach(event=>{cov_1skb92i4ln().f[14]++;const url=(cov_1skb92i4ln().s[50]++,event.args.data.url);const durationInMs=(cov_1skb92i4ln().s[51]++,event.dur/1000);cov_1skb92i4ln().s[52]++;totalJSDuration+=durationInMs;cov_1skb92i4ln().s[53]++;jsEvalLogs.push({totalDuration:totalJSDuration,duration:durationInMs,title:url});});cov_1skb92i4ln().s[54]++;utils_1.logHeading(`JS Evaluation :: Total Duration ${totalJSDuration} ms`);// log js-eval-time
cov_1skb92i4ln().s[55]++;jsEvalLogs.sort((a,b)=>{cov_1skb92i4ln().f[15]++;cov_1skb92i4ln().s[56]++;return a.duration-b.duration;}).forEach(log=>{cov_1skb92i4ln().f[16]++;cov_1skb92i4ln().s[57]++;this.log(utils_1.logBar(log));});}logCSSEvalTime(){cov_1skb92i4ln().f[17]++;let totalCSSDuration=(cov_1skb92i4ln().s[58]++,0);const cssEvalLogs=(cov_1skb92i4ln().s[59]++,[]);cov_1skb92i4ln().s[60]++;this.trace.filter(event=>{cov_1skb92i4ln().f[18]++;cov_1skb92i4ln().s[61]++;return event.name==="ParseAuthorStyleSheet";}).filter(event=>{cov_1skb92i4ln().f[19]++;cov_1skb92i4ln().s[62]++;return event.args.data.styleSheetUrl;}).forEach(event=>{cov_1skb92i4ln().f[20]++;const url=(cov_1skb92i4ln().s[63]++,event.args.data.styleSheetUrl);const durationInMs=(cov_1skb92i4ln().s[64]++,event.dur/1000);cov_1skb92i4ln().s[65]++;totalCSSDuration+=durationInMs;cov_1skb92i4ln().s[66]++;cssEvalLogs.push({totalDuration:totalCSSDuration,duration:durationInMs,title:url});});cov_1skb92i4ln().s[67]++;utils_1.logHeading(`CSS Evaluation :: Total Duration ${totalCSSDuration} ms`);// log css-parse-time
cov_1skb92i4ln().s[68]++;cssEvalLogs.sort((a,b)=>{cov_1skb92i4ln().f[21]++;cov_1skb92i4ln().s[69]++;return a.duration-b.duration;}).forEach(log=>{cov_1skb92i4ln().f[22]++;cov_1skb92i4ln().s[70]++;this.log(utils_1.logBar(log));});}// tracerbench marker-timings cmd moved here
async markerTimings(traceJSONPath,url){cov_1skb92i4ln().f[23]++;let frame;let startTime=(cov_1skb92i4ln().s[71]++,-1);let rawTraceData=(cov_1skb92i4ln().s[72]++,null);let customTrace;const markerLogs=(cov_1skb92i4ln().s[73]++,[]);cov_1skb92i4ln().s[74]++;if(!url){cov_1skb92i4ln().b[3][0]++;cov_1skb92i4ln().s[75]++;this.error(`Could not extract the URL from the HAR. Explicitly pass via "--url" flag and rerun.`);}else{cov_1skb92i4ln().b[3][1]++;}cov_1skb92i4ln().s[76]++;try{cov_1skb92i4ln().s[77]++;rawTraceData=await fs_extra_1.readJson(path_1.resolve(traceJSONPath));}catch(e){cov_1skb92i4ln().s[78]++;this.error(e);}cov_1skb92i4ln().s[79]++;try{cov_1skb92i4ln().s[80]++;customTrace=utils_1.setTraceEvents(rawTraceData);}catch(e){cov_1skb92i4ln().s[81]++;this.error(e);}cov_1skb92i4ln().s[82]++;if(url.startsWith("http")){cov_1skb92i4ln().b[4][0]++;cov_1skb92i4ln().s[83]++;frame=utils_1.findFrame(customTrace,url);}else{cov_1skb92i4ln().b[4][1]++;cov_1skb92i4ln().s[84]++;frame=url;}cov_1skb92i4ln().s[85]++;if(!frame){cov_1skb92i4ln().b[5][0]++;cov_1skb92i4ln().s[86]++;this.error(`Could not extract frame from trace. Explicitly opt-out of usertimings via "--usertimings" boolean flag and rerun.`);}else{cov_1skb92i4ln().b[5][1]++;}cov_1skb92i4ln().s[87]++;customTrace.filter(event=>{cov_1skb92i4ln().f[24]++;cov_1skb92i4ln().s[88]++;return(cov_1skb92i4ln().b[6][0]++,utils_1.isMark(event))||(cov_1skb92i4ln().b[6][1]++,utils_1.isCommitLoad(event));}).sort(utils_1.byTime).forEach(event=>{cov_1skb92i4ln().f[25]++;cov_1skb92i4ln().s[89]++;if(utils_1.isFrameNavigationStart(frame,event,url)){cov_1skb92i4ln().b[7][0]++;cov_1skb92i4ln().s[90]++;startTime=event.ts;cov_1skb92i4ln().s[91]++;markerLogs.push(this.buildMarkerLogs(event,startTime));}else{cov_1skb92i4ln().b[7][1]++;cov_1skb92i4ln().s[92]++;if((cov_1skb92i4ln().b[9][0]++,utils_1.isFrameMark(frame,event))&&(cov_1skb92i4ln().b[9][1]++,event.name!=="navigationStart")){cov_1skb92i4ln().b[8][0]++;cov_1skb92i4ln().s[93]++;if(startTime===-1){cov_1skb92i4ln().b[10][0]++;cov_1skb92i4ln().s[94]++;return;}else{cov_1skb92i4ln().b[10][1]++;}cov_1skb92i4ln().s[95]++;markerLogs.push(this.buildMarkerLogs(event,startTime));}else{cov_1skb92i4ln().b[8][1]++;}}});cov_1skb92i4ln().s[96]++;this.logMarkerTimings(markerLogs);}buildMarkerLogs(event,startTime){cov_1skb92i4ln().f[26]++;cov_1skb92i4ln().s[97]++;return{name:event.name,sentanceCaseName:utils_1.convertToSentCase(event.name),duration:utils_1.formatToDuration(event.ts,startTime),startTime,bar:""};}logMarkerTimings(markerLogs){cov_1skb92i4ln().f[27]++;const totalDuration=(cov_1skb92i4ln().s[98]++,markerLogs[markerLogs.length-1].duration);cov_1skb92i4ln().s[99]++;utils_1.logHeading(`Marker Timings :: Total Duration ${totalDuration} ms`);cov_1skb92i4ln().s[100]++;markerLogs.forEach(log=>{cov_1skb92i4ln().f[28]++;cov_1skb92i4ln().s[101]++;this.log(utils_1.logBar({totalDuration,duration:log.duration,title:log.sentanceCaseName}));});}}// include backwards compat to trace cmd
cov_1skb92i4ln().s[102]++;Profile.aliases=["trace"];cov_1skb92i4ln().s[103]++;Profile.description=`Parses a CPU profile with asset and marker timings.`;cov_1skb92i4ln().s[104]++;Profile.args=[args_1.harpath];cov_1skb92i4ln().s[105]++;Profile.flags={cpuThrottleRate:flags_1.cpuThrottleRate({required:true}),tbResultsFolder:flags_1.tbResultsFolder({required:true}),network:flags_1.network(),url:flags_1.url({required:true}),cookiespath:flags_1.cookiespath({required:true})};cov_1skb92i4ln().s[106]++;return Profile;})());cov_1skb92i4ln().s[107]++;exports.default=Profile;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL21hbHluY2gvRC90cmFjZXJiZW5jaC9wYWNrYWdlcy9jbGkvc3JjL2NvbW1hbmRzL3Byb2ZpbGUudHMiLCJzb3VyY2VzIjpbIi9Vc2Vycy9tYWx5bmNoL0QvdHJhY2VyYmVuY2gvcGFja2FnZXMvY2xpL3NyYy9jb21tYW5kcy9wcm9maWxlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsdURBQXVEO0FBQ3ZELDRDQUsyQjtBQUczQix1Q0FBMEU7QUFDMUUsK0JBQStCO0FBQy9CLCtCQUFxQztBQUVyQyxzREFBa0Q7QUFDbEQsMENBQTBDO0FBQzFDLDRDQU0wQjtBQUMxQiw0Q0FhMEI7QUFrQjFCO0lBQUEsTUFBcUIsT0FBUSxTQUFRLDhCQUFhO1FBQWxEOztZQUdTLFVBQUssR0FBdUIsRUFBRSxDQUFDO1FBc1J4QyxDQUFDO1FBM1FRLEtBQUssQ0FBQyxHQUFHO1lBQ2QsTUFBTSxFQUFFLEtBQUssRUFBRSxJQUFJLEVBQUUsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1lBQzVDLE1BQU0sRUFDSixlQUFlLEVBQ2YsV0FBVyxFQUNYLGVBQWUsRUFDZixPQUFPLEVBQ1AsR0FBRyxHQUNKLEdBQUcsS0FBSyxDQUFDO1lBQ1YsTUFBTSxFQUFFLE9BQU8sRUFBRSxHQUFHLElBQUksQ0FBQztZQUN6QixNQUFNLE9BQU8sR0FBRztnQkFDZDtvQkFDRSxJQUFJLEVBQUUsRUFBRTtvQkFDUixLQUFLLEVBQUUsRUFBRTtvQkFDVCxNQUFNLEVBQUUsRUFBRTtvQkFDVixJQUFJLEVBQUUsRUFBRTtpQkFDVDthQUNGLENBQUM7WUFDRixNQUFNLFVBQVUsR0FBZ0I7Z0JBQzlCLEdBQUcsRUFBRSxlQUFlO2dCQUNwQixPQUFPO2FBQ1IsQ0FBQztZQUVGLE1BQU0sS0FBSyxHQUFHLElBQUksS0FBSyxDQUFDO2dCQUN0QjtvQkFDRSxLQUFLLEVBQUUsc0JBQXNCO29CQUM3QixJQUFJLEVBQUUsS0FBSyxFQUFFLEdBQW1CLEVBQUUs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QUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsQ0FBQztLQUM3QyxDQUFDO0lBNlFKLGNBQUM7S0FBQTtrQkF6Um9CLE9BQU8iLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55ICovXG5pbXBvcnQge1xuICBJQ29uZGl0aW9ucyxcbiAgSVRyYWNlRXZlbnQsXG4gIElUcmFjZUV2ZW50RnJhbWUsXG4gIGxpdmVUcmFjZSxcbn0gZnJvbSBcIkB0cmFjZXJiZW5jaC9jb3JlXCI7XG5pbXBvcnQgeyBBcmNoaXZlIH0gZnJvbSBcIkB0cmFjZXJiZW5jaC9oYXJcIjtcbmltcG9ydCBQcm90b2NvbCBmcm9tIFwiZGV2dG9vbHMtcHJvdG9jb2xcIjtcbmltcG9ydCB7IGV4aXN0c1N5bmMsIG1rZGlyU3luYywgcmVhZEpzb24sIHdyaXRlRmlsZVN5bmMgfSBmcm9tIFwiZnMtZXh0cmFcIjtcbmltcG9ydCAqIGFzIGxpc3RyIGZyb20gXCJsaXN0clwiO1xuaW1wb3J0IHsgam9pbiwgcmVzb2x2ZSB9IGZyb20gXCJwYXRoXCI7XG5cbmltcG9ydCB7IFRCQmFzZUNvbW1hbmQgfSBmcm9tIFwiLi4vY29tbWFuZC1jb25maWdcIjtcbmltcG9ydCB7IGhhcnBhdGggfSBmcm9tIFwiLi4vaGVscGVycy9hcmdzXCI7XG5pbXBvcnQge1xuICBjb29raWVzcGF0aCxcbiAgY3B1VGhyb3R0bGVSYXRlLFxuICBuZXR3b3JrLFxuICB0YlJlc3VsdHNGb2xkZXIsXG4gIHVybCxcbn0gZnJvbSBcIi4uL2hlbHBlcnMvZmxhZ3NcIjtcbmltcG9ydCB7XG4gIGJ5VGltZSxcbiAgY29udmVydFRvU2VudENhc2UsXG4gIGZpbmRGcmFtZSxcbiAgZm9ybWF0VG9EdXJhdGlvbixcbiAgaXNDb21taXRMb2FkLFxuICBpc0ZyYW1lTWFyayxcbiAgaXNGcmFtZU5hdmlnYXRpb25TdGFydCxcbiAgaXNNYXJrLFxuICBsb2dCYXIsXG4gIGxvZ0Jhck9wdGlvbnMsXG4gIGxvZ0hlYWRpbmcsXG4gIHNldFRyYWNlRXZlbnRzLFxufSBmcm9tIFwiLi4vaGVscGVycy91dGlsc1wiO1xuXG5pbnRlcmZhY2UgUHJvZmlsZUNvbnRleHQge1xuICBjb29raWVzOiBQcm90b2NvbC5OZXR3b3JrLkNvb2tpZVBhcmFtW107XG4gIGhhckpTT046IEFyY2hpdmU7XG4gIHRyYWNlSlNPTlBhdGg6IHN0cmluZztcbiAgdHJhY2VFdmVudHM6IElUcmFjZUV2ZW50RnJhbWVbXTtcbiAgdXJsOiBzdHJpbmc7XG59XG5cbnR5cGUgbWFya2VyTG9nTWV0YSA9IHtcbiAgbmFtZTogc3RyaW5nO1xuICBzZW50YW5jZUNhc2VOYW1lOiBzdHJpbmc7XG4gIGR1cmF0aW9uOiBudW1iZXI7XG4gIHN0YXJ0VGltZTogbnVtYmVyO1xuICBiYXI6IHN0cmluZztcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFByb2ZpbGUgZXh0ZW5kcyBUQkJhc2VDb21tYW5kIHtcbiAgLy8gaW5jbHVkZSBiYWNrd2FyZHMgY29tcGF0IHRvIHRyYWNlIGNtZFxuICBzdGF0aWMgYWxpYXNlcyA9IFtcInRyYWNlXCJdO1xuICBwdWJsaWMgdHJhY2U6IElUcmFjZUV2ZW50RnJhbWVbXSA9IFtdO1xuICBwdWJsaWMgc3RhdGljIGRlc2NyaXB0aW9uID0gYFBhcnNlcyBhIENQVSBwcm9maWxlIHdpdGggYXNzZXQgYW5kIG1hcmtlciB0aW1pbmdzLmA7XG4gIHB1YmxpYyBzdGF0aWMgYXJncyA9IFtoYXJwYXRoXTtcbiAgcHVibGljIHN0YXRpYyBmbGFncyA9IHtcbiAgICBjcHVUaHJvdHRsZVJhdGU6IGNwdVRocm90dGxlUmF0ZSh7IHJlcXVpcmVkOiB0cnVlIH0pLFxuICAgIHRiUmVzdWx0c0ZvbGRlcjogdGJSZXN1bHRzRm9sZGVyKHsgcmVxdWlyZWQ6IHRydWUgfSksXG4gICAgbmV0d29yazogbmV0d29yaygpLFxuICAgIHVybDogdXJsKHsgcmVxdWlyZWQ6IHRydWUgfSksXG4gICAgY29va2llc3BhdGg6IGNvb2tpZXNwYXRoKHsgcmVxdWlyZWQ6IHRydWUgfSksXG4gIH07XG5cbiAgcHVibGljIGFzeW5jIHJ1bigpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCB7IGZsYWdzLCBhcmdzIH0gPSB0aGlzLnBhcnNlKFByb2ZpbGUpO1xuICAgIGNvbnN0IHtcbiAgICAgIGNwdVRocm90dGxlUmF0ZSxcbiAgICAgIGNvb2tpZXNwYXRoLFxuICAgICAgdGJSZXN1bHRzRm9sZGVyLFxuICAgICAgbmV0d29yayxcbiAgICAgIHVybCxcbiAgICB9ID0gZmxhZ3M7XG4gICAgY29uc3QgeyBoYXJwYXRoIH0gPSBhcmdzO1xuICAgIGNvbnN0IGNvb2tpZXMgPSBbXG4gICAgICB7XG4gICAgICAgIG5hbWU6IFwiXCIsXG4gICAgICAgIHZhbHVlOiBcIlwiLFxuICAgICAgICBkb21haW46IFwiXCIsXG4gICAgICAgIHBhdGg6IFwiXCIsXG4gICAgICB9LFxuICAgIF07XG4gICAgY29uc3QgY29uZGl0aW9uczogSUNvbmRpdGlvbnMgPSB7XG4gICAgICBjcHU6IGNwdVRocm90dGxlUmF0ZSxcbiAgICAgIG5ldHdvcmssXG4gICAgfTtcblxuICAgIGNvbnN0IHRhc2tzID0gbmV3IGxpc3RyKFtcbiAgICAgIHtcbiAgICAgICAgdGl0bGU6IFwiUmVhZGluZyBjb29raWVzIGpzb25cIixcbiAgICAgICAgdGFzazogYXN5bmMgKGN0eDogUHJvZmlsZUNvbnRleHQpID0+IHtcbiAgICAgICAgICAvLyByZWFkIGNvb2tpZXMganNvbiBmaWxlIGZyb20gcGF0aCBhbmQgc2V0IHRvIGNvbnRleHRcbiAgICAgICAgICBjdHguY29va2llcyA9IGNvb2tpZXNwYXRoLmxlbmd0aFxuICAgICAgICAgICAgPyBhd2FpdCByZWFkSnNvbihyZXNvbHZlKGNvb2tpZXNwYXRoKSlcbiAgICAgICAgICAgIDogY29va2llcztcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHRpdGxlOiBcIlByZXBhcmluZyByZXN1bHRzIGZvbGRlclwiLFxuICAgICAgICB0YXNrOiAoKSA9PiB7XG4gICAgICAgICAgLy8gaWYgdGhlIGZvbGRlciBmb3IgdGhlIHRyYWNlcmJlbmNoIHJlc3VsdHMgZmlsZVxuICAgICAgICAgIC8vIGRvZXMgbm90IGV4aXN0IHRoZW4gY3JlYXRlIGl0XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmICghZXhpc3RzU3luYyh0YlJlc3VsdHNGb2xkZXIpKSB7XG4gICAgICAgICAgICAgIG1rZGlyU3luYyh0YlJlc3VsdHNGb2xkZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLmVycm9yKGVycm9yKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICB0aXRsZTogXCJWYWxpZGF0aW5nICYgQ2xvbmluZyBIQVIgZmlsZVwiLFxuICAgICAgICB0YXNrOiBhc3luYyAoY3R4OiBQcm9maWxlQ29udGV4dCkgPT4ge1xuICAgICAgICAgIC8vIHZhbGlkYXRlIGhhciBhbmQgY2xvbmUgaXQgdG8gdHJhY2UuanNvbiB3aGljaCB3aWxsIGJlIG11dGF0ZWRcbiAgICAgICAgICBjdHguaGFySlNPTiA9IGF3YWl0IHJlYWRKc29uKHJlc29sdmUoaGFycGF0aCkpO1xuICAgICAgICAgIGN0eC50cmFjZUpTT05QYXRoID0gam9pbih0YlJlc3VsdHNGb2xkZXIsIFwidHJhY2UuanNvblwiKTtcbiAgICAgICAgICB3cml0ZUZpbGVTeW5jKFxuICAgICAgICAgICAgY3R4LnRyYWNlSlNPTlBhdGgsXG4gICAgICAgICAgICBKU09OLnN0cmluZ2lmeShjdHguaGFySlNPTiwgbnVsbCwgMilcbiAgICAgICAgICApO1xuICAgICAgICAgIC8vIGlmIG5vIHVybCBnZXQgdXJsIGZyb20gaGFyIG90aGVyd2lzZSBzZXQgd2l0aCBjbWQgdXJsXG4gICAgICAgICAgY3R4LnVybCA9IHVybC5sZW5ndGggPyB1cmwgOiBnZXRVUkxGcm9tSEFSKGN0eCk7XG5cbiAgICAgICAgICBmdW5jdGlvbiBnZXRVUkxGcm9tSEFSKGN0eDogUHJvZmlsZUNvbnRleHQpOiBzdHJpbmcge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgY29uc3QgdXJsID0gY3R4LmhhckpTT04ubG9nLmVudHJpZXNbMF0ucmVxdWVzdC51cmw7XG4gICAgICAgICAgICAgIHJldHVybiB1cmw7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICAgICAgYCR7ZXJyb3J9LiBDb3VsZCBub3QgZXh0cmFjdCB0aGUgVVJMIGZyb20gdGhlIEhBUi4gRXhwbGljaXRseSBwYXNzIHZpYSBcIi0tdXJsXCIgZmxhZyBhbmQgcmVydW4uYFxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHRpdGxlOiBcIlJlY29yZGluZyB0aGUgbGl2ZSB0cmFjZVwiLFxuICAgICAgICB0YXNrOiBhc3luYyAoY3R4OiBQcm9maWxlQ29udGV4dCkgPT4ge1xuICAgICAgICAgIGNvbnN0IHsgY29va2llcywgdXJsIH0gPSBjdHg7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIHJ1biB0aGUgbGl2ZVRyYWNlXG4gICAgICAgICAgICBjb25zdCB7IHRyYWNlRXZlbnRzIH0gPSBhd2FpdCBsaXZlVHJhY2UoXG4gICAgICAgICAgICAgIHVybCxcbiAgICAgICAgICAgICAgdGJSZXN1bHRzRm9sZGVyLFxuICAgICAgICAgICAgICBjb29raWVzLFxuICAgICAgICAgICAgICBjb25kaXRpb25zXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgY3R4LnRyYWNlRXZlbnRzID0gdHJhY2VFdmVudHMgYXMgSVRyYWNlRXZlbnRGcmFtZVtdO1xuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLmVycm9yKGAke2Vycm9yfWApO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHRpdGxlOiBcIlNldHRpbmcgdHJhY2UgZXZlbnRzXCIsXG4gICAgICAgIHRhc2s6IGFzeW5jIChjdHg6IFByb2ZpbGVDb250ZXh0KSA9PiB7XG4gICAgICAgICAgY29uc3QgeyB0cmFjZUV2ZW50cyB9ID0gY3R4O1xuICAgICAgICAgIC8vIG11dGF0ZXMgdGhpcy50cmFjZVxuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLnRyYWNlID0gc2V0VHJhY2VFdmVudHModHJhY2VFdmVudHMpO1xuICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICB0aGlzLmVycm9yKGAke2Vycm9yfWApO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgXSk7XG5cbiAgICBhd2FpdCB0YXNrc1xuICAgICAgLnJ1bigpXG4gICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgIHRoaXMuZXJyb3IoYCR7ZXJyb3J9YCk7XG4gICAgICB9KVxuICAgICAgLnRoZW4oYXN5bmMgKGN0eCkgPT4ge1xuICAgICAgICAvLyBsb2cganMtZXZhbC10aW1lXG4gICAgICAgIHRoaXMubG9nSlNFdmFsVGltZSgpO1xuICAgICAgICAvLyBsb2cgY3NzLXBhcnNlXG4gICAgICAgIHRoaXMubG9nQ1NTRXZhbFRpbWUoKTtcbiAgICAgICAgLy8gbG9nIHVzZXIgdGltaW5nc1xuICAgICAgICBhd2FpdCB0aGlzLm1hcmtlclRpbWluZ3MoY3R4LnRyYWNlSlNPTlBhdGgsIGN0eC51cmwpO1xuICAgICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGxvZ0pTRXZhbFRpbWUoKTogdm9pZCB7XG4gICAgbGV0IHRvdGFsSlNEdXJhdGlvbiA9IDA7XG4gICAgY29uc3QganNFdmFsTG9nczogbG9nQmFyT3B0aW9uc1tdID0gW107XG4gICAgdGhpcy50cmFjZVxuICAgICAgLmZpbHRlcigoZXZlbnQ6IElUcmFjZUV2ZW50KSA9PiBldmVudC5uYW1lID09PSBcIkV2YWx1YXRlU2NyaXB0XCIpXG4gICAgICAuZmlsdGVyKChldmVudDogYW55KSA9PiBldmVudC5hcmdzLmRhdGEudXJsKVxuICAgICAgLmZvckVhY2goKGV2ZW50OiBhbnkpID0+IHtcbiAgICAgICAgY29uc3QgdXJsID0gZXZlbnQuYXJncy5kYXRhLnVybDtcbiAgICAgICAgY29uc3QgZHVyYXRpb25Jbk1zID0gZXZlbnQuZHVyIC8gMTAwMDtcbiAgICAgICAgdG90YWxKU0R1cmF0aW9uICs9IGR1cmF0aW9uSW5NcztcbiAgICAgICAganNFdmFsTG9ncy5wdXNoKHtcbiAgICAgICAgICB0b3RhbER1cmF0aW9uOiB0b3RhbEpTRHVyYXRpb24sXG4gICAgICAgICAgZHVyYXRpb246IGR1cmF0aW9uSW5NcyxcbiAgICAgICAgICB0aXRsZTogdXJsLFxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgbG9nSGVhZGluZyhgSlMgRXZhbHVhdGlvbiA6OiBUb3RhbCBEdXJhdGlvbiAke3RvdGFsSlNEdXJhdGlvbn0gbXNgKTtcblxuICAgIC8vIGxvZyBqcy1ldmFsLXRpbWVcbiAgICBqc0V2YWxMb2dzXG4gICAgICAuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICByZXR1cm4gYS5kdXJhdGlvbiAtIGIuZHVyYXRpb247XG4gICAgICB9KVxuICAgICAgLmZvckVhY2goKGxvZykgPT4ge1xuICAgICAgICB0aGlzLmxvZyhsb2dCYXIobG9nKSk7XG4gICAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgbG9nQ1NTRXZhbFRpbWUoKTogdm9pZCB7XG4gICAgbGV0IHRvdGFsQ1NTRHVyYXRpb24gPSAwO1xuICAgIGNvbnN0IGNzc0V2YWxMb2dzOiBsb2dCYXJPcHRpb25zW10gPSBbXTtcblxuICAgIHRoaXMudHJhY2VcbiAgICAgIC5maWx0ZXIoKGV2ZW50OiBJVHJhY2VFdmVudCkgPT4gZXZlbnQubmFtZSA9PT0gXCJQYXJzZUF1dGhvclN0eWxlU2hlZXRcIilcbiAgICAgIC5maWx0ZXIoKGV2ZW50OiBhbnkpID0+IGV2ZW50LmFyZ3MuZGF0YS5zdHlsZVNoZWV0VXJsKVxuICAgICAgLmZvckVhY2goKGV2ZW50OiBhbnkpID0+IHtcbiAgICAgICAgY29uc3QgdXJsID0gZXZlbnQuYXJncy5kYXRhLnN0eWxlU2hlZXRVcmw7XG4gICAgICAgIGNvbnN0IGR1cmF0aW9uSW5NcyA9IGV2ZW50LmR1ciAvIDEwMDA7XG4gICAgICAgIHRvdGFsQ1NTRHVyYXRpb24gKz0gZHVyYXRpb25Jbk1zO1xuICAgICAgICBjc3NFdmFsTG9ncy5wdXNoKHtcbiAgICAgICAgICB0b3RhbER1cmF0aW9uOiB0b3RhbENTU0R1cmF0aW9uLFxuICAgICAgICAgIGR1cmF0aW9uOiBkdXJhdGlvbkluTXMsXG4gICAgICAgICAgdGl0bGU6IHVybCxcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgIGxvZ0hlYWRpbmcoYENTUyBFdmFsdWF0aW9uIDo6IFRvdGFsIER1cmF0aW9uICR7dG90YWxDU1NEdXJhdGlvbn0gbXNgKTtcblxuICAgIC8vIGxvZyBjc3MtcGFyc2UtdGltZVxuICAgIGNzc0V2YWxMb2dzXG4gICAgICAuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICByZXR1cm4gYS5kdXJhdGlvbiAtIGIuZHVyYXRpb247XG4gICAgICB9KVxuICAgICAgLmZvckVhY2goKGxvZykgPT4ge1xuICAgICAgICB0aGlzLmxvZyhsb2dCYXIobG9nKSk7XG4gICAgICB9KTtcbiAgfVxuXG4gIC8vIHRyYWNlcmJlbmNoIG1hcmtlci10aW1pbmdzIGNtZCBtb3ZlZCBoZXJlXG4gIHByaXZhdGUgYXN5bmMgbWFya2VyVGltaW5ncyhcbiAgICB0cmFjZUpTT05QYXRoOiBzdHJpbmcsXG4gICAgdXJsOiBzdHJpbmdcbiAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgbGV0IGZyYW1lOiBzdHJpbmc7XG4gICAgbGV0IHN0YXJ0VGltZSA9IC0xO1xuICAgIGxldCByYXdUcmFjZURhdGE6IGFueSA9IG51bGw7XG4gICAgbGV0IGN1c3RvbVRyYWNlOiBJVHJhY2VFdmVudEZyYW1lW107XG4gICAgY29uc3QgbWFya2VyTG9nczogbWFya2VyTG9nTWV0YVtdID0gW107XG5cbiAgICBpZiAoIXVybCkge1xuICAgICAgdGhpcy5lcnJvcihcbiAgICAgICAgYENvdWxkIG5vdCBleHRyYWN0IHRoZSBVUkwgZnJvbSB0aGUgSEFSLiBFeHBsaWNpdGx5IHBhc3MgdmlhIFwiLS11cmxcIiBmbGFnIGFuZCByZXJ1bi5gXG4gICAgICApO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICByYXdUcmFjZURhdGEgPSBhd2FpdCByZWFkSnNvbihyZXNvbHZlKHRyYWNlSlNPTlBhdGgpKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICB0aGlzLmVycm9yKGUpO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBjdXN0b21UcmFjZSA9IHNldFRyYWNlRXZlbnRzKHJhd1RyYWNlRGF0YSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgdGhpcy5lcnJvcihlKTtcbiAgICB9XG5cbiAgICBpZiAodXJsLnN0YXJ0c1dpdGgoXCJodHRwXCIpKSB7XG4gICAgICBmcmFtZSA9IGZpbmRGcmFtZShjdXN0b21UcmFjZSwgdXJsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZnJhbWUgPSB1cmw7XG4gICAgfVxuXG4gICAgaWYgKCFmcmFtZSkge1xuICAgICAgdGhpcy5lcnJvcihcbiAgICAgICAgYENvdWxkIG5vdCBleHRyYWN0IGZyYW1lIGZyb20gdHJhY2UuIEV4cGxpY2l0bHkgb3B0LW91dCBvZiB1c2VydGltaW5ncyB2aWEgXCItLXVzZXJ0aW1pbmdzXCIgYm9vbGVhbiBmbGFnIGFuZCByZXJ1bi5gXG4gICAgICApO1xuICAgIH1cblxuICAgIGN1c3RvbVRyYWNlXG4gICAgICAuZmlsdGVyKChldmVudDogSVRyYWNlRXZlbnRGcmFtZSkgPT4gaXNNYXJrKGV2ZW50KSB8fCBpc0NvbW1pdExvYWQoZXZlbnQpKVxuICAgICAgLnNvcnQoYnlUaW1lKVxuICAgICAgLmZvckVhY2goKGV2ZW50OiBJVHJhY2VFdmVudEZyYW1lKSA9PiB7XG4gICAgICAgIGlmIChpc0ZyYW1lTmF2aWdhdGlvblN0YXJ0KGZyYW1lLCBldmVudCwgdXJsKSkge1xuICAgICAgICAgIHN0YXJ0VGltZSA9IGV2ZW50LnRzO1xuICAgICAgICAgIG1hcmtlckxvZ3MucHVzaCh0aGlzLmJ1aWxkTWFya2VyTG9ncyhldmVudCwgc3RhcnRUaW1lKSk7XG4gICAgICAgIH0gZWxzZSBpZiAoXG4gICAgICAgICAgaXNGcmFtZU1hcmsoZnJhbWUsIGV2ZW50KSAmJlxuICAgICAgICAgIGV2ZW50Lm5hbWUgIT09IFwibmF2aWdhdGlvblN0YXJ0XCJcbiAgICAgICAgKSB7XG4gICAgICAgICAgaWYgKHN0YXJ0VGltZSA9PT0gLTEpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgbWFya2VyTG9ncy5wdXNoKHRoaXMuYnVpbGRNYXJrZXJMb2dzKGV2ZW50LCBzdGFydFRpbWUpKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICB0aGlzLmxvZ01hcmtlclRpbWluZ3MobWFya2VyTG9ncyk7XG4gIH1cblxuICBwcml2YXRlIGJ1aWxkTWFya2VyTG9ncyhcbiAgICBldmVudDogSVRyYWNlRXZlbnRGcmFtZSxcbiAgICBzdGFydFRpbWU6IG51bWJlclxuICApOiBtYXJrZXJMb2dNZXRhIHtcbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogZXZlbnQubmFtZSxcbiAgICAgIHNlbnRhbmNlQ2FzZU5hbWU6IGNvbnZlcnRUb1NlbnRDYXNlKGV2ZW50Lm5hbWUpLFxuICAgICAgZHVyYXRpb246IGZvcm1hdFRvRHVyYXRpb24oZXZlbnQudHMsIHN0YXJ0VGltZSksXG4gICAgICBzdGFydFRpbWUsXG4gICAgICBiYXI6IFwiXCIsXG4gICAgfTtcbiAgfVxuXG4gIHByaXZhdGUgbG9nTWFya2VyVGltaW5ncyhtYXJrZXJMb2dzOiBtYXJrZXJMb2dNZXRhW10pOiB2b2lkIHtcbiAgICBjb25zdCB0b3RhbER1cmF0aW9uID0gbWFya2VyTG9nc1ttYXJrZXJMb2dzLmxlbmd0aCAtIDFdLmR1cmF0aW9uO1xuXG4gICAgbG9nSGVhZGluZyhgTWFya2VyIFRpbWluZ3MgOjogVG90YWwgRHVyYXRpb24gJHt0b3RhbER1cmF0aW9ufSBtc2ApO1xuICAgIG1hcmtlckxvZ3MuZm9yRWFjaCgobG9nKSA9PiB7XG4gICAgICB0aGlzLmxvZyhcbiAgICAgICAgbG9nQmFyKHtcbiAgICAgICAgICB0b3RhbER1cmF0aW9uLFxuICAgICAgICAgIGR1cmF0aW9uOiBsb2cuZHVyYXRpb24sXG4gICAgICAgICAgdGl0bGU6IGxvZy5zZW50YW5jZUNhc2VOYW1lLFxuICAgICAgICB9KVxuICAgICAgKTtcbiAgICB9KTtcbiAgfVxufVxuIl19
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9tYWx5bmNoL0QvdHJhY2VyYmVuY2gvcGFja2FnZXMvY2xpL3NyYy9jb21tYW5kcy9wcm9maWxlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI2cDlCQUFBLHVEQUNBLEtBQUEsQ0FBQSxNQUFBLDBCQUFBLE9BQUEsQ0FBQSxtQkFBQSxDQUFBLENBQUEsQ0FRQSxLQUFBLENBQUEsVUFBQSwwQkFBQSxPQUFBLENBQUEsVUFBQSxDQUFBLENBQUEsQ0FDQSxLQUFBLENBQUEsS0FBQSwwQkFBQSxPQUFBLENBQUEsT0FBQSxDQUFBLENBQUEsQ0FDQSxLQUFBLENBQUEsTUFBQSwwQkFBQSxPQUFBLENBQUEsTUFBQSxDQUFBLENBQUEsQ0FFQSxLQUFBLENBQUEsZ0JBQUEsMEJBQUEsT0FBQSxDQUFBLG1CQUFBLENBQUEsQ0FBQSxDQUNBLEtBQUEsQ0FBQSxNQUFBLDBCQUFBLE9BQUEsQ0FBQSxpQkFBQSxDQUFBLENBQUEsQ0FDQSxLQUFBLENBQUEsT0FBQSwwQkFBQSxPQUFBLENBQUEsa0JBQUEsQ0FBQSxDQUFBLENBT0EsS0FBQSxDQUFBLE9BQUEsMEJBQUEsT0FBQSxDQUFBLGtCQUFBLENBQUEsQ0FBQSxDQStCQSxHQUFBLENBQUEsT0FBQSxFQUFBLGFBQUEsd0JBQUEsQ0FBQSxJQUFBLHlCQUFBLEtBQXFCLENBQUEsT0FBckIsU0FBcUMsZ0JBQUEsQ0FBQSxhQUFyQyxDQUFrRCxDQUFsRCxXQUFBLEVBQUEsa0Qsb0JBQUEseUJBR1MsS0FBQSxLQUFBLENBQTRCLEVBQTVCLENBc1JSLENBM1FRLEtBQU0sQ0FBQSxHQUFOLEVBQVMseUJBQ2QsS0FBTSxDQUFFLEtBQUYsQ0FBUyxJQUFULDRCQUFrQixLQUFLLEtBQUwsQ0FBVyxPQUFYLENBQWxCLENBQU4sQ0FDQSxLQUFNLENBQ0osZUFESSxDQUVKLFdBRkksQ0FHSixlQUhJLENBSUosT0FKSSxDQUtKLEdBTEksNEJBTUYsS0FORSxDQUFOLENBT0EsS0FBTSxDQUFFLE9BQUYsNEJBQWMsSUFBZCxD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QUFlLENBQUUsT0FBQSxDQUFBLGVBQUEsQ0FBZ0IsQ0FBRSxRQUFRLENBQUUsSUFBWixDQUFoQixDQURHLENBRXBCLGVBQWUsQ0FBRSxPQUFBLENBQUEsZUFBQSxDQUFnQixDQUFFLFFBQVEsQ0FBRSxJQUFaLENBQWhCLENBRkcsQ0FHcEIsT0FBTyxDQUFFLE9BQUEsQ0FBQSxPQUFBLEVBSFcsQ0FJcEIsR0FBRyxDQUFFLE9BQUEsQ0FBQSxHQUFBLENBQUksQ0FBRSxRQUFRLENBQUUsSUFBWixDQUFKLENBSmUsQ0FLcEIsV0FBVyxDQUFFLE9BQUEsQ0FBQSxXQUFBLENBQVksQ0FBRSxRQUFRLENBQUUsSUFBWixDQUFaLENBTE8sQ0FBUixDQU5oQiwwQkF5UkEsTUFBQSxDQUFBLE9BQUEsQ0FBQyxDQXpSRCxHQUFBLENBQUEsQywwQ0FBcUIsTyIsInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnkgKi9cbmltcG9ydCB7XG4gIElDb25kaXRpb25zLFxuICBJVHJhY2VFdmVudCxcbiAgSVRyYWNlRXZlbnRGcmFtZSxcbiAgbGl2ZVRyYWNlLFxufSBmcm9tIFwiQHRyYWNlcmJlbmNoL2NvcmVcIjtcbmltcG9ydCB7IEFyY2hpdmUgfSBmcm9tIFwiQHRyYWNlcmJlbmNoL2hhclwiO1xuaW1wb3J0IFByb3RvY29sIGZyb20gXCJkZXZ0b29scy1wcm90b2NvbFwiO1xuaW1wb3J0IHsgZXhpc3RzU3luYywgbWtkaXJTeW5jLCByZWFkSnNvbiwgd3JpdGVGaWxlU3luYyB9IGZyb20gXCJmcy1leHRyYVwiO1xuaW1wb3J0ICogYXMgbGlzdHIgZnJvbSBcImxpc3RyXCI7XG5pbXBvcnQgeyBqb2luLCByZXNvbHZlIH0gZnJvbSBcInBhdGhcIjtcblxuaW1wb3J0IHsgVEJCYXNlQ29tbWFuZCB9IGZyb20gXCIuLi9jb21tYW5kLWNvbmZpZ1wiO1xuaW1wb3J0IHsgaGFycGF0aCB9IGZyb20gXCIuLi9oZWxwZXJzL2FyZ3NcIjtcbmltcG9ydCB7XG4gIGNvb2tpZXNwYXRoLFxuICBjcHVUaHJvdHRsZVJhdGUsXG4gIG5ldHdvcmssXG4gIHRiUmVzdWx0c0ZvbGRlcixcbiAgdXJsLFxufSBmcm9tIFwiLi4vaGVscGVycy9mbGFnc1wiO1xuaW1wb3J0IHtcbiAgYnlUaW1lLFxuICBjb252ZXJ0VG9TZW50Q2FzZSxcbiAgZmluZEZyYW1lLFxuICBmb3JtYXRUb0R1cmF0aW9uLFxuICBpc0NvbW1pdExvYWQsXG4gIGlzRnJhbWVNYXJrLFxuICBpc0ZyYW1lTmF2aWdhdGlvblN0YXJ0LFxuICBpc01hcmssXG4gIGxvZ0JhcixcbiAgbG9nQmFyT3B0aW9ucyxcbiAgbG9nSGVhZGluZyxcbiAgc2V0VHJhY2VFdmVudHMsXG59IGZyb20gXCIuLi9oZWxwZXJzL3V0aWxzXCI7XG5cbmludGVyZmFjZSBQcm9maWxlQ29udGV4dCB7XG4gIGNvb2tpZXM6IFByb3RvY29sLk5ldHdvcmsuQ29va2llUGFyYW1bXTtcbiAgaGFySlNPTjogQXJjaGl2ZTtcbiAgdHJhY2VKU09OUGF0aDogc3RyaW5nO1xuICB0cmFjZUV2ZW50czogSVRyYWNlRXZlbnRGcmFtZVtdO1xuICB1cmw6IHN0cmluZztcbn1cblxudHlwZSBtYXJrZXJMb2dNZXRhID0ge1xuICBuYW1lOiBzdHJpbmc7XG4gIHNlbnRhbmNlQ2FzZU5hbWU6IHN0cmluZztcbiAgZHVyYXRpb246IG51bWJlcjtcbiAgc3RhcnRUaW1lOiBudW1iZXI7XG4gIGJhcjogc3RyaW5nO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUHJvZmlsZSBleHRlbmRzIFRCQmFzZUNvbW1hbmQge1xuICAvLyBpbmNsdWRlIGJhY2t3YXJkcyBjb21wYXQgdG8gdHJhY2UgY21kXG4gIHN0YXRpYyBhbGlhc2VzID0gW1widHJhY2VcIl07XG4gIHB1YmxpYyB0cmFjZTogSVRyYWNlRXZlbnRGcmFtZVtdID0gW107XG4gIHB1YmxpYyBzdGF0aWMgZGVzY3JpcHRpb24gPSBgUGFyc2VzIGEgQ1BVIHByb2ZpbGUgd2l0aCBhc3NldCBhbmQgbWFya2VyIHRpbWluZ3MuYDtcbiAgcHVibGljIHN0YXRpYyBhcmdzID0gW2hhcnBhdGhdO1xuICBwdWJsaWMgc3RhdGljIGZsYWdzID0ge1xuICAgIGNwdVRocm90dGxlUmF0ZTogY3B1VGhyb3R0bGVSYXRlKHsgcmVxdWlyZWQ6IHRydWUgfSksXG4gICAgdGJSZXN1bHRzRm9sZGVyOiB0YlJlc3VsdHNGb2xkZXIoeyByZXF1aXJlZDogdHJ1ZSB9KSxcbiAgICBuZXR3b3JrOiBuZXR3b3JrKCksXG4gICAgdXJsOiB1cmwoeyByZXF1aXJlZDogdHJ1ZSB9KSxcbiAgICBjb29raWVzcGF0aDogY29va2llc3BhdGgoeyByZXF1aXJlZDogdHJ1ZSB9KSxcbiAgfTtcblxuICBwdWJsaWMgYXN5bmMgcnVuKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IHsgZmxhZ3MsIGFyZ3MgfSA9IHRoaXMucGFyc2UoUHJvZmlsZSk7XG4gICAgY29uc3Qge1xuICAgICAgY3B1VGhyb3R0bGVSYXRlLFxuICAgICAgY29va2llc3BhdGgsXG4gICAgICB0YlJlc3VsdHNGb2xkZXIsXG4gICAgICBuZXR3b3JrLFxuICAgICAgdXJsLFxuICAgIH0gPSBmbGFncztcbiAgICBjb25zdCB7IGhhcnBhdGggfSA9IGFyZ3M7XG4gICAgY29uc3QgY29va2llcyA9IFtcbiAgICAgIHtcbiAgICAgICAgbmFtZTogXCJcIixcbiAgICAgICAgdmFsdWU6IFwiXCIsXG4gICAgICAgIGRvbWFpbjogXCJcIixcbiAgICAgICAgcGF0aDogXCJcIixcbiAgICAgIH0sXG4gICAgXTtcbiAgICBjb25zdCBjb25kaXRpb25zOiBJQ29uZGl0aW9ucyA9IHtcbiAgICAgIGNwdTogY3B1VGhyb3R0bGVSYXRlLFxuICAgICAgbmV0d29yayxcbiAgICB9O1xuXG4gICAgY29uc3QgdGFza3MgPSBuZXcgbGlzdHIoW1xuICAgICAge1xuICAgICAgICB0aXRsZTogXCJSZWFkaW5nIGNvb2tpZXMganNvblwiLFxuICAgICAgICB0YXNrOiBhc3luYyAoY3R4OiBQcm9maWxlQ29udGV4dCkgPT4ge1xuICAgICAgICAgIC8vIHJlYWQgY29va2llcyBqc29uIGZpbGUgZnJvbSBwYXRoIGFuZCBzZXQgdG8gY29udGV4dFxuICAgICAgICAgIGN0eC5jb29raWVzID0gY29va2llc3BhdGgubGVuZ3RoXG4gICAgICAgICAgICA/IGF3YWl0IHJlYWRKc29uKHJlc29sdmUoY29va2llc3BhdGgpKVxuICAgICAgICAgICAgOiBjb29raWVzO1xuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgdGl0bGU6IFwiUHJlcGFyaW5nIHJlc3VsdHMgZm9sZGVyXCIsXG4gICAgICAgIHRhc2s6ICgpID0+IHtcbiAgICAgICAgICAvLyBpZiB0aGUgZm9sZGVyIGZvciB0aGUgdHJhY2VyYmVuY2ggcmVzdWx0cyBmaWxlXG4gICAgICAgICAgLy8gZG9lcyBub3QgZXhpc3QgdGhlbiBjcmVhdGUgaXRcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKCFleGlzdHNTeW5jKHRiUmVzdWx0c0ZvbGRlcikpIHtcbiAgICAgICAgICAgICAgbWtkaXJTeW5jKHRiUmVzdWx0c0ZvbGRlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRoaXMuZXJyb3IoZXJyb3IpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIHRpdGxlOiBcIlZhbGlkYXRpbmcgJiBDbG9uaW5nIEhBUiBmaWxlXCIsXG4gICAgICAgIHRhc2s6IGFzeW5jIChjdHg6IFByb2ZpbGVDb250ZXh0KSA9PiB7XG4gICAgICAgICAgLy8gdmFsaWRhdGUgaGFyIGFuZCBjbG9uZSBpdCB0byB0cmFjZS5qc29uIHdoaWNoIHdpbGwgYmUgbXV0YXRlZFxuICAgICAgICAgIGN0eC5oYXJKU09OID0gYXdhaXQgcmVhZEpzb24ocmVzb2x2ZShoYXJwYXRoKSk7XG4gICAgICAgICAgY3R4LnRyYWNlSlNPTlBhdGggPSBqb2luKHRiUmVzdWx0c0ZvbGRlciwgXCJ0cmFjZS5qc29uXCIpO1xuICAgICAgICAgIHdyaXRlRmlsZVN5bmMoXG4gICAgICAgICAgICBjdHgudHJhY2VKU09OUGF0aCxcbiAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KGN0eC5oYXJKU09OLCBudWxsLCAyKVxuICAgICAgICAgICk7XG4gICAgICAgICAgLy8gaWYgbm8gdXJsIGdldCB1cmwgZnJvbSBoYXIgb3RoZXJ3aXNlIHNldCB3aXRoIGNtZCB1cmxcbiAgICAgICAgICBjdHgudXJsID0gdXJsLmxlbmd0aCA/IHVybCA6IGdldFVSTEZyb21IQVIoY3R4KTtcblxuICAgICAgICAgIGZ1bmN0aW9uIGdldFVSTEZyb21IQVIoY3R4OiBQcm9maWxlQ29udGV4dCk6IHN0cmluZyB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBjb25zdCB1cmwgPSBjdHguaGFySlNPTi5sb2cuZW50cmllc1swXS5yZXF1ZXN0LnVybDtcbiAgICAgICAgICAgICAgcmV0dXJuIHVybDtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgICAgICBgJHtlcnJvcn0uIENvdWxkIG5vdCBleHRyYWN0IHRoZSBVUkwgZnJvbSB0aGUgSEFSLiBFeHBsaWNpdGx5IHBhc3MgdmlhIFwiLS11cmxcIiBmbGFnIGFuZCByZXJ1bi5gXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgdGl0bGU6IFwiUmVjb3JkaW5nIHRoZSBsaXZlIHRyYWNlXCIsXG4gICAgICAgIHRhc2s6IGFzeW5jIChjdHg6IFByb2ZpbGVDb250ZXh0KSA9PiB7XG4gICAgICAgICAgY29uc3QgeyBjb29raWVzLCB1cmwgfSA9IGN0eDtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gcnVuIHRoZSBsaXZlVHJhY2VcbiAgICAgICAgICAgIGNvbnN0IHsgdHJhY2VFdmVudHMgfSA9IGF3YWl0IGxpdmVUcmFjZShcbiAgICAgICAgICAgICAgdXJsLFxuICAgICAgICAgICAgICB0YlJlc3VsdHNGb2xkZXIsXG4gICAgICAgICAgICAgIGNvb2tpZXMsXG4gICAgICAgICAgICAgIGNvbmRpdGlvbnNcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBjdHgudHJhY2VFdmVudHMgPSB0cmFjZUV2ZW50cyBhcyBJVHJhY2VFdmVudEZyYW1lW107XG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRoaXMuZXJyb3IoYCR7ZXJyb3J9YCk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgdGl0bGU6IFwiU2V0dGluZyB0cmFjZSBldmVudHNcIixcbiAgICAgICAgdGFzazogYXN5bmMgKGN0eDogUHJvZmlsZUNvbnRleHQpID0+IHtcbiAgICAgICAgICBjb25zdCB7IHRyYWNlRXZlbnRzIH0gPSBjdHg7XG4gICAgICAgICAgLy8gbXV0YXRlcyB0aGlzLnRyYWNlXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMudHJhY2UgPSBzZXRUcmFjZUV2ZW50cyh0cmFjZUV2ZW50cyk7XG4gICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHRoaXMuZXJyb3IoYCR7ZXJyb3J9YCk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICBdKTtcblxuICAgIGF3YWl0IHRhc2tzXG4gICAgICAucnVuKClcbiAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgdGhpcy5lcnJvcihgJHtlcnJvcn1gKTtcbiAgICAgIH0pXG4gICAgICAudGhlbihhc3luYyAoY3R4KSA9PiB7XG4gICAgICAgIC8vIGxvZyBqcy1ldmFsLXRpbWVcbiAgICAgICAgdGhpcy5sb2dKU0V2YWxUaW1lKCk7XG4gICAgICAgIC8vIGxvZyBjc3MtcGFyc2VcbiAgICAgICAgdGhpcy5sb2dDU1NFdmFsVGltZSgpO1xuICAgICAgICAvLyBsb2cgdXNlciB0aW1pbmdzXG4gICAgICAgIGF3YWl0IHRoaXMubWFya2VyVGltaW5ncyhjdHgudHJhY2VKU09OUGF0aCwgY3R4LnVybCk7XG4gICAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgbG9nSlNFdmFsVGltZSgpOiB2b2lkIHtcbiAgICBsZXQgdG90YWxKU0R1cmF0aW9uID0gMDtcbiAgICBjb25zdCBqc0V2YWxMb2dzOiBsb2dCYXJPcHRpb25zW10gPSBbXTtcbiAgICB0aGlzLnRyYWNlXG4gICAgICAuZmlsdGVyKChldmVudDogSVRyYWNlRXZlbnQpID0+IGV2ZW50Lm5hbWUgPT09IFwiRXZhbHVhdGVTY3JpcHRcIilcbiAgICAgIC5maWx0ZXIoKGV2ZW50OiBhbnkpID0+IGV2ZW50LmFyZ3MuZGF0YS51cmwpXG4gICAgICAuZm9yRWFjaCgoZXZlbnQ6IGFueSkgPT4ge1xuICAgICAgICBjb25zdCB1cmwgPSBldmVudC5hcmdzLmRhdGEudXJsO1xuICAgICAgICBjb25zdCBkdXJhdGlvbkluTXMgPSBldmVudC5kdXIgLyAxMDAwO1xuICAgICAgICB0b3RhbEpTRHVyYXRpb24gKz0gZHVyYXRpb25Jbk1zO1xuICAgICAgICBqc0V2YWxMb2dzLnB1c2goe1xuICAgICAgICAgIHRvdGFsRHVyYXRpb246IHRvdGFsSlNEdXJhdGlvbixcbiAgICAgICAgICBkdXJhdGlvbjogZHVyYXRpb25Jbk1zLFxuICAgICAgICAgIHRpdGxlOiB1cmwsXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICBsb2dIZWFkaW5nKGBKUyBFdmFsdWF0aW9uIDo6IFRvdGFsIER1cmF0aW9uICR7dG90YWxKU0R1cmF0aW9ufSBtc2ApO1xuXG4gICAgLy8gbG9nIGpzLWV2YWwtdGltZVxuICAgIGpzRXZhbExvZ3NcbiAgICAgIC5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgIHJldHVybiBhLmR1cmF0aW9uIC0gYi5kdXJhdGlvbjtcbiAgICAgIH0pXG4gICAgICAuZm9yRWFjaCgobG9nKSA9PiB7XG4gICAgICAgIHRoaXMubG9nKGxvZ0Jhcihsb2cpKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBsb2dDU1NFdmFsVGltZSgpOiB2b2lkIHtcbiAgICBsZXQgdG90YWxDU1NEdXJhdGlvbiA9IDA7XG4gICAgY29uc3QgY3NzRXZhbExvZ3M6IGxvZ0Jhck9wdGlvbnNbXSA9IFtdO1xuXG4gICAgdGhpcy50cmFjZVxuICAgICAgLmZpbHRlcigoZXZlbnQ6IElUcmFjZUV2ZW50KSA9PiBldmVudC5uYW1lID09PSBcIlBhcnNlQXV0aG9yU3R5bGVTaGVldFwiKVxuICAgICAgLmZpbHRlcigoZXZlbnQ6IGFueSkgPT4gZXZlbnQuYXJncy5kYXRhLnN0eWxlU2hlZXRVcmwpXG4gICAgICAuZm9yRWFjaCgoZXZlbnQ6IGFueSkgPT4ge1xuICAgICAgICBjb25zdCB1cmwgPSBldmVudC5hcmdzLmRhdGEuc3R5bGVTaGVldFVybDtcbiAgICAgICAgY29uc3QgZHVyYXRpb25Jbk1zID0gZXZlbnQuZHVyIC8gMTAwMDtcbiAgICAgICAgdG90YWxDU1NEdXJhdGlvbiArPSBkdXJhdGlvbkluTXM7XG4gICAgICAgIGNzc0V2YWxMb2dzLnB1c2goe1xuICAgICAgICAgIHRvdGFsRHVyYXRpb246IHRvdGFsQ1NTRHVyYXRpb24sXG4gICAgICAgICAgZHVyYXRpb246IGR1cmF0aW9uSW5NcyxcbiAgICAgICAgICB0aXRsZTogdXJsLFxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgbG9nSGVhZGluZyhgQ1NTIEV2YWx1YXRpb24gOjogVG90YWwgRHVyYXRpb24gJHt0b3RhbENTU0R1cmF0aW9ufSBtc2ApO1xuXG4gICAgLy8gbG9nIGNzcy1wYXJzZS10aW1lXG4gICAgY3NzRXZhbExvZ3NcbiAgICAgIC5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgIHJldHVybiBhLmR1cmF0aW9uIC0gYi5kdXJhdGlvbjtcbiAgICAgIH0pXG4gICAgICAuZm9yRWFjaCgobG9nKSA9PiB7XG4gICAgICAgIHRoaXMubG9nKGxvZ0Jhcihsb2cpKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgLy8gdHJhY2VyYmVuY2ggbWFya2VyLXRpbWluZ3MgY21kIG1vdmVkIGhlcmVcbiAgcHJpdmF0ZSBhc3luYyBtYXJrZXJUaW1pbmdzKFxuICAgIHRyYWNlSlNPTlBhdGg6IHN0cmluZyxcbiAgICB1cmw6IHN0cmluZ1xuICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBsZXQgZnJhbWU6IHN0cmluZztcbiAgICBsZXQgc3RhcnRUaW1lID0gLTE7XG4gICAgbGV0IHJhd1RyYWNlRGF0YTogYW55ID0gbnVsbDtcbiAgICBsZXQgY3VzdG9tVHJhY2U6IElUcmFjZUV2ZW50RnJhbWVbXTtcbiAgICBjb25zdCBtYXJrZXJMb2dzOiBtYXJrZXJMb2dNZXRhW10gPSBbXTtcblxuICAgIGlmICghdXJsKSB7XG4gICAgICB0aGlzLmVycm9yKFxuICAgICAgICBgQ291bGQgbm90IGV4dHJhY3QgdGhlIFVSTCBmcm9tIHRoZSBIQVIuIEV4cGxpY2l0bHkgcGFzcyB2aWEgXCItLXVybFwiIGZsYWcgYW5kIHJlcnVuLmBcbiAgICAgICk7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIHJhd1RyYWNlRGF0YSA9IGF3YWl0IHJlYWRKc29uKHJlc29sdmUodHJhY2VKU09OUGF0aCkpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHRoaXMuZXJyb3IoZSk7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGN1c3RvbVRyYWNlID0gc2V0VHJhY2VFdmVudHMocmF3VHJhY2VEYXRhKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICB0aGlzLmVycm9yKGUpO1xuICAgIH1cblxuICAgIGlmICh1cmwuc3RhcnRzV2l0aChcImh0dHBcIikpIHtcbiAgICAgIGZyYW1lID0gZmluZEZyYW1lKGN1c3RvbVRyYWNlLCB1cmwpO1xuICAgIH0gZWxzZSB7XG4gICAgICBmcmFtZSA9IHVybDtcbiAgICB9XG5cbiAgICBpZiAoIWZyYW1lKSB7XG4gICAgICB0aGlzLmVycm9yKFxuICAgICAgICBgQ291bGQgbm90IGV4dHJhY3QgZnJhbWUgZnJvbSB0cmFjZS4gRXhwbGljaXRseSBvcHQtb3V0IG9mIHVzZXJ0aW1pbmdzIHZpYSBcIi0tdXNlcnRpbWluZ3NcIiBib29sZWFuIGZsYWcgYW5kIHJlcnVuLmBcbiAgICAgICk7XG4gICAgfVxuXG4gICAgY3VzdG9tVHJhY2VcbiAgICAgIC5maWx0ZXIoKGV2ZW50OiBJVHJhY2VFdmVudEZyYW1lKSA9PiBpc01hcmsoZXZlbnQpIHx8IGlzQ29tbWl0TG9hZChldmVudCkpXG4gICAgICAuc29ydChieVRpbWUpXG4gICAgICAuZm9yRWFjaCgoZXZlbnQ6IElUcmFjZUV2ZW50RnJhbWUpID0+IHtcbiAgICAgICAgaWYgKGlzRnJhbWVOYXZpZ2F0aW9uU3RhcnQoZnJhbWUsIGV2ZW50LCB1cmwpKSB7XG4gICAgICAgICAgc3RhcnRUaW1lID0gZXZlbnQudHM7XG4gICAgICAgICAgbWFya2VyTG9ncy5wdXNoKHRoaXMuYnVpbGRNYXJrZXJMb2dzKGV2ZW50LCBzdGFydFRpbWUpKTtcbiAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICBpc0ZyYW1lTWFyayhmcmFtZSwgZXZlbnQpICYmXG4gICAgICAgICAgZXZlbnQubmFtZSAhPT0gXCJuYXZpZ2F0aW9uU3RhcnRcIlxuICAgICAgICApIHtcbiAgICAgICAgICBpZiAoc3RhcnRUaW1lID09PSAtMSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtYXJrZXJMb2dzLnB1c2godGhpcy5idWlsZE1hcmtlckxvZ3MoZXZlbnQsIHN0YXJ0VGltZSkpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgIHRoaXMubG9nTWFya2VyVGltaW5ncyhtYXJrZXJMb2dzKTtcbiAgfVxuXG4gIHByaXZhdGUgYnVpbGRNYXJrZXJMb2dzKFxuICAgIGV2ZW50OiBJVHJhY2VFdmVudEZyYW1lLFxuICAgIHN0YXJ0VGltZTogbnVtYmVyXG4gICk6IG1hcmtlckxvZ01ldGEge1xuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiBldmVudC5uYW1lLFxuICAgICAgc2VudGFuY2VDYXNlTmFtZTogY29udmVydFRvU2VudENhc2UoZXZlbnQubmFtZSksXG4gICAgICBkdXJhdGlvbjogZm9ybWF0VG9EdXJhdGlvbihldmVudC50cywgc3RhcnRUaW1lKSxcbiAgICAgIHN0YXJ0VGltZSxcbiAgICAgIGJhcjogXCJcIixcbiAgICB9O1xuICB9XG5cbiAgcHJpdmF0ZSBsb2dNYXJrZXJUaW1pbmdzKG1hcmtlckxvZ3M6IG1hcmtlckxvZ01ldGFbXSk6IHZvaWQge1xuICAgIGNvbnN0IHRvdGFsRHVyYXRpb24gPSBtYXJrZXJMb2dzW21hcmtlckxvZ3MubGVuZ3RoIC0gMV0uZHVyYXRpb247XG5cbiAgICBsb2dIZWFkaW5nKGBNYXJrZXIgVGltaW5ncyA6OiBUb3RhbCBEdXJhdGlvbiAke3RvdGFsRHVyYXRpb259IG1zYCk7XG4gICAgbWFya2VyTG9ncy5mb3JFYWNoKChsb2cpID0+IHtcbiAgICAgIHRoaXMubG9nKFxuICAgICAgICBsb2dCYXIoe1xuICAgICAgICAgIHRvdGFsRHVyYXRpb24sXG4gICAgICAgICAgZHVyYXRpb246IGxvZy5kdXJhdGlvbixcbiAgICAgICAgICB0aXRsZTogbG9nLnNlbnRhbmNlQ2FzZU5hbWUsXG4gICAgICAgIH0pXG4gICAgICApO1xuICAgIH0pO1xuICB9XG59XG4iXX0=