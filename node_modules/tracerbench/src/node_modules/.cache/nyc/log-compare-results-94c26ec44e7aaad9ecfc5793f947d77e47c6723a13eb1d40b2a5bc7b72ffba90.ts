"use strict";function cov_1ljvm1xizr(){var path="/Users/malynch/D/tracerbench/packages/cli/src/helpers/log-compare-results.ts";var hash="22af74ca1c446a9621215872659daabdc507a297";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/malynch/D/tracerbench/packages/cli/src/helpers/log-compare-results.ts",statementMap:{"0":{start:{line:2,column:0},end:{line:2,column:62}},"1":{start:{line:3,column:16},end:{line:3,column:45}},"2":{start:{line:4,column:14},end:{line:4,column:30}},"3":{start:{line:5,column:25},end:{line:5,column:53}},"4":{start:{line:6,column:33},end:{line:6,column:68}},"5":{start:{line:7,column:19},end:{line:7,column:40}},"6":{start:{line:8,column:16},end:{line:8,column:34}},"7":{start:{line:18,column:4},end:{line:20,column:5}},"8":{start:{line:19,column:8},end:{line:19,column:84}},"9":{start:{line:21,column:4},end:{line:21,column:17}},"10":{start:{line:23,column:0},end:{line:23,column:54}},"11":{start:{line:33,column:22},end:{line:33,column:41}},"12":{start:{line:35,column:8},end:{line:35,column:59}},"13":{start:{line:37,column:4},end:{line:42,column:5}},"14":{start:{line:39,column:23},end:{line:39,column:86}},"15":{start:{line:41,column:8},end:{line:41,column:46}},"16":{start:{line:43,column:4},end:{line:43,column:16}},"17":{start:{line:45,column:0},end:{line:45,column:66}},"18":{start:{line:54,column:46},end:{line:54,column:54}},"19":{start:{line:55,column:33},end:{line:55,column:153}},"20":{start:{line:56,column:4},end:{line:58,column:5}},"21":{start:{line:57,column:8},end:{line:57,column:170}},"22":{start:{line:59,column:4},end:{line:61,column:5}},"23":{start:{line:60,column:8},end:{line:60,column:210}},"24":{start:{line:62,column:4},end:{line:62,column:11}},"25":{start:{line:64,column:0},end:{line:64,column:76}},"26":{start:{line:75,column:4},end:{line:75,column:121}},"27":{start:{line:76,column:4},end:{line:76,column:73}},"28":{start:{line:77,column:4},end:{line:77,column:79}},"29":{start:{line:78,column:4},end:{line:96,column:7}},"30":{start:{line:79,column:63},end:{line:79,column:72}},"31":{start:{line:80,column:18},end:{line:80,column:47}},"32":{start:{line:81,column:8},end:{line:94,column:9}},"33":{start:{line:83,column:12},end:{line:83,column:43}},"34":{start:{line:84,column:12},end:{line:89,column:13}},"35":{start:{line:85,column:16},end:{line:85,column:103}},"36":{start:{line:88,column:16},end:{line:88,column:105}},"37":{start:{line:90,column:12},end:{line:90,column:36}},"38":{start:{line:93,column:12},end:{line:93,column:52}},"39":{start:{line:95,column:8},end:{line:95,column:21}},"40":{start:{line:97,column:4},end:{line:97,column:11}},"41":{start:{line:99,column:0},end:{line:99,column:50}},"42":{start:{line:113,column:24},end:{line:118,column:5}},"43":{start:{line:119,column:4},end:{line:119,column:39}},"44":{start:{line:121,column:0},end:{line:121,column:46}},"45":{start:{line:130,column:25},end:{line:130,column:30}},"46":{start:{line:131,column:27},end:{line:131,column:67}},"47":{start:{line:132,column:23},end:{line:132,column:70}},"48":{start:{line:133,column:24},end:{line:135,column:6}},"49":{start:{line:134,column:8},end:{line:134,column:41}},"50":{start:{line:136,column:27},end:{line:138,column:6}},"51":{start:{line:137,column:8},end:{line:137,column:44}},"52":{start:{line:139,column:33},end:{line:139,column:96}},"53":{start:{line:140,column:36},end:{line:140,column:102}},"54":{start:{line:141,column:22},end:{line:141,column:116}},"55":{start:{line:141,column:70},end:{line:141,column:115}},"56":{start:{line:142,column:34},end:{line:142,column:36}},"57":{start:{line:143,column:26},end:{line:147,column:6}},"58":{start:{line:148,column:4},end:{line:148,column:47}},"59":{start:{line:149,column:4},end:{line:149,column:243}},"60":{start:{line:150,column:4},end:{line:157,column:7}},"61":{start:{line:151,column:8},end:{line:155,column:12}},"62":{start:{line:156,column:8},end:{line:156,column:145}},"63":{start:{line:158,column:37},end:{line:158,column:41}},"64":{start:{line:159,column:31},end:{line:159,column:55}},"65":{start:{line:160,column:27},end:{line:160,column:47}},"66":{start:{line:161,column:34},end:{line:161,column:115}},"67":{start:{line:162,column:4},end:{line:164,column:5}},"68":{start:{line:163,column:8},end:{line:163,column:135}},"69":{start:{line:166,column:4},end:{line:169,column:5}},"70":{start:{line:167,column:8},end:{line:167,column:50}},"71":{start:{line:168,column:8},end:{line:168,column:46}},"72":{start:{line:170,column:4},end:{line:170,column:77}},"73":{start:{line:171,column:4},end:{line:171,column:52}},"74":{start:{line:172,column:4},end:{line:172,column:116}},"75":{start:{line:174,column:0},end:{line:174,column:46}}},fnMap:{"0":{name:"anyResultsSignificant",decl:{start:{line:16,column:9},end:{line:16,column:30}},loc:{start:{line:16,column:79},end:{line:22,column:1}},line:16},"1":{name:"allBelowRegressionThreshold",decl:{start:{line:31,column:9},end:{line:31,column:36}},loc:{start:{line:31,column:116},end:{line:44,column:1}},line:31},"2":{name:"isBelowThreshold",decl:{start:{line:32,column:13},end:{line:32,column:29}},loc:{start:{line:32,column:33},end:{line:36,column:5}},line:32},"3":{name:"outputRunMetaMessagesAndWarnings",decl:{start:{line:53,column:9},end:{line:53,column:41}},loc:{start:{line:53,column:85},end:{line:63,column:1}},line:53},"4":{name:"outputSummaryReport",decl:{start:{line:74,column:9},end:{line:74,column:28}},loc:{start:{line:74,column:57},end:{line:98,column:1}},line:74},"5":{name:"(anonymous_5)",decl:{start:{line:78,column:34},end:{line:78,column:35}},loc:{start:{line:78,column:49},end:{line:96,column:5}},line:78},"6":{name:"outputJSONResults",decl:{start:{line:112,column:9},end:{line:112,column:26}},loc:{start:{line:112,column:114},end:{line:120,column:1}},line:112},"7":{name:"logCompareResults",decl:{start:{line:129,column:15},end:{line:129,column:32}},loc:{start:{line:129,column:54},end:{line:173,column:1}},line:129},"8":{name:"(anonymous_8)",decl:{start:{line:133,column:37},end:{line:133,column:38}},loc:{start:{line:133,column:50},end:{line:135,column:5}},line:133},"9":{name:"(anonymous_9)",decl:{start:{line:136,column:40},end:{line:136,column:41}},loc:{start:{line:136,column:53},end:{line:138,column:5}},line:136},"10":{name:"(anonymous_10)",decl:{start:{line:141,column:63},end:{line:141,column:64}},loc:{start:{line:141,column:70},end:{line:141,column:115}},line:141},"11":{name:"(anonymous_11)",decl:{start:{line:150,column:22},end:{line:150,column:23}},loc:{start:{line:150,column:33},end:{line:157,column:5}},line:150}},branchMap:{"0":{loc:{start:{line:18,column:4},end:{line:20,column:5}},type:"if",locations:[{start:{line:18,column:4},end:{line:20,column:5}},{start:{line:18,column:4},end:{line:20,column:5}}],line:18},"1":{loc:{start:{line:19,column:15},end:{line:19,column:83}},type:"binary-expr",locations:[{start:{line:19,column:15},end:{line:19,column:49}},{start:{line:19,column:53},end:{line:19,column:83}}],line:19},"2":{loc:{start:{line:35,column:15},end:{line:35,column:58}},type:"cond-expr",locations:[{start:{line:35,column:46},end:{line:35,column:51}},{start:{line:35,column:54},end:{line:35,column:58}}],line:35},"3":{loc:{start:{line:35,column:15},end:{line:35,column:43}},type:"binary-expr",locations:[{start:{line:35,column:15},end:{line:35,column:20}},{start:{line:35,column:24},end:{line:35,column:43}}],line:35},"4":{loc:{start:{line:37,column:4},end:{line:42,column:5}},type:"if",locations:[{start:{line:37,column:4},end:{line:42,column:5}},{start:{line:37,column:4},end:{line:42,column:5}}],line:37},"5":{loc:{start:{line:56,column:4},end:{line:58,column:5}},type:"if",locations:[{start:{line:56,column:4},end:{line:58,column:5}},{start:{line:56,column:4},end:{line:58,column:5}}],line:56},"6":{loc:{start:{line:59,column:4},end:{line:61,column:5}},type:"if",locations:[{start:{line:59,column:4},end:{line:61,column:5}},{start:{line:59,column:4},end:{line:61,column:5}}],line:59},"7":{loc:{start:{line:81,column:8},end:{line:94,column:9}},type:"if",locations:[{start:{line:81,column:8},end:{line:94,column:9}},{start:{line:81,column:8},end:{line:94,column:9}}],line:81},"8":{loc:{start:{line:81,column:12},end:{line:81,column:45}},type:"binary-expr",locations:[{start:{line:81,column:12},end:{line:81,column:25}},{start:{line:81,column:29},end:{line:81,column:45}}],line:81},"9":{loc:{start:{line:84,column:12},end:{line:89,column:13}},type:"if",locations:[{start:{line:84,column:12},end:{line:89,column:13}},{start:{line:84,column:12},end:{line:89,column:13}}],line:84},"10":{loc:{start:{line:162,column:4},end:{line:164,column:5}},type:"if",locations:[{start:{line:162,column:4},end:{line:164,column:5}},{start:{line:162,column:4},end:{line:164,column:5}}],line:162},"11":{loc:{start:{line:166,column:4},end:{line:169,column:5}},type:"if",locations:[{start:{line:166,column:4},end:{line:169,column:5}},{start:{line:166,column:4},end:{line:169,column:5}}],line:166}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0]},inputSourceMap:{version:3,file:"/Users/malynch/D/tracerbench/packages/cli/src/helpers/log-compare-results.ts",sources:["/Users/malynch/D/tracerbench/packages/cli/src/helpers/log-compare-results.ts"],names:[],mappings:"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",sourcesContent:["import { Command } from \"@oclif/command\";\nimport { ISevenFigureSummary, Stats } from \"@tracerbench/stats\";\nimport * as chalk from \"chalk\";\n\nimport { fidelityLookup } from \"../command-config\";\nimport { ICompareFlags } from \"../commands/compare\";\nimport {\n  bucketPhaseValues,\n  formatPhaseData,\n  HTMLSectionRenderData,\n  ITracerBenchTraceResult,\n  PAGE_LOAD_TIME,\n} from \"./create-consumable-html\";\nimport TBTable from \"./tb-table\";\nimport { chalkScheme } from \"./utils\";\n\nexport interface ICompareJSONResult {\n  heading: string;\n  phaseName: string;\n  isSignificant: boolean;\n  estimatorDelta: string;\n  controlSampleCount: number;\n  experimentSampleCount: number;\n  confidenceInterval: string[];\n  controlSevenFigureSummary: ISevenFigureSummary;\n  experimentSevenFigureSummary: ISevenFigureSummary;\n}\n\nexport interface ICompareJSONResults {\n  benchmarkTableData: ICompareJSONResult[];\n  phaseTableData: ICompareJSONResult[];\n  areResultsSignificant: boolean;\n  isBelowRegressionThreshold: boolean;\n}\n\n/**\n * If fidelity is at acceptable number, return true if any of the phase results were significant\n *\n * @param fidelity - Use this to determine if the sample count is too low\n * @param benchmarkIsSigArray - Array of strings of either \"Yes\" or \"No\" from TBTable\n * @param phaseIsSigArray - Array of strings of either \"Yes\" or \"No\" from TBTable\n */\nexport function anyResultsSignificant(\n  fidelity: number,\n  benchmarkIsSigArray: boolean[],\n  phaseIsSigArray: boolean[]\n): boolean {\n  // if fidelity !== 'test'\n  if (fidelity > fidelityLookup.test) {\n    return benchmarkIsSigArray.includes(true) || phaseIsSigArray.includes(true);\n  }\n  return false;\n}\n\n/**\n * If any phase of the experiment has regressed slower beyond the threshold limit returns false; otherwise true\n *\n * @param regressionThreshold - Positive number in milliseconds the experiment has regressed slower eg 100\n * @param benchmarkTableEstimatorDeltas - Array of Estimator Deltas for the Benchmark Table\n * @param phaseTableEstimatorDeltas - Array of Estimator Deltas for the Phase Table\n */\nexport function allBelowRegressionThreshold(\n  regressionThreshold: number | undefined,\n  benchmarkTableEstimatorDeltas: number[],\n  phaseTableEstimatorDeltas: number[]\n): boolean {\n  function isBelowThreshold(n: number): boolean {\n    const limit = regressionThreshold as number;\n    // if the delta is a negative number and abs(delta) greater than threshold return false\n    return n < 0 && Math.abs(n) > limit ? false : true;\n  }\n\n  if (typeof regressionThreshold === \"number\") {\n    // concat estimator deltas from all phases\n    const deltas: number[] = benchmarkTableEstimatorDeltas.concat(\n      phaseTableEstimatorDeltas\n    );\n    // if the experiment is slower beyond the threshold return false;\n    return deltas.every(isBelowThreshold);\n  }\n  return true;\n}\n\n/**\n * Output meta data about the benchmark run and FYI messages to the user.\n *\n * @param cli - This is expected to be a \"compare\" Command instance\n * @param cliFlags - This is expected to be CLI flags from the \"compare\" command\n * @param isBelowRegressionThreshold - Boolean indicating if there were any deltas below \"regressionThreshold\" flag\n */\nexport function outputRunMetaMessagesAndWarnings(\n  cli: Command,\n  cliFlags: Partial<ICompareFlags>,\n  isBelowRegressionThreshold: boolean\n): void {\n  const { fidelity, regressionThreshold } = cliFlags;\n  const LOW_FIDELITY_WARNING =\n    'The fidelity setting was set below the recommended for a viable result. Rerun TracerBench with at least \"fidelity=low\"';\n\n  if ((fidelity as number) < 10) {\n    cli.log(\n      `\\n${chalkScheme.blackBgYellow(\n        `    ${chalkScheme.white(\"WARNING\")}    `\n      )} ${chalkScheme.warning(` ${LOW_FIDELITY_WARNING}`)}\\n`\n    );\n  }\n\n  if (!isBelowRegressionThreshold) {\n    cli.log(\n      `\\n${chalkScheme.blackBgRed(\n        `    ${chalkScheme.white(\"!! ALERT\")}    `\n      )} ${chalk.red(\n        ` Regression found exceeding the set regression threshold of ${regressionThreshold}ms`\n      )}\\n`\n    );\n  }\n\n  return;\n}\n\n/**\n * Generate the summary section for the results.\n *\n * For each phase, color the significance appropriately by the HL estimated difference. Red for regression, green for\n * improvement. Color with monotone if not significant.\n *\n * @param cli - This is expected to be a \"compare\" Command instance\n * @param phaseResultsFormatted - Array of results from calling formatPhaseData\n */\nexport function outputSummaryReport(\n  cli: Command,\n  phaseResultsFormatted: Array<\n    Pick<\n      HTMLSectionRenderData,\n      \"phase\" | \"hlDiff\" | \"isSignificant\" | \"ciMin\" | \"ciMax\"\n    >\n  >\n): void {\n  cli.log(\n    `\\n${chalkScheme.blackBgBlue(\n      `    ${chalkScheme.white(\"Benchmark Results Summary\")}    `\n    )}`\n  );\n\n  cli.log(`\\n${chalk.red(\"Red\")} color means there was a regression.`);\n  cli.log(`${chalk.green(\"Green\")} color means there was an improvement.\\n`);\n  phaseResultsFormatted.forEach((phaseData) => {\n    const { phase, hlDiff, isSignificant, ciMin, ciMax } = phaseData;\n    let msg = `${chalk.bold(phase)} phase `;\n\n    if (isSignificant && Math.abs(hlDiff)) {\n      let coloredDiff;\n\n      msg += \"estimated difference \";\n\n      if (hlDiff < 0) {\n        coloredDiff = chalk.red(\n          `+${Math.abs(hlDiff)}ms [${ciMax * -1}ms to ${ciMin * -1}ms]`\n        );\n      } else {\n        coloredDiff = chalk.green(\n          `-${Math.abs(hlDiff)}ms [${ciMax * -1}ms to ${ciMin * -1}ms]`\n        );\n      }\n\n      msg += `${coloredDiff}`;\n    } else {\n      msg += `${chalk.grey(\"no difference\")}`;\n    }\n    cli.log(msg);\n  });\n\n  return;\n}\n\n/**\n * Return the trimmed compare results in JSON format\n *\n * This is propogated as the default return all the way up to the Compare command directly\n * without the need for the legacy --json flag\n *\n * @param benchmarkTableData - ICompareJSONResult[] from instantiated TBTable#getData() for the top level duration\n * @param phaseTableData - ICompareJSONResult[] from instantiated TBTable#getData() for all sub phases of the top level duration\n * @param areResultsSignificant - A culled boolean if any results are significant this is truthy\n * @param isBelowRegressionThreshold - A culled boolean to check if all results are below the config regression threshold\n * @return jsonResults - A JSON.stringified return of the trimmed compare results\n */\nexport function outputJSONResults(\n  benchmarkTableData: ICompareJSONResult[],\n  phaseTableData: ICompareJSONResult[],\n  areResultsSignificant: boolean,\n  isBelowRegressionThreshold: boolean\n): string {\n  const jsonResults: ICompareJSONResults = {\n    benchmarkTableData,\n    phaseTableData,\n    areResultsSignificant,\n    isBelowRegressionThreshold,\n  };\n  return JSON.stringify(jsonResults);\n}\n\n/**\n * Collect and analyze the data for the different phases for the experiment and control set and output the result to the console.\n *\n * @param results - This is expected to be generated from tracerbench core's runner. Containing the dataset for experiment and control\n * @param flags - This is expected to be CLI flags from the \"compare\" command\n * @param cli - This is expected to be a \"compare\" Command instance\n */\nexport async function logCompareResults(\n  results: ITracerBenchTraceResult[],\n  flags: Pick<ICompareFlags, \"fidelity\" | \"regressionThreshold\" | \"isCIEnv\">,\n  cli: Command\n): Promise<string> {\n  const { fidelity } = flags;\n  const benchmarkTable = new TBTable(\"Initial Render\");\n  const phaseTable = new TBTable(\"Sub Phase of Duration\");\n\n  const controlData = results.find((element) => {\n    return element.set === \"control\";\n  }) as ITracerBenchTraceResult;\n\n  const experimentData = results.find((element) => {\n    return element.set === \"experiment\";\n  }) as ITracerBenchTraceResult;\n\n  const valuesByPhaseControl = bucketPhaseValues(controlData.samples);\n  const valuesByPhaseExperiment = bucketPhaseValues(experimentData.samples);\n\n  const subPhases = Object.keys(valuesByPhaseControl).filter(\n    (k) => k !== PAGE_LOAD_TIME\n  );\n  const phaseResultsFormatted: Array<Pick<\n    HTMLSectionRenderData,\n    \"phase\" | \"hlDiff\" | \"isSignificant\" | \"ciMin\" | \"ciMax\"\n  >> = [];\n\n  const durationStats = new Stats({\n    control: valuesByPhaseControl.duration,\n    experiment: valuesByPhaseExperiment.duration,\n    name: \"duration\",\n  });\n  benchmarkTable.display.push(durationStats);\n  phaseResultsFormatted.push(\n    formatPhaseData(\n      valuesByPhaseControl[PAGE_LOAD_TIME],\n      valuesByPhaseExperiment[PAGE_LOAD_TIME],\n      PAGE_LOAD_TIME\n    )\n  );\n\n  subPhases.forEach((phase) => {\n    phaseTable.display.push(\n      new Stats({\n        control: valuesByPhaseControl[phase],\n        experiment: valuesByPhaseExperiment[phase],\n        name: phase,\n      })\n    );\n    phaseResultsFormatted.push(\n      formatPhaseData(\n        valuesByPhaseControl[phase],\n        valuesByPhaseExperiment[phase],\n        phase\n      )\n    );\n  });\n\n  let isBelowRegressionThreshold = true;\n  const benchmarkTableData = benchmarkTable.getData();\n  const phaseTableData = phaseTable.getData();\n  const areResultsSignificant = anyResultsSignificant(\n    fidelity as number,\n    benchmarkTable.isSigArray,\n    phaseTable.isSigArray\n  );\n  if (areResultsSignificant) {\n    isBelowRegressionThreshold = allBelowRegressionThreshold(\n      fidelity as number,\n      benchmarkTable.estimatorDeltas,\n      phaseTable.estimatorDeltas\n    );\n  }\n\n  // only log the tables when NOT in a CI env\n  if (!flags.isCIEnv) {\n    cli.log(`\\n\\n${benchmarkTable.render()}`);\n    cli.log(`\\n\\n${phaseTable.render()}`);\n  }\n\n  outputRunMetaMessagesAndWarnings(cli, flags, isBelowRegressionThreshold);\n  outputSummaryReport(cli, phaseResultsFormatted);\n\n  return outputJSONResults(\n    benchmarkTableData,\n    phaseTableData,\n    areResultsSignificant,\n    isBelowRegressionThreshold\n  );\n}\n"]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"22af74ca1c446a9621215872659daabdc507a297"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];cov_1ljvm1xizr=function(){return actualCoverage;};return actualCoverage;}cov_1ljvm1xizr().s[0]++;Object.defineProperty(exports,"__esModule",{value:true});const stats_1=(cov_1ljvm1xizr().s[1]++,require("@tracerbench/stats"));const chalk=(cov_1ljvm1xizr().s[2]++,require("chalk"));const command_config_1=(cov_1ljvm1xizr().s[3]++,require("../command-config"));const create_consumable_html_1=(cov_1ljvm1xizr().s[4]++,require("./create-consumable-html"));const tb_table_1=(cov_1ljvm1xizr().s[5]++,require("./tb-table"));const utils_1=(cov_1ljvm1xizr().s[6]++,require("./utils"));/**
 * If fidelity is at acceptable number, return true if any of the phase results were significant
 *
 * @param fidelity - Use this to determine if the sample count is too low
 * @param benchmarkIsSigArray - Array of strings of either "Yes" or "No" from TBTable
 * @param phaseIsSigArray - Array of strings of either "Yes" or "No" from TBTable
 */function anyResultsSignificant(fidelity,benchmarkIsSigArray,phaseIsSigArray){cov_1ljvm1xizr().f[0]++;cov_1ljvm1xizr().s[7]++;// if fidelity !== 'test'
if(fidelity>command_config_1.fidelityLookup.test){cov_1ljvm1xizr().b[0][0]++;cov_1ljvm1xizr().s[8]++;return(cov_1ljvm1xizr().b[1][0]++,benchmarkIsSigArray.includes(true))||(cov_1ljvm1xizr().b[1][1]++,phaseIsSigArray.includes(true));}else{cov_1ljvm1xizr().b[0][1]++;}cov_1ljvm1xizr().s[9]++;return false;}cov_1ljvm1xizr().s[10]++;exports.anyResultsSignificant=anyResultsSignificant;/**
 * If any phase of the experiment has regressed slower beyond the threshold limit returns false; otherwise true
 *
 * @param regressionThreshold - Positive number in milliseconds the experiment has regressed slower eg 100
 * @param benchmarkTableEstimatorDeltas - Array of Estimator Deltas for the Benchmark Table
 * @param phaseTableEstimatorDeltas - Array of Estimator Deltas for the Phase Table
 */function allBelowRegressionThreshold(regressionThreshold,benchmarkTableEstimatorDeltas,phaseTableEstimatorDeltas){cov_1ljvm1xizr().f[1]++;function isBelowThreshold(n){cov_1ljvm1xizr().f[2]++;const limit=(cov_1ljvm1xizr().s[11]++,regressionThreshold);// if the delta is a negative number and abs(delta) greater than threshold return false
cov_1ljvm1xizr().s[12]++;return(cov_1ljvm1xizr().b[3][0]++,n<0)&&(cov_1ljvm1xizr().b[3][1]++,Math.abs(n)>limit)?(cov_1ljvm1xizr().b[2][0]++,false):(cov_1ljvm1xizr().b[2][1]++,true);}cov_1ljvm1xizr().s[13]++;if(typeof regressionThreshold==="number"){cov_1ljvm1xizr().b[4][0]++;// concat estimator deltas from all phases
const deltas=(cov_1ljvm1xizr().s[14]++,benchmarkTableEstimatorDeltas.concat(phaseTableEstimatorDeltas));// if the experiment is slower beyond the threshold return false;
cov_1ljvm1xizr().s[15]++;return deltas.every(isBelowThreshold);}else{cov_1ljvm1xizr().b[4][1]++;}cov_1ljvm1xizr().s[16]++;return true;}cov_1ljvm1xizr().s[17]++;exports.allBelowRegressionThreshold=allBelowRegressionThreshold;/**
 * Output meta data about the benchmark run and FYI messages to the user.
 *
 * @param cli - This is expected to be a "compare" Command instance
 * @param cliFlags - This is expected to be CLI flags from the "compare" command
 * @param isBelowRegressionThreshold - Boolean indicating if there were any deltas below "regressionThreshold" flag
 */function outputRunMetaMessagesAndWarnings(cli,cliFlags,isBelowRegressionThreshold){cov_1ljvm1xizr().f[3]++;const{fidelity,regressionThreshold}=(cov_1ljvm1xizr().s[18]++,cliFlags);const LOW_FIDELITY_WARNING=(cov_1ljvm1xizr().s[19]++,'The fidelity setting was set below the recommended for a viable result. Rerun TracerBench with at least "fidelity=low"');cov_1ljvm1xizr().s[20]++;if(fidelity<10){cov_1ljvm1xizr().b[5][0]++;cov_1ljvm1xizr().s[21]++;cli.log(`\n${utils_1.chalkScheme.blackBgYellow(`    ${utils_1.chalkScheme.white("WARNING")}    `)} ${utils_1.chalkScheme.warning(` ${LOW_FIDELITY_WARNING}`)}\n`);}else{cov_1ljvm1xizr().b[5][1]++;}cov_1ljvm1xizr().s[22]++;if(!isBelowRegressionThreshold){cov_1ljvm1xizr().b[6][0]++;cov_1ljvm1xizr().s[23]++;cli.log(`\n${utils_1.chalkScheme.blackBgRed(`    ${utils_1.chalkScheme.white("!! ALERT")}    `)} ${chalk.red(` Regression found exceeding the set regression threshold of ${regressionThreshold}ms`)}\n`);}else{cov_1ljvm1xizr().b[6][1]++;}cov_1ljvm1xizr().s[24]++;return;}cov_1ljvm1xizr().s[25]++;exports.outputRunMetaMessagesAndWarnings=outputRunMetaMessagesAndWarnings;/**
 * Generate the summary section for the results.
 *
 * For each phase, color the significance appropriately by the HL estimated difference. Red for regression, green for
 * improvement. Color with monotone if not significant.
 *
 * @param cli - This is expected to be a "compare" Command instance
 * @param phaseResultsFormatted - Array of results from calling formatPhaseData
 */function outputSummaryReport(cli,phaseResultsFormatted){cov_1ljvm1xizr().f[4]++;cov_1ljvm1xizr().s[26]++;cli.log(`\n${utils_1.chalkScheme.blackBgBlue(`    ${utils_1.chalkScheme.white("Benchmark Results Summary")}    `)}`);cov_1ljvm1xizr().s[27]++;cli.log(`\n${chalk.red("Red")} color means there was a regression.`);cov_1ljvm1xizr().s[28]++;cli.log(`${chalk.green("Green")} color means there was an improvement.\n`);cov_1ljvm1xizr().s[29]++;phaseResultsFormatted.forEach(phaseData=>{cov_1ljvm1xizr().f[5]++;const{phase,hlDiff,isSignificant,ciMin,ciMax}=(cov_1ljvm1xizr().s[30]++,phaseData);let msg=(cov_1ljvm1xizr().s[31]++,`${chalk.bold(phase)} phase `);cov_1ljvm1xizr().s[32]++;if((cov_1ljvm1xizr().b[8][0]++,isSignificant)&&(cov_1ljvm1xizr().b[8][1]++,Math.abs(hlDiff))){cov_1ljvm1xizr().b[7][0]++;let coloredDiff;cov_1ljvm1xizr().s[33]++;msg+="estimated difference ";cov_1ljvm1xizr().s[34]++;if(hlDiff<0){cov_1ljvm1xizr().b[9][0]++;cov_1ljvm1xizr().s[35]++;coloredDiff=chalk.red(`+${Math.abs(hlDiff)}ms [${ciMax*-1}ms to ${ciMin*-1}ms]`);}else{cov_1ljvm1xizr().b[9][1]++;cov_1ljvm1xizr().s[36]++;coloredDiff=chalk.green(`-${Math.abs(hlDiff)}ms [${ciMax*-1}ms to ${ciMin*-1}ms]`);}cov_1ljvm1xizr().s[37]++;msg+=`${coloredDiff}`;}else{cov_1ljvm1xizr().b[7][1]++;cov_1ljvm1xizr().s[38]++;msg+=`${chalk.grey("no difference")}`;}cov_1ljvm1xizr().s[39]++;cli.log(msg);});cov_1ljvm1xizr().s[40]++;return;}cov_1ljvm1xizr().s[41]++;exports.outputSummaryReport=outputSummaryReport;/**
 * Return the trimmed compare results in JSON format
 *
 * This is propogated as the default return all the way up to the Compare command directly
 * without the need for the legacy --json flag
 *
 * @param benchmarkTableData - ICompareJSONResult[] from instantiated TBTable#getData() for the top level duration
 * @param phaseTableData - ICompareJSONResult[] from instantiated TBTable#getData() for all sub phases of the top level duration
 * @param areResultsSignificant - A culled boolean if any results are significant this is truthy
 * @param isBelowRegressionThreshold - A culled boolean to check if all results are below the config regression threshold
 * @return jsonResults - A JSON.stringified return of the trimmed compare results
 */function outputJSONResults(benchmarkTableData,phaseTableData,areResultsSignificant,isBelowRegressionThreshold){cov_1ljvm1xizr().f[6]++;const jsonResults=(cov_1ljvm1xizr().s[42]++,{benchmarkTableData,phaseTableData,areResultsSignificant,isBelowRegressionThreshold});cov_1ljvm1xizr().s[43]++;return JSON.stringify(jsonResults);}cov_1ljvm1xizr().s[44]++;exports.outputJSONResults=outputJSONResults;/**
 * Collect and analyze the data for the different phases for the experiment and control set and output the result to the console.
 *
 * @param results - This is expected to be generated from tracerbench core's runner. Containing the dataset for experiment and control
 * @param flags - This is expected to be CLI flags from the "compare" command
 * @param cli - This is expected to be a "compare" Command instance
 */async function logCompareResults(results,flags,cli){cov_1ljvm1xizr().f[7]++;const{fidelity}=(cov_1ljvm1xizr().s[45]++,flags);const benchmarkTable=(cov_1ljvm1xizr().s[46]++,new tb_table_1.default("Initial Render"));const phaseTable=(cov_1ljvm1xizr().s[47]++,new tb_table_1.default("Sub Phase of Duration"));const controlData=(cov_1ljvm1xizr().s[48]++,results.find(element=>{cov_1ljvm1xizr().f[8]++;cov_1ljvm1xizr().s[49]++;return element.set==="control";}));const experimentData=(cov_1ljvm1xizr().s[50]++,results.find(element=>{cov_1ljvm1xizr().f[9]++;cov_1ljvm1xizr().s[51]++;return element.set==="experiment";}));const valuesByPhaseControl=(cov_1ljvm1xizr().s[52]++,create_consumable_html_1.bucketPhaseValues(controlData.samples));const valuesByPhaseExperiment=(cov_1ljvm1xizr().s[53]++,create_consumable_html_1.bucketPhaseValues(experimentData.samples));const subPhases=(cov_1ljvm1xizr().s[54]++,Object.keys(valuesByPhaseControl).filter(k=>{cov_1ljvm1xizr().f[10]++;cov_1ljvm1xizr().s[55]++;return k!==create_consumable_html_1.PAGE_LOAD_TIME;}));const phaseResultsFormatted=(cov_1ljvm1xizr().s[56]++,[]);const durationStats=(cov_1ljvm1xizr().s[57]++,new stats_1.Stats({control:valuesByPhaseControl.duration,experiment:valuesByPhaseExperiment.duration,name:"duration"}));cov_1ljvm1xizr().s[58]++;benchmarkTable.display.push(durationStats);cov_1ljvm1xizr().s[59]++;phaseResultsFormatted.push(create_consumable_html_1.formatPhaseData(valuesByPhaseControl[create_consumable_html_1.PAGE_LOAD_TIME],valuesByPhaseExperiment[create_consumable_html_1.PAGE_LOAD_TIME],create_consumable_html_1.PAGE_LOAD_TIME));cov_1ljvm1xizr().s[60]++;subPhases.forEach(phase=>{cov_1ljvm1xizr().f[11]++;cov_1ljvm1xizr().s[61]++;phaseTable.display.push(new stats_1.Stats({control:valuesByPhaseControl[phase],experiment:valuesByPhaseExperiment[phase],name:phase}));cov_1ljvm1xizr().s[62]++;phaseResultsFormatted.push(create_consumable_html_1.formatPhaseData(valuesByPhaseControl[phase],valuesByPhaseExperiment[phase],phase));});let isBelowRegressionThreshold=(cov_1ljvm1xizr().s[63]++,true);const benchmarkTableData=(cov_1ljvm1xizr().s[64]++,benchmarkTable.getData());const phaseTableData=(cov_1ljvm1xizr().s[65]++,phaseTable.getData());const areResultsSignificant=(cov_1ljvm1xizr().s[66]++,anyResultsSignificant(fidelity,benchmarkTable.isSigArray,phaseTable.isSigArray));cov_1ljvm1xizr().s[67]++;if(areResultsSignificant){cov_1ljvm1xizr().b[10][0]++;cov_1ljvm1xizr().s[68]++;isBelowRegressionThreshold=allBelowRegressionThreshold(fidelity,benchmarkTable.estimatorDeltas,phaseTable.estimatorDeltas);}else{cov_1ljvm1xizr().b[10][1]++;}// only log the tables when NOT in a CI env
cov_1ljvm1xizr().s[69]++;if(!flags.isCIEnv){cov_1ljvm1xizr().b[11][0]++;cov_1ljvm1xizr().s[70]++;cli.log(`\n\n${benchmarkTable.render()}`);cov_1ljvm1xizr().s[71]++;cli.log(`\n\n${phaseTable.render()}`);}else{cov_1ljvm1xizr().b[11][1]++;}cov_1ljvm1xizr().s[72]++;outputRunMetaMessagesAndWarnings(cli,flags,isBelowRegressionThreshold);cov_1ljvm1xizr().s[73]++;outputSummaryReport(cli,phaseResultsFormatted);cov_1ljvm1xizr().s[74]++;return outputJSONResults(benchmarkTableData,phaseTableData,areResultsSignificant,isBelowRegressionThreshold);}cov_1ljvm1xizr().s[75]++;exports.logCompareResults=logCompareResults;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL21hbHluY2gvRC90cmFjZXJiZW5jaC9wYWNrYWdlcy9jbGkvc3JjL2hlbHBlcnMvbG9nLWNvbXBhcmUtcmVzdWx0cy50cyIsInNvdXJjZXMiOlsiL1VzZXJzL21hbHluY2gvRC90cmFjZXJiZW5jaC9wYWNrYWdlcy9jbGkvc3JjL2hlbHBlcnMvbG9nLWNvbXBhcmUtcmVzdWx0cy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUNBLDhDQUFnRTtBQUNoRSwrQkFBK0I7QUFFL0Isc0RBQW1EO0FBRW5ELHFFQU1rQztBQUNsQyx5Q0FBaUM7QUFDakMsbUNBQXNDO0FBcUJ0Qzs7Ozs7O0dBTUc7QUFDSCxTQUFnQixxQkFBcUIsQ0FDbkMsUUFBZ0IsRUFDaEIsbUJBQThCLEVBQzlCLGVBQTBCO0lBRTFCLHlCQUF5QjtJQUN6QixJQUFJLFFBQVEsR0FBRywrQkFBYyxDQUFDLElBQUksRUFBRTtRQUNsQyxPQUFPLG1CQUFtQixDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsSUFBSSxlQUFlLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDO0tBQzdFO0lBQ0QsT0FBTyxLQUFLLENBQUM7QUFDZixDQUFDO0FBVkQsc0RBVUM7QUFFRDs7Ozs7O0dBTUc7QUFDSCxTQUFnQiwyQkFBMkIsQ0FDekMsbUJBQXVDLEVBQ3ZDLDZCQUF1QyxFQUN2Qyx5QkFBbUM7SUFFbkMsU0FBUyxnQkFBZ0IsQ0FBQyxDQUFTO1FBQ2pDLE1BQU0sS0FBSyxHQUFHLG1CQUE2QixDQUFDO1FBQzVDLHVGQUF1RjtRQUN2RixPQUFPLENBQUMsR0FBRyxDQUFDLElBQUksSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDO0lBQ3JELENBQUM7SUFFRCxJQUFJLE9BQU8sbUJBQW1CLEtBQUssUUFBUSxFQUFFO1FBQzNDLDBDQUEwQztRQUMxQyxNQUFNLE1BQU0sR0FBYSw2QkFBNkIs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QztJQUNwRCxNQUFNLGNBQWMsR0FBRyxVQUFVLENBQUMsT0FBTyxFQUFFLENBQUM7SUFDNUMsTUFBTSxxQkFBcUIsR0FBRyxxQkFBcUIsQ0FDakQsUUFBa0IsRUFDbEIsY0FBYyxDQUFDLFVBQVUsRUFDekIsVUFBVSxDQUFDLFVBQVUsQ0FDdEIsQ0FBQztJQUNGLElBQUkscUJBQXFCLEVBQUU7UUFDekIsMEJBQTBCLEdBQUcsMkJBQTJCLENBQ3RELFFBQWtCLEVBQ2xCLGNBQWMsQ0FBQyxlQUFlLEVBQzlCLFVBQVUsQ0FBQyxlQUFlLENBQzNCLENBQUM7S0FDSDtJQUVELDJDQUEyQztJQUMzQyxJQUFJLENBQUMsS0FBSyxDQUFDLE9BQU8sRUFBRTtRQUNsQixHQUFHLENBQUMsR0FBRyxDQUFDLE9BQU8sY0FBYyxDQUFDLE1BQU0sRUFBRSxFQUFFLENBQUMsQ0FBQztRQUMxQyxHQUFHLENBQUMsR0FBRyxDQUFDLE9BQU8sVUFBVSxDQUFDLE1BQU0sRUFBRSxFQUFFLENBQUMsQ0FBQztLQUN2QztJQUVELGdDQUFnQyxDQUFDLEdBQUcsRUFBRSxLQUFLLEVBQUUsMEJBQTBCLENBQUMsQ0FBQztJQUN6RSxtQkFBbUIsQ0FBQyxHQUFHLEVBQUUscUJBQXFCLENBQUMsQ0FBQztJQUVoRCxPQUFPLGlCQUFpQixDQUN0QixrQkFBa0IsRUFDbEIsY0FBYyxFQUNkLHFCQUFxQixFQUNyQiwwQkFBMEIsQ0FDM0IsQ0FBQztBQUNKLENBQUM7QUExRkQsOENBMEZDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tbWFuZCB9IGZyb20gXCJAb2NsaWYvY29tbWFuZFwiO1xuaW1wb3J0IHsgSVNldmVuRmlndXJlU3VtbWFyeSwgU3RhdHMgfSBmcm9tIFwiQHRyYWNlcmJlbmNoL3N0YXRzXCI7XG5pbXBvcnQgKiBhcyBjaGFsayBmcm9tIFwiY2hhbGtcIjtcblxuaW1wb3J0IHsgZmlkZWxpdHlMb29rdXAgfSBmcm9tIFwiLi4vY29tbWFuZC1jb25maWdcIjtcbmltcG9ydCB7IElDb21wYXJlRmxhZ3MgfSBmcm9tIFwiLi4vY29tbWFuZHMvY29tcGFyZVwiO1xuaW1wb3J0IHtcbiAgYnVja2V0UGhhc2VWYWx1ZXMsXG4gIGZvcm1hdFBoYXNlRGF0YSxcbiAgSFRNTFNlY3Rpb25SZW5kZXJEYXRhLFxuICBJVHJhY2VyQmVuY2hUcmFjZVJlc3VsdCxcbiAgUEFHRV9MT0FEX1RJTUUsXG59IGZyb20gXCIuL2NyZWF0ZS1jb25zdW1hYmxlLWh0bWxcIjtcbmltcG9ydCBUQlRhYmxlIGZyb20gXCIuL3RiLXRhYmxlXCI7XG5pbXBvcnQgeyBjaGFsa1NjaGVtZSB9IGZyb20gXCIuL3V0aWxzXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUNvbXBhcmVKU09OUmVzdWx0IHtcbiAgaGVhZGluZzogc3RyaW5nO1xuICBwaGFzZU5hbWU6IHN0cmluZztcbiAgaXNTaWduaWZpY2FudDogYm9vbGVhbjtcbiAgZXN0aW1hdG9yRGVsdGE6IHN0cmluZztcbiAgY29udHJvbFNhbXBsZUNvdW50OiBudW1iZXI7XG4gIGV4cGVyaW1lbnRTYW1wbGVDb3VudDogbnVtYmVyO1xuICBjb25maWRlbmNlSW50ZXJ2YWw6IHN0cmluZ1tdO1xuICBjb250cm9sU2V2ZW5GaWd1cmVTdW1tYXJ5OiBJU2V2ZW5GaWd1cmVTdW1tYXJ5O1xuICBleHBlcmltZW50U2V2ZW5GaWd1cmVTdW1tYXJ5OiBJU2V2ZW5GaWd1cmVTdW1tYXJ5O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElDb21wYXJlSlNPTlJlc3VsdHMge1xuICBiZW5jaG1hcmtUYWJsZURhdGE6IElDb21wYXJlSlNPTlJlc3VsdFtdO1xuICBwaGFzZVRhYmxlRGF0YTogSUNvbXBhcmVKU09OUmVzdWx0W107XG4gIGFyZVJlc3VsdHNTaWduaWZpY2FudDogYm9vbGVhbjtcbiAgaXNCZWxvd1JlZ3Jlc3Npb25UaHJlc2hvbGQ6IGJvb2xlYW47XG59XG5cbi8qKlxuICogSWYgZmlkZWxpdHkgaXMgYXQgYWNjZXB0YWJsZSBudW1iZXIsIHJldHVybiB0cnVlIGlmIGFueSBvZiB0aGUgcGhhc2UgcmVzdWx0cyB3ZXJlIHNpZ25pZmljYW50XG4gKlxuICogQHBhcmFtIGZpZGVsaXR5IC0gVXNlIHRoaXMgdG8gZGV0ZXJtaW5lIGlmIHRoZSBzYW1wbGUgY291bnQgaXMgdG9vIGxvd1xuICogQHBhcmFtIGJlbmNobWFya0lzU2lnQXJyYXkgLSBBcnJheSBvZiBzdHJpbmdzIG9mIGVpdGhlciBcIlllc1wiIG9yIFwiTm9cIiBmcm9tIFRCVGFibGVcbiAqIEBwYXJhbSBwaGFzZUlzU2lnQXJyYXkgLSBBcnJheSBvZiBzdHJpbmdzIG9mIGVpdGhlciBcIlllc1wiIG9yIFwiTm9cIiBmcm9tIFRCVGFibGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFueVJlc3VsdHNTaWduaWZpY2FudChcbiAgZmlkZWxpdHk6IG51bWJlcixcbiAgYmVuY2htYXJrSXNTaWdBcnJheTogYm9vbGVhbltdLFxuICBwaGFzZUlzU2lnQXJyYXk6IGJvb2xlYW5bXVxuKTogYm9vbGVhbiB7XG4gIC8vIGlmIGZpZGVsaXR5ICE9PSAndGVzdCdcbiAgaWYgKGZpZGVsaXR5ID4gZmlkZWxpdHlMb29rdXAudGVzdCkge1xuICAgIHJldHVybiBiZW5jaG1hcmtJc1NpZ0FycmF5LmluY2x1ZGVzKHRydWUpIHx8IHBoYXNlSXNTaWdBcnJheS5pbmNsdWRlcyh0cnVlKTtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5cbi8qKlxuICogSWYgYW55IHBoYXNlIG9mIHRoZSBleHBlcmltZW50IGhhcyByZWdyZXNzZWQgc2xvd2VyIGJleW9uZCB0aGUgdGhyZXNob2xkIGxpbWl0IHJldHVybnMgZmFsc2U7IG90aGVyd2lzZSB0cnVlXG4gKlxuICogQHBhcmFtIHJlZ3Jlc3Npb25UaHJlc2hvbGQgLSBQb3NpdGl2ZSBudW1iZXIgaW4gbWlsbGlzZWNvbmRzIHRoZSBleHBlcmltZW50IGhhcyByZWdyZXNzZWQgc2xvd2VyIGVnIDEwMFxuICogQHBhcmFtIGJlbmNobWFya1RhYmxlRXN0aW1hdG9yRGVsdGFzIC0gQXJyYXkgb2YgRXN0aW1hdG9yIERlbHRhcyBmb3IgdGhlIEJlbmNobWFyayBUYWJsZVxuICogQHBhcmFtIHBoYXNlVGFibGVFc3RpbWF0b3JEZWx0YXMgLSBBcnJheSBvZiBFc3RpbWF0b3IgRGVsdGFzIGZvciB0aGUgUGhhc2UgVGFibGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFsbEJlbG93UmVncmVzc2lvblRocmVzaG9sZChcbiAgcmVncmVzc2lvblRocmVzaG9sZDogbnVtYmVyIHwgdW5kZWZpbmVkLFxuICBiZW5jaG1hcmtUYWJsZUVzdGltYXRvckRlbHRhczogbnVtYmVyW10sXG4gIHBoYXNlVGFibGVFc3RpbWF0b3JEZWx0YXM6IG51bWJlcltdXG4pOiBib29sZWFuIHtcbiAgZnVuY3Rpb24gaXNCZWxvd1RocmVzaG9sZChuOiBudW1iZXIpOiBib29sZWFuIHtcbiAgICBjb25zdCBsaW1pdCA9IHJlZ3Jlc3Npb25UaHJlc2hvbGQgYXMgbnVtYmVyO1xuICAgIC8vIGlmIHRoZSBkZWx0YSBpcyBhIG5lZ2F0aXZlIG51bWJlciBhbmQgYWJzKGRlbHRhKSBncmVhdGVyIHRoYW4gdGhyZXNob2xkIHJldHVybiBmYWxzZVxuICAgIHJldHVybiBuIDwgMCAmJiBNYXRoLmFicyhuKSA+IGxpbWl0ID8gZmFsc2UgOiB0cnVlO1xuICB9XG5cbiAgaWYgKHR5cGVvZiByZWdyZXNzaW9uVGhyZXNob2xkID09PSBcIm51bWJlclwiKSB7XG4gICAgLy8gY29uY2F0IGVzdGltYXRvciBkZWx0YXMgZnJvbSBhbGwgcGhhc2VzXG4gICAgY29uc3QgZGVsdGFzOiBudW1iZXJbXSA9IGJlbmNobWFya1RhYmxlRXN0aW1hdG9yRGVsdGFzLmNvbmNhdChcbiAgICAgIHBoYXNlVGFibGVFc3RpbWF0b3JEZWx0YXNcbiAgICApO1xuICAgIC8vIGlmIHRoZSBleHBlcmltZW50IGlzIHNsb3dlciBiZXlvbmQgdGhlIHRocmVzaG9sZCByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIGRlbHRhcy5ldmVyeShpc0JlbG93VGhyZXNob2xkKTtcbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cblxuLyoqXG4gKiBPdXRwdXQgbWV0YSBkYXRhIGFib3V0IHRoZSBiZW5jaG1hcmsgcnVuIGFuZCBGWUkgbWVzc2FnZXMgdG8gdGhlIHVzZXIuXG4gKlxuICogQHBhcmFtIGNsaSAtIFRoaXMgaXMgZXhwZWN0ZWQgdG8gYmUgYSBcImNvbXBhcmVcIiBDb21tYW5kIGluc3RhbmNlXG4gKiBAcGFyYW0gY2xpRmxhZ3MgLSBUaGlzIGlzIGV4cGVjdGVkIHRvIGJlIENMSSBmbGFncyBmcm9tIHRoZSBcImNvbXBhcmVcIiBjb21tYW5kXG4gKiBAcGFyYW0gaXNCZWxvd1JlZ3Jlc3Npb25UaHJlc2hvbGQgLSBCb29sZWFuIGluZGljYXRpbmcgaWYgdGhlcmUgd2VyZSBhbnkgZGVsdGFzIGJlbG93IFwicmVncmVzc2lvblRocmVzaG9sZFwiIGZsYWdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG91dHB1dFJ1bk1ldGFNZXNzYWdlc0FuZFdhcm5pbmdzKFxuICBjbGk6IENvbW1hbmQsXG4gIGNsaUZsYWdzOiBQYXJ0aWFsPElDb21wYXJlRmxhZ3M+LFxuICBpc0JlbG93UmVncmVzc2lvblRocmVzaG9sZDogYm9vbGVhblxuKTogdm9pZCB7XG4gIGNvbnN0IHsgZmlkZWxpdHksIHJlZ3Jlc3Npb25UaHJlc2hvbGQgfSA9IGNsaUZsYWdzO1xuICBjb25zdCBMT1dfRklERUxJVFlfV0FSTklORyA9XG4gICAgJ1RoZSBmaWRlbGl0eSBzZXR0aW5nIHdhcyBzZXQgYmVsb3cgdGhlIHJlY29tbWVuZGVkIGZvciBhIHZpYWJsZSByZXN1bHQuIFJlcnVuIFRyYWNlckJlbmNoIHdpdGggYXQgbGVhc3QgXCJmaWRlbGl0eT1sb3dcIic7XG5cbiAgaWYgKChmaWRlbGl0eSBhcyBudW1iZXIpIDwgMTApIHtcbiAgICBjbGkubG9nKFxuICAgICAgYFxcbiR7Y2hhbGtTY2hlbWUuYmxhY2tCZ1llbGxvdyhcbiAgICAgICAgYCAgICAke2NoYWxrU2NoZW1lLndoaXRlKFwiV0FSTklOR1wiKX0gICAgYFxuICAgICAgKX0gJHtjaGFsa1NjaGVtZS53YXJuaW5nKGAgJHtMT1dfRklERUxJVFlfV0FSTklOR31gKX1cXG5gXG4gICAgKTtcbiAgfVxuXG4gIGlmICghaXNCZWxvd1JlZ3Jlc3Npb25UaHJlc2hvbGQpIHtcbiAgICBjbGkubG9nKFxuICAgICAgYFxcbiR7Y2hhbGtTY2hlbWUuYmxhY2tCZ1JlZChcbiAgICAgICAgYCAgICAke2NoYWxrU2NoZW1lLndoaXRlKFwiISEgQUxFUlRcIil9ICAgIGBcbiAgICAgICl9ICR7Y2hhbGsucmVkKFxuICAgICAgICBgIFJlZ3Jlc3Npb24gZm91bmQgZXhjZWVkaW5nIHRoZSBzZXQgcmVncmVzc2lvbiB0aHJlc2hvbGQgb2YgJHtyZWdyZXNzaW9uVGhyZXNob2xkfW1zYFxuICAgICAgKX1cXG5gXG4gICAgKTtcbiAgfVxuXG4gIHJldHVybjtcbn1cblxuLyoqXG4gKiBHZW5lcmF0ZSB0aGUgc3VtbWFyeSBzZWN0aW9uIGZvciB0aGUgcmVzdWx0cy5cbiAqXG4gKiBGb3IgZWFjaCBwaGFzZSwgY29sb3IgdGhlIHNpZ25pZmljYW5jZSBhcHByb3ByaWF0ZWx5IGJ5IHRoZSBITCBlc3RpbWF0ZWQgZGlmZmVyZW5jZS4gUmVkIGZvciByZWdyZXNzaW9uLCBncmVlbiBmb3JcbiAqIGltcHJvdmVtZW50LiBDb2xvciB3aXRoIG1vbm90b25lIGlmIG5vdCBzaWduaWZpY2FudC5cbiAqXG4gKiBAcGFyYW0gY2xpIC0gVGhpcyBpcyBleHBlY3RlZCB0byBiZSBhIFwiY29tcGFyZVwiIENvbW1hbmQgaW5zdGFuY2VcbiAqIEBwYXJhbSBwaGFzZVJlc3VsdHNGb3JtYXR0ZWQgLSBBcnJheSBvZiByZXN1bHRzIGZyb20gY2FsbGluZyBmb3JtYXRQaGFzZURhdGFcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG91dHB1dFN1bW1hcnlSZXBvcnQoXG4gIGNsaTogQ29tbWFuZCxcbiAgcGhhc2VSZXN1bHRzRm9ybWF0dGVkOiBBcnJheTxcbiAgICBQaWNrPFxuICAgICAgSFRNTFNlY3Rpb25SZW5kZXJEYXRhLFxuICAgICAgXCJwaGFzZVwiIHwgXCJobERpZmZcIiB8IFwiaXNTaWduaWZpY2FudFwiIHwgXCJjaU1pblwiIHwgXCJjaU1heFwiXG4gICAgPlxuICA+XG4pOiB2b2lkIHtcbiAgY2xpLmxvZyhcbiAgICBgXFxuJHtjaGFsa1NjaGVtZS5ibGFja0JnQmx1ZShcbiAgICAgIGAgICAgJHtjaGFsa1NjaGVtZS53aGl0ZShcIkJlbmNobWFyayBSZXN1bHRzIFN1bW1hcnlcIil9ICAgIGBcbiAgICApfWBcbiAgKTtcblxuICBjbGkubG9nKGBcXG4ke2NoYWxrLnJlZChcIlJlZFwiKX0gY29sb3IgbWVhbnMgdGhlcmUgd2FzIGEgcmVncmVzc2lvbi5gKTtcbiAgY2xpLmxvZyhgJHtjaGFsay5ncmVlbihcIkdyZWVuXCIpfSBjb2xvciBtZWFucyB0aGVyZSB3YXMgYW4gaW1wcm92ZW1lbnQuXFxuYCk7XG4gIHBoYXNlUmVzdWx0c0Zvcm1hdHRlZC5mb3JFYWNoKChwaGFzZURhdGEpID0+IHtcbiAgICBjb25zdCB7IHBoYXNlLCBobERpZmYsIGlzU2lnbmlmaWNhbnQsIGNpTWluLCBjaU1heCB9ID0gcGhhc2VEYXRhO1xuICAgIGxldCBtc2cgPSBgJHtjaGFsay5ib2xkKHBoYXNlKX0gcGhhc2UgYDtcblxuICAgIGlmIChpc1NpZ25pZmljYW50ICYmIE1hdGguYWJzKGhsRGlmZikpIHtcbiAgICAgIGxldCBjb2xvcmVkRGlmZjtcblxuICAgICAgbXNnICs9IFwiZXN0aW1hdGVkIGRpZmZlcmVuY2UgXCI7XG5cbiAgICAgIGlmIChobERpZmYgPCAwKSB7XG4gICAgICAgIGNvbG9yZWREaWZmID0gY2hhbGsucmVkKFxuICAgICAgICAgIGArJHtNYXRoLmFicyhobERpZmYpfW1zIFske2NpTWF4ICogLTF9bXMgdG8gJHtjaU1pbiAqIC0xfW1zXWBcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbG9yZWREaWZmID0gY2hhbGsuZ3JlZW4oXG4gICAgICAgICAgYC0ke01hdGguYWJzKGhsRGlmZil9bXMgWyR7Y2lNYXggKiAtMX1tcyB0byAke2NpTWluICogLTF9bXNdYFxuICAgICAgICApO1xuICAgICAgfVxuXG4gICAgICBtc2cgKz0gYCR7Y29sb3JlZERpZmZ9YDtcbiAgICB9IGVsc2Uge1xuICAgICAgbXNnICs9IGAke2NoYWxrLmdyZXkoXCJubyBkaWZmZXJlbmNlXCIpfWA7XG4gICAgfVxuICAgIGNsaS5sb2cobXNnKTtcbiAgfSk7XG5cbiAgcmV0dXJuO1xufVxuXG4vKipcbiAqIFJldHVybiB0aGUgdHJpbW1lZCBjb21wYXJlIHJlc3VsdHMgaW4gSlNPTiBmb3JtYXRcbiAqXG4gKiBUaGlzIGlzIHByb3BvZ2F0ZWQgYXMgdGhlIGRlZmF1bHQgcmV0dXJuIGFsbCB0aGUgd2F5IHVwIHRvIHRoZSBDb21wYXJlIGNvbW1hbmQgZGlyZWN0bHlcbiAqIHdpdGhvdXQgdGhlIG5lZWQgZm9yIHRoZSBsZWdhY3kgLS1qc29uIGZsYWdcbiAqXG4gKiBAcGFyYW0gYmVuY2htYXJrVGFibGVEYXRhIC0gSUNvbXBhcmVKU09OUmVzdWx0W10gZnJvbSBpbnN0YW50aWF0ZWQgVEJUYWJsZSNnZXREYXRhKCkgZm9yIHRoZSB0b3AgbGV2ZWwgZHVyYXRpb25cbiAqIEBwYXJhbSBwaGFzZVRhYmxlRGF0YSAtIElDb21wYXJlSlNPTlJlc3VsdFtdIGZyb20gaW5zdGFudGlhdGVkIFRCVGFibGUjZ2V0RGF0YSgpIGZvciBhbGwgc3ViIHBoYXNlcyBvZiB0aGUgdG9wIGxldmVsIGR1cmF0aW9uXG4gKiBAcGFyYW0gYXJlUmVzdWx0c1NpZ25pZmljYW50IC0gQSBjdWxsZWQgYm9vbGVhbiBpZiBhbnkgcmVzdWx0cyBhcmUgc2lnbmlmaWNhbnQgdGhpcyBpcyB0cnV0aHlcbiAqIEBwYXJhbSBpc0JlbG93UmVncmVzc2lvblRocmVzaG9sZCAtIEEgY3VsbGVkIGJvb2xlYW4gdG8gY2hlY2sgaWYgYWxsIHJlc3VsdHMgYXJlIGJlbG93IHRoZSBjb25maWcgcmVncmVzc2lvbiB0aHJlc2hvbGRcbiAqIEByZXR1cm4ganNvblJlc3VsdHMgLSBBIEpTT04uc3RyaW5naWZpZWQgcmV0dXJuIG9mIHRoZSB0cmltbWVkIGNvbXBhcmUgcmVzdWx0c1xuICovXG5leHBvcnQgZnVuY3Rpb24gb3V0cHV0SlNPTlJlc3VsdHMoXG4gIGJlbmNobWFya1RhYmxlRGF0YTogSUNvbXBhcmVKU09OUmVzdWx0W10sXG4gIHBoYXNlVGFibGVEYXRhOiBJQ29tcGFyZUpTT05SZXN1bHRbXSxcbiAgYXJlUmVzdWx0c1NpZ25pZmljYW50OiBib29sZWFuLFxuICBpc0JlbG93UmVncmVzc2lvblRocmVzaG9sZDogYm9vbGVhblxuKTogc3RyaW5nIHtcbiAgY29uc3QganNvblJlc3VsdHM6IElDb21wYXJlSlNPTlJlc3VsdHMgPSB7XG4gICAgYmVuY2htYXJrVGFibGVEYXRhLFxuICAgIHBoYXNlVGFibGVEYXRhLFxuICAgIGFyZVJlc3VsdHNTaWduaWZpY2FudCxcbiAgICBpc0JlbG93UmVncmVzc2lvblRocmVzaG9sZCxcbiAgfTtcbiAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGpzb25SZXN1bHRzKTtcbn1cblxuLyoqXG4gKiBDb2xsZWN0IGFuZCBhbmFseXplIHRoZSBkYXRhIGZvciB0aGUgZGlmZmVyZW50IHBoYXNlcyBmb3IgdGhlIGV4cGVyaW1lbnQgYW5kIGNvbnRyb2wgc2V0IGFuZCBvdXRwdXQgdGhlIHJlc3VsdCB0byB0aGUgY29uc29sZS5cbiAqXG4gKiBAcGFyYW0gcmVzdWx0cyAtIFRoaXMgaXMgZXhwZWN0ZWQgdG8gYmUgZ2VuZXJhdGVkIGZyb20gdHJhY2VyYmVuY2ggY29yZSdzIHJ1bm5lci4gQ29udGFpbmluZyB0aGUgZGF0YXNldCBmb3IgZXhwZXJpbWVudCBhbmQgY29udHJvbFxuICogQHBhcmFtIGZsYWdzIC0gVGhpcyBpcyBleHBlY3RlZCB0byBiZSBDTEkgZmxhZ3MgZnJvbSB0aGUgXCJjb21wYXJlXCIgY29tbWFuZFxuICogQHBhcmFtIGNsaSAtIFRoaXMgaXMgZXhwZWN0ZWQgdG8gYmUgYSBcImNvbXBhcmVcIiBDb21tYW5kIGluc3RhbmNlXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsb2dDb21wYXJlUmVzdWx0cyhcbiAgcmVzdWx0czogSVRyYWNlckJlbmNoVHJhY2VSZXN1bHRbXSxcbiAgZmxhZ3M6IFBpY2s8SUNvbXBhcmVGbGFncywgXCJmaWRlbGl0eVwiIHwgXCJyZWdyZXNzaW9uVGhyZXNob2xkXCIgfCBcImlzQ0lFbnZcIj4sXG4gIGNsaTogQ29tbWFuZFxuKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgY29uc3QgeyBmaWRlbGl0eSB9ID0gZmxhZ3M7XG4gIGNvbnN0IGJlbmNobWFya1RhYmxlID0gbmV3IFRCVGFibGUoXCJJbml0aWFsIFJlbmRlclwiKTtcbiAgY29uc3QgcGhhc2VUYWJsZSA9IG5ldyBUQlRhYmxlKFwiU3ViIFBoYXNlIG9mIER1cmF0aW9uXCIpO1xuXG4gIGNvbnN0IGNvbnRyb2xEYXRhID0gcmVzdWx0cy5maW5kKChlbGVtZW50KSA9PiB7XG4gICAgcmV0dXJuIGVsZW1lbnQuc2V0ID09PSBcImNvbnRyb2xcIjtcbiAgfSkgYXMgSVRyYWNlckJlbmNoVHJhY2VSZXN1bHQ7XG5cbiAgY29uc3QgZXhwZXJpbWVudERhdGEgPSByZXN1bHRzLmZpbmQoKGVsZW1lbnQpID0+IHtcbiAgICByZXR1cm4gZWxlbWVudC5zZXQgPT09IFwiZXhwZXJpbWVudFwiO1xuICB9KSBhcyBJVHJhY2VyQmVuY2hUcmFjZVJlc3VsdDtcblxuICBjb25zdCB2YWx1ZXNCeVBoYXNlQ29udHJvbCA9IGJ1Y2tldFBoYXNlVmFsdWVzKGNvbnRyb2xEYXRhLnNhbXBsZXMpO1xuICBjb25zdCB2YWx1ZXNCeVBoYXNlRXhwZXJpbWVudCA9IGJ1Y2tldFBoYXNlVmFsdWVzKGV4cGVyaW1lbnREYXRhLnNhbXBsZXMpO1xuXG4gIGNvbnN0IHN1YlBoYXNlcyA9IE9iamVjdC5rZXlzKHZhbHVlc0J5UGhhc2VDb250cm9sKS5maWx0ZXIoXG4gICAgKGspID0+IGsgIT09IFBBR0VfTE9BRF9USU1FXG4gICk7XG4gIGNvbnN0IHBoYXNlUmVzdWx0c0Zvcm1hdHRlZDogQXJyYXk8UGljazxcbiAgICBIVE1MU2VjdGlvblJlbmRlckRhdGEsXG4gICAgXCJwaGFzZVwiIHwgXCJobERpZmZcIiB8IFwiaXNTaWduaWZpY2FudFwiIHwgXCJjaU1pblwiIHwgXCJjaU1heFwiXG4gID4+ID0gW107XG5cbiAgY29uc3QgZHVyYXRpb25TdGF0cyA9IG5ldyBTdGF0cyh7XG4gICAgY29udHJvbDogdmFsdWVzQnlQaGFzZUNvbnRyb2wuZHVyYXRpb24sXG4gICAgZXhwZXJpbWVudDogdmFsdWVzQnlQaGFzZUV4cGVyaW1lbnQuZHVyYXRpb24sXG4gICAgbmFtZTogXCJkdXJhdGlvblwiLFxuICB9KTtcbiAgYmVuY2htYXJrVGFibGUuZGlzcGxheS5wdXNoKGR1cmF0aW9uU3RhdHMpO1xuICBwaGFzZVJlc3VsdHNGb3JtYXR0ZWQucHVzaChcbiAgICBmb3JtYXRQaGFzZURhdGEoXG4gICAgICB2YWx1ZXNCeVBoYXNlQ29udHJvbFtQQUdFX0xPQURfVElNRV0sXG4gICAgICB2YWx1ZXNCeVBoYXNlRXhwZXJpbWVudFtQQUdFX0xPQURfVElNRV0sXG4gICAgICBQQUdFX0xPQURfVElNRVxuICAgIClcbiAgKTtcblxuICBzdWJQaGFzZXMuZm9yRWFjaCgocGhhc2UpID0+IHtcbiAgICBwaGFzZVRhYmxlLmRpc3BsYXkucHVzaChcbiAgICAgIG5ldyBTdGF0cyh7XG4gICAgICAgIGNvbnRyb2w6IHZhbHVlc0J5UGhhc2VDb250cm9sW3BoYXNlXSxcbiAgICAgICAgZXhwZXJpbWVudDogdmFsdWVzQnlQaGFzZUV4cGVyaW1lbnRbcGhhc2VdLFxuICAgICAgICBuYW1lOiBwaGFzZSxcbiAgICAgIH0pXG4gICAgKTtcbiAgICBwaGFzZVJlc3VsdHNGb3JtYXR0ZWQucHVzaChcbiAgICAgIGZvcm1hdFBoYXNlRGF0YShcbiAgICAgICAgdmFsdWVzQnlQaGFzZUNvbnRyb2xbcGhhc2VdLFxuICAgICAgICB2YWx1ZXNCeVBoYXNlRXhwZXJpbWVudFtwaGFzZV0sXG4gICAgICAgIHBoYXNlXG4gICAgICApXG4gICAgKTtcbiAgfSk7XG5cbiAgbGV0IGlzQmVsb3dSZWdyZXNzaW9uVGhyZXNob2xkID0gdHJ1ZTtcbiAgY29uc3QgYmVuY2htYXJrVGFibGVEYXRhID0gYmVuY2htYXJrVGFibGUuZ2V0RGF0YSgpO1xuICBjb25zdCBwaGFzZVRhYmxlRGF0YSA9IHBoYXNlVGFibGUuZ2V0RGF0YSgpO1xuICBjb25zdCBhcmVSZXN1bHRzU2lnbmlmaWNhbnQgPSBhbnlSZXN1bHRzU2lnbmlmaWNhbnQoXG4gICAgZmlkZWxpdHkgYXMgbnVtYmVyLFxuICAgIGJlbmNobWFya1RhYmxlLmlzU2lnQXJyYXksXG4gICAgcGhhc2VUYWJsZS5pc1NpZ0FycmF5XG4gICk7XG4gIGlmIChhcmVSZXN1bHRzU2lnbmlmaWNhbnQpIHtcbiAgICBpc0JlbG93UmVncmVzc2lvblRocmVzaG9sZCA9IGFsbEJlbG93UmVncmVzc2lvblRocmVzaG9sZChcbiAgICAgIGZpZGVsaXR5IGFzIG51bWJlcixcbiAgICAgIGJlbmNobWFya1RhYmxlLmVzdGltYXRvckRlbHRhcyxcbiAgICAgIHBoYXNlVGFibGUuZXN0aW1hdG9yRGVsdGFzXG4gICAgKTtcbiAgfVxuXG4gIC8vIG9ubHkgbG9nIHRoZSB0YWJsZXMgd2hlbiBOT1QgaW4gYSBDSSBlbnZcbiAgaWYgKCFmbGFncy5pc0NJRW52KSB7XG4gICAgY2xpLmxvZyhgXFxuXFxuJHtiZW5jaG1hcmtUYWJsZS5yZW5kZXIoKX1gKTtcbiAgICBjbGkubG9nKGBcXG5cXG4ke3BoYXNlVGFibGUucmVuZGVyKCl9YCk7XG4gIH1cblxuICBvdXRwdXRSdW5NZXRhTWVzc2FnZXNBbmRXYXJuaW5ncyhjbGksIGZsYWdzLCBpc0JlbG93UmVncmVzc2lvblRocmVzaG9sZCk7XG4gIG91dHB1dFN1bW1hcnlSZXBvcnQoY2xpLCBwaGFzZVJlc3VsdHNGb3JtYXR0ZWQpO1xuXG4gIHJldHVybiBvdXRwdXRKU09OUmVzdWx0cyhcbiAgICBiZW5jaG1hcmtUYWJsZURhdGEsXG4gICAgcGhhc2VUYWJsZURhdGEsXG4gICAgYXJlUmVzdWx0c1NpZ25pZmljYW50LFxuICAgIGlzQmVsb3dSZWdyZXNzaW9uVGhyZXNob2xkXG4gICk7XG59XG4iXX0=
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9tYWx5bmNoL0QvdHJhY2VyYmVuY2gvcGFja2FnZXMvY2xpL3NyYy9oZWxwZXJzL2xvZy1jb21wYXJlLXJlc3VsdHMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjQ0eEJBQ0EsS0FBQSxDQUFBLE9BQUEsMEJBQUEsT0FBQSxDQUFBLG9CQUFBLENBQUEsQ0FBQSxDQUNBLEtBQUEsQ0FBQSxLQUFBLDBCQUFBLE9BQUEsQ0FBQSxPQUFBLENBQUEsQ0FBQSxDQUVBLEtBQUEsQ0FBQSxnQkFBQSwwQkFBQSxPQUFBLENBQUEsbUJBQUEsQ0FBQSxDQUFBLENBRUEsS0FBQSxDQUFBLHdCQUFBLDBCQUFBLE9BQUEsQ0FBQSwwQkFBQSxDQUFBLENBQUEsQ0FPQSxLQUFBLENBQUEsVUFBQSwwQkFBQSxPQUFBLENBQUEsWUFBQSxDQUFBLENBQUEsQ0FDQSxLQUFBLENBQUEsT0FBQSwwQkFBQSxPQUFBLENBQUEsU0FBQSxDQUFBLENBQUEsQ0FxQkE7Ozs7OztHQU9BLFFBQWdCLENBQUEscUJBQWhCLENBQ0UsUUFERixDQUVFLG1CQUZGLENBR0UsZUFIRixDQUc0QixpREFFMUI7QUFDQSxHQUFJLFFBQVEsQ0FBRyxnQkFBQSxDQUFBLGNBQUEsQ0FBZSxJQUE5QixDQUFvQyxvREFDbEMsTUFBTyw0QkFBQSxtQkFBbUIsQ0FBQyxRQUFwQixDQUE2QixJQUE3QixnQ0FBc0MsZUFBZSxDQUFDLFFBQWhCLENBQXlCLElBQXpCLENBQXRDLENBQVAsQ0FDRCxDQUZELGlDQUgwQix3QkFNMUIsTUFBTyxNQUFQLENBQ0QsQyx5QkFWRCxPQUFBLENBQUEscUJBQUEsQ0FBQSxxQkFBQSxDQVlBOzs7Ozs7R0FPQSxRQUFnQixDQUFBLDJCQUFoQixDQUNFLG1CQURGLENBRUUsNkJBRkYsQ0FHRSx5QkFIRixDQUdxQyx5QkFFbkMsUUFBUyxDQUFBLGdCQUFULENBQTBCLENBQTFCLENBQW1DLHlCQUNqQyxLQUFNLENBQUEsS0FBSywyQkFBRyxtQkFBSCxDQUFYLENBQ0E7QUFG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SyxDQUFDLE9BQVgsQ0FBb0Isc0RBQ2xCLEdBQUcsQ0FBQyxHQUFKLENBQVEsT0FBTyxjQUFjLENBQUMsTUFBZixFQUF1QixFQUF0QyxFQURrQix5QkFFbEIsR0FBRyxDQUFDLEdBQUosQ0FBUSxPQUFPLFVBQVUsQ0FBQyxNQUFYLEVBQW1CLEVBQWxDLEVBQ0QsQ0FIRCxrQ0F6RVkseUJBOEVaLGdDQUFnQyxDQUFDLEdBQUQsQ0FBTSxLQUFOLENBQWEsMEJBQWIsQ0FBaEMsQ0E5RVkseUJBK0VaLG1CQUFtQixDQUFDLEdBQUQsQ0FBTSxxQkFBTixDQUFuQixDQS9FWSx5QkFpRlosTUFBTyxDQUFBLGlCQUFpQixDQUN0QixrQkFEc0IsQ0FFdEIsY0FGc0IsQ0FHdEIscUJBSHNCLENBSXRCLDBCQUpzQixDQUF4QixDQU1ELEMseUJBMUZELE9BQUEsQ0FBQSxpQkFBQSxDQUFBLGlCQUFBLEMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21tYW5kIH0gZnJvbSBcIkBvY2xpZi9jb21tYW5kXCI7XG5pbXBvcnQgeyBJU2V2ZW5GaWd1cmVTdW1tYXJ5LCBTdGF0cyB9IGZyb20gXCJAdHJhY2VyYmVuY2gvc3RhdHNcIjtcbmltcG9ydCAqIGFzIGNoYWxrIGZyb20gXCJjaGFsa1wiO1xuXG5pbXBvcnQgeyBmaWRlbGl0eUxvb2t1cCB9IGZyb20gXCIuLi9jb21tYW5kLWNvbmZpZ1wiO1xuaW1wb3J0IHsgSUNvbXBhcmVGbGFncyB9IGZyb20gXCIuLi9jb21tYW5kcy9jb21wYXJlXCI7XG5pbXBvcnQge1xuICBidWNrZXRQaGFzZVZhbHVlcyxcbiAgZm9ybWF0UGhhc2VEYXRhLFxuICBIVE1MU2VjdGlvblJlbmRlckRhdGEsXG4gIElUcmFjZXJCZW5jaFRyYWNlUmVzdWx0LFxuICBQQUdFX0xPQURfVElNRSxcbn0gZnJvbSBcIi4vY3JlYXRlLWNvbnN1bWFibGUtaHRtbFwiO1xuaW1wb3J0IFRCVGFibGUgZnJvbSBcIi4vdGItdGFibGVcIjtcbmltcG9ydCB7IGNoYWxrU2NoZW1lIH0gZnJvbSBcIi4vdXRpbHNcIjtcblxuZXhwb3J0IGludGVyZmFjZSBJQ29tcGFyZUpTT05SZXN1bHQge1xuICBoZWFkaW5nOiBzdHJpbmc7XG4gIHBoYXNlTmFtZTogc3RyaW5nO1xuICBpc1NpZ25pZmljYW50OiBib29sZWFuO1xuICBlc3RpbWF0b3JEZWx0YTogc3RyaW5nO1xuICBjb250cm9sU2FtcGxlQ291bnQ6IG51bWJlcjtcbiAgZXhwZXJpbWVudFNhbXBsZUNvdW50OiBudW1iZXI7XG4gIGNvbmZpZGVuY2VJbnRlcnZhbDogc3RyaW5nW107XG4gIGNvbnRyb2xTZXZlbkZpZ3VyZVN1bW1hcnk6IElTZXZlbkZpZ3VyZVN1bW1hcnk7XG4gIGV4cGVyaW1lbnRTZXZlbkZpZ3VyZVN1bW1hcnk6IElTZXZlbkZpZ3VyZVN1bW1hcnk7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUNvbXBhcmVKU09OUmVzdWx0cyB7XG4gIGJlbmNobWFya1RhYmxlRGF0YTogSUNvbXBhcmVKU09OUmVzdWx0W107XG4gIHBoYXNlVGFibGVEYXRhOiBJQ29tcGFyZUpTT05SZXN1bHRbXTtcbiAgYXJlUmVzdWx0c1NpZ25pZmljYW50OiBib29sZWFuO1xuICBpc0JlbG93UmVncmVzc2lvblRocmVzaG9sZDogYm9vbGVhbjtcbn1cblxuLyoqXG4gKiBJZiBmaWRlbGl0eSBpcyBhdCBhY2NlcHRhYmxlIG51bWJlciwgcmV0dXJuIHRydWUgaWYgYW55IG9mIHRoZSBwaGFzZSByZXN1bHRzIHdlcmUgc2lnbmlmaWNhbnRcbiAqXG4gKiBAcGFyYW0gZmlkZWxpdHkgLSBVc2UgdGhpcyB0byBkZXRlcm1pbmUgaWYgdGhlIHNhbXBsZSBjb3VudCBpcyB0b28gbG93XG4gKiBAcGFyYW0gYmVuY2htYXJrSXNTaWdBcnJheSAtIEFycmF5IG9mIHN0cmluZ3Mgb2YgZWl0aGVyIFwiWWVzXCIgb3IgXCJOb1wiIGZyb20gVEJUYWJsZVxuICogQHBhcmFtIHBoYXNlSXNTaWdBcnJheSAtIEFycmF5IG9mIHN0cmluZ3Mgb2YgZWl0aGVyIFwiWWVzXCIgb3IgXCJOb1wiIGZyb20gVEJUYWJsZVxuICovXG5leHBvcnQgZnVuY3Rpb24gYW55UmVzdWx0c1NpZ25pZmljYW50KFxuICBmaWRlbGl0eTogbnVtYmVyLFxuICBiZW5jaG1hcmtJc1NpZ0FycmF5OiBib29sZWFuW10sXG4gIHBoYXNlSXNTaWdBcnJheTogYm9vbGVhbltdXG4pOiBib29sZWFuIHtcbiAgLy8gaWYgZmlkZWxpdHkgIT09ICd0ZXN0J1xuICBpZiAoZmlkZWxpdHkgPiBmaWRlbGl0eUxvb2t1cC50ZXN0KSB7XG4gICAgcmV0dXJuIGJlbmNobWFya0lzU2lnQXJyYXkuaW5jbHVkZXModHJ1ZSkgfHwgcGhhc2VJc1NpZ0FycmF5LmluY2x1ZGVzKHRydWUpO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuLyoqXG4gKiBJZiBhbnkgcGhhc2Ugb2YgdGhlIGV4cGVyaW1lbnQgaGFzIHJlZ3Jlc3NlZCBzbG93ZXIgYmV5b25kIHRoZSB0aHJlc2hvbGQgbGltaXQgcmV0dXJucyBmYWxzZTsgb3RoZXJ3aXNlIHRydWVcbiAqXG4gKiBAcGFyYW0gcmVncmVzc2lvblRocmVzaG9sZCAtIFBvc2l0aXZlIG51bWJlciBpbiBtaWxsaXNlY29uZHMgdGhlIGV4cGVyaW1lbnQgaGFzIHJlZ3Jlc3NlZCBzbG93ZXIgZWcgMTAwXG4gKiBAcGFyYW0gYmVuY2htYXJrVGFibGVFc3RpbWF0b3JEZWx0YXMgLSBBcnJheSBvZiBFc3RpbWF0b3IgRGVsdGFzIGZvciB0aGUgQmVuY2htYXJrIFRhYmxlXG4gKiBAcGFyYW0gcGhhc2VUYWJsZUVzdGltYXRvckRlbHRhcyAtIEFycmF5IG9mIEVzdGltYXRvciBEZWx0YXMgZm9yIHRoZSBQaGFzZSBUYWJsZVxuICovXG5leHBvcnQgZnVuY3Rpb24gYWxsQmVsb3dSZWdyZXNzaW9uVGhyZXNob2xkKFxuICByZWdyZXNzaW9uVGhyZXNob2xkOiBudW1iZXIgfCB1bmRlZmluZWQsXG4gIGJlbmNobWFya1RhYmxlRXN0aW1hdG9yRGVsdGFzOiBudW1iZXJbXSxcbiAgcGhhc2VUYWJsZUVzdGltYXRvckRlbHRhczogbnVtYmVyW11cbik6IGJvb2xlYW4ge1xuICBmdW5jdGlvbiBpc0JlbG93VGhyZXNob2xkKG46IG51bWJlcik6IGJvb2xlYW4ge1xuICAgIGNvbnN0IGxpbWl0ID0gcmVncmVzc2lvblRocmVzaG9sZCBhcyBudW1iZXI7XG4gICAgLy8gaWYgdGhlIGRlbHRhIGlzIGEgbmVnYXRpdmUgbnVtYmVyIGFuZCBhYnMoZGVsdGEpIGdyZWF0ZXIgdGhhbiB0aHJlc2hvbGQgcmV0dXJuIGZhbHNlXG4gICAgcmV0dXJuIG4gPCAwICYmIE1hdGguYWJzKG4pID4gbGltaXQgPyBmYWxzZSA6IHRydWU7XG4gIH1cblxuICBpZiAodHlwZW9mIHJlZ3Jlc3Npb25UaHJlc2hvbGQgPT09IFwibnVtYmVyXCIpIHtcbiAgICAvLyBjb25jYXQgZXN0aW1hdG9yIGRlbHRhcyBmcm9tIGFsbCBwaGFzZXNcbiAgICBjb25zdCBkZWx0YXM6IG51bWJlcltdID0gYmVuY2htYXJrVGFibGVFc3RpbWF0b3JEZWx0YXMuY29uY2F0KFxuICAgICAgcGhhc2VUYWJsZUVzdGltYXRvckRlbHRhc1xuICAgICk7XG4gICAgLy8gaWYgdGhlIGV4cGVyaW1lbnQgaXMgc2xvd2VyIGJleW9uZCB0aGUgdGhyZXNob2xkIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gZGVsdGFzLmV2ZXJ5KGlzQmVsb3dUaHJlc2hvbGQpO1xuICB9XG4gIHJldHVybiB0cnVlO1xufVxuXG4vKipcbiAqIE91dHB1dCBtZXRhIGRhdGEgYWJvdXQgdGhlIGJlbmNobWFyayBydW4gYW5kIEZZSSBtZXNzYWdlcyB0byB0aGUgdXNlci5cbiAqXG4gKiBAcGFyYW0gY2xpIC0gVGhpcyBpcyBleHBlY3RlZCB0byBiZSBhIFwiY29tcGFyZVwiIENvbW1hbmQgaW5zdGFuY2VcbiAqIEBwYXJhbSBjbGlGbGFncyAtIFRoaXMgaXMgZXhwZWN0ZWQgdG8gYmUgQ0xJIGZsYWdzIGZyb20gdGhlIFwiY29tcGFyZVwiIGNvbW1hbmRcbiAqIEBwYXJhbSBpc0JlbG93UmVncmVzc2lvblRocmVzaG9sZCAtIEJvb2xlYW4gaW5kaWNhdGluZyBpZiB0aGVyZSB3ZXJlIGFueSBkZWx0YXMgYmVsb3cgXCJyZWdyZXNzaW9uVGhyZXNob2xkXCIgZmxhZ1xuICovXG5leHBvcnQgZnVuY3Rpb24gb3V0cHV0UnVuTWV0YU1lc3NhZ2VzQW5kV2FybmluZ3MoXG4gIGNsaTogQ29tbWFuZCxcbiAgY2xpRmxhZ3M6IFBhcnRpYWw8SUNvbXBhcmVGbGFncz4sXG4gIGlzQmVsb3dSZWdyZXNzaW9uVGhyZXNob2xkOiBib29sZWFuXG4pOiB2b2lkIHtcbiAgY29uc3QgeyBmaWRlbGl0eSwgcmVncmVzc2lvblRocmVzaG9sZCB9ID0gY2xpRmxhZ3M7XG4gIGNvbnN0IExPV19GSURFTElUWV9XQVJOSU5HID1cbiAgICAnVGhlIGZpZGVsaXR5IHNldHRpbmcgd2FzIHNldCBiZWxvdyB0aGUgcmVjb21tZW5kZWQgZm9yIGEgdmlhYmxlIHJlc3VsdC4gUmVydW4gVHJhY2VyQmVuY2ggd2l0aCBhdCBsZWFzdCBcImZpZGVsaXR5PWxvd1wiJztcblxuICBpZiAoKGZpZGVsaXR5IGFzIG51bWJlcikgPCAxMCkge1xuICAgIGNsaS5sb2coXG4gICAgICBgXFxuJHtjaGFsa1NjaGVtZS5ibGFja0JnWWVsbG93KFxuICAgICAgICBgICAgICR7Y2hhbGtTY2hlbWUud2hpdGUoXCJXQVJOSU5HXCIpfSAgICBgXG4gICAgICApfSAke2NoYWxrU2NoZW1lLndhcm5pbmcoYCAke0xPV19GSURFTElUWV9XQVJOSU5HfWApfVxcbmBcbiAgICApO1xuICB9XG5cbiAgaWYgKCFpc0JlbG93UmVncmVzc2lvblRocmVzaG9sZCkge1xuICAgIGNsaS5sb2coXG4gICAgICBgXFxuJHtjaGFsa1NjaGVtZS5ibGFja0JnUmVkKFxuICAgICAgICBgICAgICR7Y2hhbGtTY2hlbWUud2hpdGUoXCIhISBBTEVSVFwiKX0gICAgYFxuICAgICAgKX0gJHtjaGFsay5yZWQoXG4gICAgICAgIGAgUmVncmVzc2lvbiBmb3VuZCBleGNlZWRpbmcgdGhlIHNldCByZWdyZXNzaW9uIHRocmVzaG9sZCBvZiAke3JlZ3Jlc3Npb25UaHJlc2hvbGR9bXNgXG4gICAgICApfVxcbmBcbiAgICApO1xuICB9XG5cbiAgcmV0dXJuO1xufVxuXG4vKipcbiAqIEdlbmVyYXRlIHRoZSBzdW1tYXJ5IHNlY3Rpb24gZm9yIHRoZSByZXN1bHRzLlxuICpcbiAqIEZvciBlYWNoIHBoYXNlLCBjb2xvciB0aGUgc2lnbmlmaWNhbmNlIGFwcHJvcHJpYXRlbHkgYnkgdGhlIEhMIGVzdGltYXRlZCBkaWZmZXJlbmNlLiBSZWQgZm9yIHJlZ3Jlc3Npb24sIGdyZWVuIGZvclxuICogaW1wcm92ZW1lbnQuIENvbG9yIHdpdGggbW9ub3RvbmUgaWYgbm90IHNpZ25pZmljYW50LlxuICpcbiAqIEBwYXJhbSBjbGkgLSBUaGlzIGlzIGV4cGVjdGVkIHRvIGJlIGEgXCJjb21wYXJlXCIgQ29tbWFuZCBpbnN0YW5jZVxuICogQHBhcmFtIHBoYXNlUmVzdWx0c0Zvcm1hdHRlZCAtIEFycmF5IG9mIHJlc3VsdHMgZnJvbSBjYWxsaW5nIGZvcm1hdFBoYXNlRGF0YVxuICovXG5leHBvcnQgZnVuY3Rpb24gb3V0cHV0U3VtbWFyeVJlcG9ydChcbiAgY2xpOiBDb21tYW5kLFxuICBwaGFzZVJlc3VsdHNGb3JtYXR0ZWQ6IEFycmF5PFxuICAgIFBpY2s8XG4gICAgICBIVE1MU2VjdGlvblJlbmRlckRhdGEsXG4gICAgICBcInBoYXNlXCIgfCBcImhsRGlmZlwiIHwgXCJpc1NpZ25pZmljYW50XCIgfCBcImNpTWluXCIgfCBcImNpTWF4XCJcbiAgICA+XG4gID5cbik6IHZvaWQge1xuICBjbGkubG9nKFxuICAgIGBcXG4ke2NoYWxrU2NoZW1lLmJsYWNrQmdCbHVlKFxuICAgICAgYCAgICAke2NoYWxrU2NoZW1lLndoaXRlKFwiQmVuY2htYXJrIFJlc3VsdHMgU3VtbWFyeVwiKX0gICAgYFxuICAgICl9YFxuICApO1xuXG4gIGNsaS5sb2coYFxcbiR7Y2hhbGsucmVkKFwiUmVkXCIpfSBjb2xvciBtZWFucyB0aGVyZSB3YXMgYSByZWdyZXNzaW9uLmApO1xuICBjbGkubG9nKGAke2NoYWxrLmdyZWVuKFwiR3JlZW5cIil9IGNvbG9yIG1lYW5zIHRoZXJlIHdhcyBhbiBpbXByb3ZlbWVudC5cXG5gKTtcbiAgcGhhc2VSZXN1bHRzRm9ybWF0dGVkLmZvckVhY2goKHBoYXNlRGF0YSkgPT4ge1xuICAgIGNvbnN0IHsgcGhhc2UsIGhsRGlmZiwgaXNTaWduaWZpY2FudCwgY2lNaW4sIGNpTWF4IH0gPSBwaGFzZURhdGE7XG4gICAgbGV0IG1zZyA9IGAke2NoYWxrLmJvbGQocGhhc2UpfSBwaGFzZSBgO1xuXG4gICAgaWYgKGlzU2lnbmlmaWNhbnQgJiYgTWF0aC5hYnMoaGxEaWZmKSkge1xuICAgICAgbGV0IGNvbG9yZWREaWZmO1xuXG4gICAgICBtc2cgKz0gXCJlc3RpbWF0ZWQgZGlmZmVyZW5jZSBcIjtcblxuICAgICAgaWYgKGhsRGlmZiA8IDApIHtcbiAgICAgICAgY29sb3JlZERpZmYgPSBjaGFsay5yZWQoXG4gICAgICAgICAgYCske01hdGguYWJzKGhsRGlmZil9bXMgWyR7Y2lNYXggKiAtMX1tcyB0byAke2NpTWluICogLTF9bXNdYFxuICAgICAgICApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29sb3JlZERpZmYgPSBjaGFsay5ncmVlbihcbiAgICAgICAgICBgLSR7TWF0aC5hYnMoaGxEaWZmKX1tcyBbJHtjaU1heCAqIC0xfW1zIHRvICR7Y2lNaW4gKiAtMX1tc11gXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIG1zZyArPSBgJHtjb2xvcmVkRGlmZn1gO1xuICAgIH0gZWxzZSB7XG4gICAgICBtc2cgKz0gYCR7Y2hhbGsuZ3JleShcIm5vIGRpZmZlcmVuY2VcIil9YDtcbiAgICB9XG4gICAgY2xpLmxvZyhtc2cpO1xuICB9KTtcblxuICByZXR1cm47XG59XG5cbi8qKlxuICogUmV0dXJuIHRoZSB0cmltbWVkIGNvbXBhcmUgcmVzdWx0cyBpbiBKU09OIGZvcm1hdFxuICpcbiAqIFRoaXMgaXMgcHJvcG9nYXRlZCBhcyB0aGUgZGVmYXVsdCByZXR1cm4gYWxsIHRoZSB3YXkgdXAgdG8gdGhlIENvbXBhcmUgY29tbWFuZCBkaXJlY3RseVxuICogd2l0aG91dCB0aGUgbmVlZCBmb3IgdGhlIGxlZ2FjeSAtLWpzb24gZmxhZ1xuICpcbiAqIEBwYXJhbSBiZW5jaG1hcmtUYWJsZURhdGEgLSBJQ29tcGFyZUpTT05SZXN1bHRbXSBmcm9tIGluc3RhbnRpYXRlZCBUQlRhYmxlI2dldERhdGEoKSBmb3IgdGhlIHRvcCBsZXZlbCBkdXJhdGlvblxuICogQHBhcmFtIHBoYXNlVGFibGVEYXRhIC0gSUNvbXBhcmVKU09OUmVzdWx0W10gZnJvbSBpbnN0YW50aWF0ZWQgVEJUYWJsZSNnZXREYXRhKCkgZm9yIGFsbCBzdWIgcGhhc2VzIG9mIHRoZSB0b3AgbGV2ZWwgZHVyYXRpb25cbiAqIEBwYXJhbSBhcmVSZXN1bHRzU2lnbmlmaWNhbnQgLSBBIGN1bGxlZCBib29sZWFuIGlmIGFueSByZXN1bHRzIGFyZSBzaWduaWZpY2FudCB0aGlzIGlzIHRydXRoeVxuICogQHBhcmFtIGlzQmVsb3dSZWdyZXNzaW9uVGhyZXNob2xkIC0gQSBjdWxsZWQgYm9vbGVhbiB0byBjaGVjayBpZiBhbGwgcmVzdWx0cyBhcmUgYmVsb3cgdGhlIGNvbmZpZyByZWdyZXNzaW9uIHRocmVzaG9sZFxuICogQHJldHVybiBqc29uUmVzdWx0cyAtIEEgSlNPTi5zdHJpbmdpZmllZCByZXR1cm4gb2YgdGhlIHRyaW1tZWQgY29tcGFyZSByZXN1bHRzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBvdXRwdXRKU09OUmVzdWx0cyhcbiAgYmVuY2htYXJrVGFibGVEYXRhOiBJQ29tcGFyZUpTT05SZXN1bHRbXSxcbiAgcGhhc2VUYWJsZURhdGE6IElDb21wYXJlSlNPTlJlc3VsdFtdLFxuICBhcmVSZXN1bHRzU2lnbmlmaWNhbnQ6IGJvb2xlYW4sXG4gIGlzQmVsb3dSZWdyZXNzaW9uVGhyZXNob2xkOiBib29sZWFuXG4pOiBzdHJpbmcge1xuICBjb25zdCBqc29uUmVzdWx0czogSUNvbXBhcmVKU09OUmVzdWx0cyA9IHtcbiAgICBiZW5jaG1hcmtUYWJsZURhdGEsXG4gICAgcGhhc2VUYWJsZURhdGEsXG4gICAgYXJlUmVzdWx0c1NpZ25pZmljYW50LFxuICAgIGlzQmVsb3dSZWdyZXNzaW9uVGhyZXNob2xkLFxuICB9O1xuICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoanNvblJlc3VsdHMpO1xufVxuXG4vKipcbiAqIENvbGxlY3QgYW5kIGFuYWx5emUgdGhlIGRhdGEgZm9yIHRoZSBkaWZmZXJlbnQgcGhhc2VzIGZvciB0aGUgZXhwZXJpbWVudCBhbmQgY29udHJvbCBzZXQgYW5kIG91dHB1dCB0aGUgcmVzdWx0IHRvIHRoZSBjb25zb2xlLlxuICpcbiAqIEBwYXJhbSByZXN1bHRzIC0gVGhpcyBpcyBleHBlY3RlZCB0byBiZSBnZW5lcmF0ZWQgZnJvbSB0cmFjZXJiZW5jaCBjb3JlJ3MgcnVubmVyLiBDb250YWluaW5nIHRoZSBkYXRhc2V0IGZvciBleHBlcmltZW50IGFuZCBjb250cm9sXG4gKiBAcGFyYW0gZmxhZ3MgLSBUaGlzIGlzIGV4cGVjdGVkIHRvIGJlIENMSSBmbGFncyBmcm9tIHRoZSBcImNvbXBhcmVcIiBjb21tYW5kXG4gKiBAcGFyYW0gY2xpIC0gVGhpcyBpcyBleHBlY3RlZCB0byBiZSBhIFwiY29tcGFyZVwiIENvbW1hbmQgaW5zdGFuY2VcbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGxvZ0NvbXBhcmVSZXN1bHRzKFxuICByZXN1bHRzOiBJVHJhY2VyQmVuY2hUcmFjZVJlc3VsdFtdLFxuICBmbGFnczogUGljazxJQ29tcGFyZUZsYWdzLCBcImZpZGVsaXR5XCIgfCBcInJlZ3Jlc3Npb25UaHJlc2hvbGRcIiB8IFwiaXNDSUVudlwiPixcbiAgY2xpOiBDb21tYW5kXG4pOiBQcm9taXNlPHN0cmluZz4ge1xuICBjb25zdCB7IGZpZGVsaXR5IH0gPSBmbGFncztcbiAgY29uc3QgYmVuY2htYXJrVGFibGUgPSBuZXcgVEJUYWJsZShcIkluaXRpYWwgUmVuZGVyXCIpO1xuICBjb25zdCBwaGFzZVRhYmxlID0gbmV3IFRCVGFibGUoXCJTdWIgUGhhc2Ugb2YgRHVyYXRpb25cIik7XG5cbiAgY29uc3QgY29udHJvbERhdGEgPSByZXN1bHRzLmZpbmQoKGVsZW1lbnQpID0+IHtcbiAgICByZXR1cm4gZWxlbWVudC5zZXQgPT09IFwiY29udHJvbFwiO1xuICB9KSBhcyBJVHJhY2VyQmVuY2hUcmFjZVJlc3VsdDtcblxuICBjb25zdCBleHBlcmltZW50RGF0YSA9IHJlc3VsdHMuZmluZCgoZWxlbWVudCkgPT4ge1xuICAgIHJldHVybiBlbGVtZW50LnNldCA9PT0gXCJleHBlcmltZW50XCI7XG4gIH0pIGFzIElUcmFjZXJCZW5jaFRyYWNlUmVzdWx0O1xuXG4gIGNvbnN0IHZhbHVlc0J5UGhhc2VDb250cm9sID0gYnVja2V0UGhhc2VWYWx1ZXMoY29udHJvbERhdGEuc2FtcGxlcyk7XG4gIGNvbnN0IHZhbHVlc0J5UGhhc2VFeHBlcmltZW50ID0gYnVja2V0UGhhc2VWYWx1ZXMoZXhwZXJpbWVudERhdGEuc2FtcGxlcyk7XG5cbiAgY29uc3Qgc3ViUGhhc2VzID0gT2JqZWN0LmtleXModmFsdWVzQnlQaGFzZUNvbnRyb2wpLmZpbHRlcihcbiAgICAoaykgPT4gayAhPT0gUEFHRV9MT0FEX1RJTUVcbiAgKTtcbiAgY29uc3QgcGhhc2VSZXN1bHRzRm9ybWF0dGVkOiBBcnJheTxQaWNrPFxuICAgIEhUTUxTZWN0aW9uUmVuZGVyRGF0YSxcbiAgICBcInBoYXNlXCIgfCBcImhsRGlmZlwiIHwgXCJpc1NpZ25pZmljYW50XCIgfCBcImNpTWluXCIgfCBcImNpTWF4XCJcbiAgPj4gPSBbXTtcblxuICBjb25zdCBkdXJhdGlvblN0YXRzID0gbmV3IFN0YXRzKHtcbiAgICBjb250cm9sOiB2YWx1ZXNCeVBoYXNlQ29udHJvbC5kdXJhdGlvbixcbiAgICBleHBlcmltZW50OiB2YWx1ZXNCeVBoYXNlRXhwZXJpbWVudC5kdXJhdGlvbixcbiAgICBuYW1lOiBcImR1cmF0aW9uXCIsXG4gIH0pO1xuICBiZW5jaG1hcmtUYWJsZS5kaXNwbGF5LnB1c2goZHVyYXRpb25TdGF0cyk7XG4gIHBoYXNlUmVzdWx0c0Zvcm1hdHRlZC5wdXNoKFxuICAgIGZvcm1hdFBoYXNlRGF0YShcbiAgICAgIHZhbHVlc0J5UGhhc2VDb250cm9sW1BBR0VfTE9BRF9USU1FXSxcbiAgICAgIHZhbHVlc0J5UGhhc2VFeHBlcmltZW50W1BBR0VfTE9BRF9USU1FXSxcbiAgICAgIFBBR0VfTE9BRF9USU1FXG4gICAgKVxuICApO1xuXG4gIHN1YlBoYXNlcy5mb3JFYWNoKChwaGFzZSkgPT4ge1xuICAgIHBoYXNlVGFibGUuZGlzcGxheS5wdXNoKFxuICAgICAgbmV3IFN0YXRzKHtcbiAgICAgICAgY29udHJvbDogdmFsdWVzQnlQaGFzZUNvbnRyb2xbcGhhc2VdLFxuICAgICAgICBleHBlcmltZW50OiB2YWx1ZXNCeVBoYXNlRXhwZXJpbWVudFtwaGFzZV0sXG4gICAgICAgIG5hbWU6IHBoYXNlLFxuICAgICAgfSlcbiAgICApO1xuICAgIHBoYXNlUmVzdWx0c0Zvcm1hdHRlZC5wdXNoKFxuICAgICAgZm9ybWF0UGhhc2VEYXRhKFxuICAgICAgICB2YWx1ZXNCeVBoYXNlQ29udHJvbFtwaGFzZV0sXG4gICAgICAgIHZhbHVlc0J5UGhhc2VFeHBlcmltZW50W3BoYXNlXSxcbiAgICAgICAgcGhhc2VcbiAgICAgIClcbiAgICApO1xuICB9KTtcblxuICBsZXQgaXNCZWxvd1JlZ3Jlc3Npb25UaHJlc2hvbGQgPSB0cnVlO1xuICBjb25zdCBiZW5jaG1hcmtUYWJsZURhdGEgPSBiZW5jaG1hcmtUYWJsZS5nZXREYXRhKCk7XG4gIGNvbnN0IHBoYXNlVGFibGVEYXRhID0gcGhhc2VUYWJsZS5nZXREYXRhKCk7XG4gIGNvbnN0IGFyZVJlc3VsdHNTaWduaWZpY2FudCA9IGFueVJlc3VsdHNTaWduaWZpY2FudChcbiAgICBmaWRlbGl0eSBhcyBudW1iZXIsXG4gICAgYmVuY2htYXJrVGFibGUuaXNTaWdBcnJheSxcbiAgICBwaGFzZVRhYmxlLmlzU2lnQXJyYXlcbiAgKTtcbiAgaWYgKGFyZVJlc3VsdHNTaWduaWZpY2FudCkge1xuICAgIGlzQmVsb3dSZWdyZXNzaW9uVGhyZXNob2xkID0gYWxsQmVsb3dSZWdyZXNzaW9uVGhyZXNob2xkKFxuICAgICAgZmlkZWxpdHkgYXMgbnVtYmVyLFxuICAgICAgYmVuY2htYXJrVGFibGUuZXN0aW1hdG9yRGVsdGFzLFxuICAgICAgcGhhc2VUYWJsZS5lc3RpbWF0b3JEZWx0YXNcbiAgICApO1xuICB9XG5cbiAgLy8gb25seSBsb2cgdGhlIHRhYmxlcyB3aGVuIE5PVCBpbiBhIENJIGVudlxuICBpZiAoIWZsYWdzLmlzQ0lFbnYpIHtcbiAgICBjbGkubG9nKGBcXG5cXG4ke2JlbmNobWFya1RhYmxlLnJlbmRlcigpfWApO1xuICAgIGNsaS5sb2coYFxcblxcbiR7cGhhc2VUYWJsZS5yZW5kZXIoKX1gKTtcbiAgfVxuXG4gIG91dHB1dFJ1bk1ldGFNZXNzYWdlc0FuZFdhcm5pbmdzKGNsaSwgZmxhZ3MsIGlzQmVsb3dSZWdyZXNzaW9uVGhyZXNob2xkKTtcbiAgb3V0cHV0U3VtbWFyeVJlcG9ydChjbGksIHBoYXNlUmVzdWx0c0Zvcm1hdHRlZCk7XG5cbiAgcmV0dXJuIG91dHB1dEpTT05SZXN1bHRzKFxuICAgIGJlbmNobWFya1RhYmxlRGF0YSxcbiAgICBwaGFzZVRhYmxlRGF0YSxcbiAgICBhcmVSZXN1bHRzU2lnbmlmaWNhbnQsXG4gICAgaXNCZWxvd1JlZ3Jlc3Npb25UaHJlc2hvbGRcbiAgKTtcbn1cbiJdfQ==