"use strict";function cov_2mhsuzh4f2(){var path="/Users/malynch/D/tracerbench/packages/cli/src/commands/record-har.ts";var hash="10d44b14561973e4bdad824be6cb5bba59675c0e";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/malynch/D/tracerbench/packages/cli/src/commands/record-har.ts",statementMap:{"0":{start:{line:2,column:0},end:{line:2,column:62}},"1":{start:{line:4,column:15},end:{line:4,column:43}},"2":{start:{line:5,column:19},end:{line:5,column:38}},"3":{start:{line:6,column:15},end:{line:6,column:30}},"4":{start:{line:7,column:25},end:{line:7,column:53}},"5":{start:{line:8,column:28},end:{line:8,column:74}},"6":{start:{line:9,column:16},end:{line:9,column:43}},"7":{start:{line:10,column:30},end:{line:61,column:4}},"8":{start:{line:13,column:30},end:{line:13,column:51}},"9":{start:{line:14,column:12},end:{line:14,column:100}},"10":{start:{line:17,column:30},end:{line:17,column:51}},"11":{start:{line:18,column:65},end:{line:18,column:70}},"12":{start:{line:19,column:59},end:{line:19,column:76}},"13":{start:{line:20,column:34},end:{line:20,column:51}},"14":{start:{line:21,column:31},end:{line:24,column:13}},"15":{start:{line:25,column:26},end:{line:32,column:13}},"16":{start:{line:33,column:12},end:{line:36,column:13}},"17":{start:{line:35,column:16},end:{line:35,column:81}},"18":{start:{line:38,column:12},end:{line:42,column:13}},"19":{start:{line:39,column:16},end:{line:41,column:56}},"20":{start:{line:44,column:31},end:{line:44,column:106}},"21":{start:{line:45,column:28},end:{line:45,column:64}},"22":{start:{line:46,column:12},end:{line:46,column:74}},"23":{start:{line:47,column:12},end:{line:47,column:68}},"24":{start:{line:50,column:4},end:{line:50,column:63}},"25":{start:{line:51,column:4},end:{line:59,column:6}},"26":{start:{line:60,column:4},end:{line:60,column:21}},"27":{start:{line:62,column:0},end:{line:62,column:28}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:10,column:31},end:{line:10,column:32}},loc:{start:{line:10,column:37},end:{line:61,column:1}},line:10},"1":{name:"(anonymous_1)",decl:{start:{line:12,column:8},end:{line:12,column:9}},loc:{start:{line:12,column:21},end:{line:15,column:9}},line:12},"2":{name:"(anonymous_2)",decl:{start:{line:16,column:8},end:{line:16,column:9}},loc:{start:{line:16,column:20},end:{line:48,column:9}},line:16}},branchMap:{"0":{loc:{start:{line:22,column:25},end:{line:22,column:51}},type:"cond-expr",locations:[{start:{line:22,column:35},end:{line:22,column:42}},{start:{line:22,column:45},end:{line:22,column:51}}],line:22},"1":{loc:{start:{line:23,column:21},end:{line:23,column:72}},type:"cond-expr",locations:[{start:{line:23,column:39},end:{line:23,column:68}},{start:{line:23,column:71},end:{line:23,column:72}}],line:23},"2":{loc:{start:{line:33,column:12},end:{line:36,column:13}},type:"if",locations:[{start:{line:33,column:12},end:{line:36,column:13}},{start:{line:33,column:12},end:{line:36,column:13}}],line:33},"3":{loc:{start:{line:38,column:12},end:{line:42,column:13}},type:"if",locations:[{start:{line:38,column:12},end:{line:42,column:13}},{start:{line:38,column:12},end:{line:42,column:13}}],line:38},"4":{loc:{start:{line:39,column:30},end:{line:41,column:55}},type:"cond-expr",locations:[{start:{line:40,column:22},end:{line:40,column:75}},{start:{line:41,column:22},end:{line:41,column:55}}],line:39}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0},f:{"0":0,"1":0,"2":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0]},inputSourceMap:{version:3,file:"/Users/malynch/D/tracerbench/packages/cli/src/commands/record-har.ts",sources:["/Users/malynch/D/tracerbench/packages/cli/src/commands/record-har.ts"],names:[],mappings:";;AAAA,qEAAqE;AACrE,4CAAiE;AACjE,uCAAmD;AACnD,+BAAqC;AAErC,sDAA6D;AAC7D,2EAAoE;AACpE,4CAQ0B;AAE1B;IAAA,MAAqB,SAAU,SAAQ,8BAAa;QAW3C,KAAK,CAAC,IAAI;YACf,MAAM,EAAE,KAAK,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;YACxC,IAAI,CAAC,YAAY,GAAG,0BAAS,CAAC,KAAK,CAAC,MAAM,EAAE,KAAK,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;QACzE,CAAC;QAEM,KAAK,CAAC,GAAG;YACd,MAAM,EAAE,KAAK,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;YACxC,MAAM,EAAE,GAAG,EAAE,IAAI,EAAE,WAAW,EAAE,QAAQ,EAAE,MAAM,EAAE,GAAG,KAAK,CAAC;YAC3D,MAAM,EAAE,OAAO,EAAE,eAAe,EAAE,QAAQ,EAAE,GAAG,IAAI,CAAC,YAAY,CAAC;YACjE,IAAI,EAAE,WAAW,EAAE,GAAG,IAAI,CAAC,YAAY,CAAC;YACxC,MAAM,UAAU,GAAgB;gBAC9B,OAAO,EAAE,OAAO,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,MAAM;gBACnC,GAAG,EAAE,eAAe,CAAC,CAAC,CAAC,QAAQ,CAAC,eAAyB,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;aACnE,CAAC;YACF,IAAI,OAAO,GAAG;gBACZ;oBACE,IAAI,EAAE,EAAE;oBACR,KAAK,EAAE,EAAE;oBACT,MAAM,EAAE,EAAE;oBACV,IAAI,EAAE,EAAE;iBACT;aACF,CAAC;YACF,IAAI,WAAW,CAAC,MAAM,EAAE;gBACtB,wBAAwB;gBACxB,OAAO,GAAG,MAAM,mBAAQ,CAAC,cAAO,CAAC,WAAW,CAAC,CAAC,CAAC;aAChD;YAED,sDAAsD;YACtD,IAAI,QAAQ,EAAE;gBACZ,WAAW,GAAG,KAAK,CAAC,OAAO,CAAC,WAAW,CAAC;oBACtC,CAAC,CAAC,WAAW,CAAC,MAAM,CAAC,iCAAa,CAAC;oBACnC,CAAC,CAAC,iCAAa,CAAC;aACnB;YAED,oDAAoD;YACpD,MAAM,UAAU,GAAG,MAAM,sBAAe,CACtC,GAAG,EACH,OAAO,EACP,MAAM,EACN,UAAU,EACV,WAAW,CACZ,CAAC;YAEF,MAAM,OAAO,GAAG,WAAI,CAAC,IAAI,EAAE,GAAG,QAAQ,MAAM,CAAC,CAAC;YAE9C,wBAAa,CAAC,OAAO,EAAE,IAAI,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC,CAAC;YAEnD,IAAI,CAAC,GAAG,CAAC,oCAAoC,OAAO,EAAE,CAAC,CAAC;QAC1D,CAAC;;IA1Da,qBAAW,GAAG,kCAAkC,CAAC;IACjD,eAAK,GAAG;QACpB,GAAG,EAAE,WAAG,CAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,OAAO,EAAE,SAAS,EAAE,CAAC;QAChD,IAAI,EAAE,YAAI,CAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;QAC9B,WAAW,EAAE,mBAAW,CAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;QAC5C,QAAQ,EAAE,gBAAQ,CAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,OAAO,EAAE,aAAa,EAAE,CAAC;QAC9D,MAAM,EAAE,cAAM,CAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;QAClC,MAAM,EAAE,cAAM,EAAE;QAChB,QAAQ,EAAR,gBAAQ;KACT,CAAC;IAkDJ,gBAAC;KAAA;kBA5DoB,SAAS",sourcesContent:["/* eslint-disable @typescript-eslint/explicit-function-return-type */\nimport { IConditions, recordHARClient } from \"@tracerbench/core\";\nimport { readJson, writeFileSync } from \"fs-extra\";\nimport { join, resolve } from \"path\";\n\nimport { getConfig, TBBaseCommand } from \"../command-config\";\nimport { headlessFlags } from \"../command-config/default-flag-args\";\nimport {\n  config,\n  cookiespath,\n  dest,\n  filename,\n  headless,\n  marker,\n  url,\n} from \"../helpers/flags\";\n\nexport default class RecordHAR extends TBBaseCommand {\n  public static description = \"Generates a HAR file from a URL.\";\n  public static flags = {\n    url: url({ required: true, default: undefined }),\n    dest: dest({ required: true }),\n    cookiespath: cookiespath({ required: true }),\n    filename: filename({ required: true, default: \"tracerbench\" }),\n    marker: marker({ required: true }),\n    config: config(),\n    headless,\n  };\n  public async init() {\n    const { flags } = this.parse(RecordHAR);\n    this.parsedConfig = getConfig(flags.config, flags, this.explicitFlags);\n  }\n\n  public async run() {\n    const { flags } = this.parse(RecordHAR);\n    const { url, dest, cookiespath, filename, marker } = flags;\n    const { network, cpuThrottleRate, headless } = this.parsedConfig;\n    let { browserArgs } = this.parsedConfig;\n    const conditions: IConditions = {\n      network: network ? network : \"none\",\n      cpu: cpuThrottleRate ? parseInt(cpuThrottleRate as string, 10) : 1,\n    };\n    let cookies = [\n      {\n        name: \"\",\n        value: \"\",\n        domain: \"\",\n        path: \"\",\n      },\n    ];\n    if (cookiespath.length) {\n      // grab the auth cookies\n      cookies = await readJson(resolve(cookiespath));\n    }\n\n    // if headless flag is true include the headless flags\n    if (headless) {\n      browserArgs = Array.isArray(browserArgs)\n        ? browserArgs.concat(headlessFlags)\n        : headlessFlags;\n    }\n\n    // record the actual HAR and return the archive file\n    const harArchive = await recordHARClient(\n      url,\n      cookies,\n      marker,\n      conditions,\n      browserArgs\n    );\n\n    const harPath = join(dest, `${filename}.har`);\n\n    writeFileSync(harPath, JSON.stringify(harArchive));\n\n    this.log(`HAR recorded and available here: ${harPath}`);\n  }\n}\n"]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"10d44b14561973e4bdad824be6cb5bba59675c0e"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];cov_2mhsuzh4f2=function(){return actualCoverage;};return actualCoverage;}cov_2mhsuzh4f2().s[0]++;Object.defineProperty(exports,"__esModule",{value:true});/* eslint-disable @typescript-eslint/explicit-function-return-type */const core_1=(cov_2mhsuzh4f2().s[1]++,require("@tracerbench/core"));const fs_extra_1=(cov_2mhsuzh4f2().s[2]++,require("fs-extra"));const path_1=(cov_2mhsuzh4f2().s[3]++,require("path"));const command_config_1=(cov_2mhsuzh4f2().s[4]++,require("../command-config"));const default_flag_args_1=(cov_2mhsuzh4f2().s[5]++,require("../command-config/default-flag-args"));const flags_1=(cov_2mhsuzh4f2().s[6]++,require("../helpers/flags"));let RecordHAR=(/** @class */cov_2mhsuzh4f2().s[7]++,(()=>{cov_2mhsuzh4f2().f[0]++;class RecordHAR extends(command_config_1.TBBaseCommand){async init(){cov_2mhsuzh4f2().f[1]++;const{flags}=(cov_2mhsuzh4f2().s[8]++,this.parse(RecordHAR));cov_2mhsuzh4f2().s[9]++;this.parsedConfig=command_config_1.getConfig(flags.config,flags,this.explicitFlags);}async run(){cov_2mhsuzh4f2().f[2]++;const{flags}=(cov_2mhsuzh4f2().s[10]++,this.parse(RecordHAR));const{url,dest,cookiespath,filename,marker}=(cov_2mhsuzh4f2().s[11]++,flags);const{network,cpuThrottleRate,headless}=(cov_2mhsuzh4f2().s[12]++,this.parsedConfig);let{browserArgs}=(cov_2mhsuzh4f2().s[13]++,this.parsedConfig);const conditions=(cov_2mhsuzh4f2().s[14]++,{network:network?(cov_2mhsuzh4f2().b[0][0]++,network):(cov_2mhsuzh4f2().b[0][1]++,"none"),cpu:cpuThrottleRate?(cov_2mhsuzh4f2().b[1][0]++,parseInt(cpuThrottleRate,10)):(cov_2mhsuzh4f2().b[1][1]++,1)});let cookies=(cov_2mhsuzh4f2().s[15]++,[{name:"",value:"",domain:"",path:""}]);cov_2mhsuzh4f2().s[16]++;if(cookiespath.length){cov_2mhsuzh4f2().b[2][0]++;cov_2mhsuzh4f2().s[17]++;// grab the auth cookies
cookies=await fs_extra_1.readJson(path_1.resolve(cookiespath));}else{cov_2mhsuzh4f2().b[2][1]++;}// if headless flag is true include the headless flags
cov_2mhsuzh4f2().s[18]++;if(headless){cov_2mhsuzh4f2().b[3][0]++;cov_2mhsuzh4f2().s[19]++;browserArgs=Array.isArray(browserArgs)?(cov_2mhsuzh4f2().b[4][0]++,browserArgs.concat(default_flag_args_1.headlessFlags)):(cov_2mhsuzh4f2().b[4][1]++,default_flag_args_1.headlessFlags);}else{cov_2mhsuzh4f2().b[3][1]++;}// record the actual HAR and return the archive file
const harArchive=(cov_2mhsuzh4f2().s[20]++,await core_1.recordHARClient(url,cookies,marker,conditions,browserArgs));const harPath=(cov_2mhsuzh4f2().s[21]++,path_1.join(dest,`${filename}.har`));cov_2mhsuzh4f2().s[22]++;fs_extra_1.writeFileSync(harPath,JSON.stringify(harArchive));cov_2mhsuzh4f2().s[23]++;this.log(`HAR recorded and available here: ${harPath}`);}}cov_2mhsuzh4f2().s[24]++;RecordHAR.description="Generates a HAR file from a URL.";cov_2mhsuzh4f2().s[25]++;RecordHAR.flags={url:flags_1.url({required:true,default:undefined}),dest:flags_1.dest({required:true}),cookiespath:flags_1.cookiespath({required:true}),filename:flags_1.filename({required:true,default:"tracerbench"}),marker:flags_1.marker({required:true}),config:flags_1.config(),headless:flags_1.headless};cov_2mhsuzh4f2().s[26]++;return RecordHAR;})());cov_2mhsuzh4f2().s[27]++;exports.default=RecordHAR;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL21hbHluY2gvRC90cmFjZXJiZW5jaC9wYWNrYWdlcy9jbGkvc3JjL2NvbW1hbmRzL3JlY29yZC1oYXIudHMiLCJzb3VyY2VzIjpbIi9Vc2Vycy9tYWx5bmNoL0QvdHJhY2VyYmVuY2gvcGFja2FnZXMvY2xpL3NyYy9jb21tYW5kcy9yZWNvcmQtaGFyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEscUVBQXFFO0FBQ3JFLDRDQUFpRTtBQUNqRSx1Q0FBbUQ7QUFDbkQsK0JBQXFDO0FBRXJDLHNEQUE2RDtBQUM3RCwyRUFBb0U7QUFDcEUsNENBUTBCO0FBRTFCO0lBQUEsTUFBcUIsU0FBVSxTQUFRLDhCQUFhO1FBVzNDLEtBQUssQ0FBQyxJQUFJO1lBQ2YsTUFBTSxFQUFFLEtBQUssRUFBRSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsU0FBUyxDQUFDLENBQUM7WUFDeEMsSUFBSSxDQUFDLFlBQVksR0FBRywwQkFBUyxDQUFDLEtBQUssQ0FBQyxNQUFNLEVBQUUsS0FBSyxFQUFFLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQztRQUN6RSxDQUFDO1FBRU0sS0FBSyxDQUFDLEdBQUc7WUFDZCxNQUFNLEVBQUUsS0FBSyxFQUFFLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUMsQ0FBQztZQUN4QyxNQUFNLEVBQUUsR0FBRyxFQUFFLElBQUksRUFBRSxXQUFXLEVBQUUsUUFBUSxFQUFFLE1BQU0sRUFBRSxHQUFHLEtBQUssQ0FBQztZQUMzRCxNQUFNLEVBQUUsT0FBTyxFQUFFLGVBQWUsRUFBRSxRQUFRLEVBQUUsR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDO1lBQ2pFLElBQUksRUFBRSxXQUFXLEVBQUUsR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDO1lBQ3hDLE1BQU0sVUFBVSxHQUFnQjtnQkFDOUIsT0FBTyxFQUFFLE9BQU8sQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxNQUFNO2dCQUNuQyxHQUFHLEVBQUUsZUFBZSxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsZUFBeUIsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQzthQUNuRSxDQUFDO1lBQ0YsSUFBSSxPQUFPLEdBQUc7Z0JBQ1o7b0JBQ0UsSUFBSSxFQUFFLEVBQUU7b0JBQ1IsS0FBSyxFQUFFLEVBQUU7b0JBQ1QsTUFBTSxFQUFFLEVBQUU7b0JBQ1YsSUFBSSxFQUFFLEVBQUU7aUJBQ1Q7YUFDRixDQUFDO1lBQ0YsSUFBSSxXQUFXLENBQUMsTUFBTSxFQUFFO2dCQUN0Qix3QkFBd0I7Z0JBQ3hCLE9BQU8sR0FBRyxNQUFNLG1CQUFRLENBQUMsY0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUM7YUFDaEQ7WUFFRCxzREFBc0Q7WUFDdEQsSUFBSSxRQUFRLEVBQUU7Z0JBQ1osV0FBVyxHQUFHLEtBQUssQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDO29CQUN0QyxDQUFDLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxpQ0FBYSxDQUFDO29CQUNuQyxDQUFDLENBQUMsaUNBQWEsQ0FBQzthQUNuQjtZQUVELG9EQUFvRDtZQUNwRCxNQUFNLFVBQVUsR0FBRyxNQUFNLHNCQUFlLENBQ3RDLEdBQUcsRUFDSCxPQUFPLEVBQ1AsTUFBTSxFQUNOLFVBQVUsRUFDVixXQUFXLENBQ1osQ0FBQztZQUVGLE1BQU0sT0FBTyxHQUFHLFdBQUksQ0FBQyxJQUFJLEVBQUUsR0FBRyxRQUFRLE1BQU0sQ0FBQyxDQUFDO1lBRTlDLHdCQUFhLENBQUMsT0FBTyxFQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQztZQUVuRCxJQUFJLENBQUMsR0FBRyxDQUFDLG9DQUFvQyxPQUFPLEVBQUUsQ0FBQyxDQUFDO1FBQzFELENBQUM7O0lBMURhLHFCQUFXLEdBQUcsa0NBQWtDLENBQUM7SUFDakQsZUFBSyxHQUFHO1FBQ3BCLEdBQUcsRUFBRSxXQUFHLENBQUMsRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBRSxTQUFTLEVBQUUsQ0FBQztRQUNoRCxJQUFJLEVBQUUsWUFBSSxDQUFDLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBRSxDQUFDO1FBQzlCLFdBQVcsRUFBRSxtQkFBVyxDQUFDLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBRSxDQUFDO1FBQzVDLFFBQVEsRUFBRSxnQkFBUSxDQUFDLEVBQUUsUUFBUSxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUUsYUFBYSxFQUFFLENBQUM7UUFDOUQsTUFBTSxFQUFFLGNBQU0sQ0FBQyxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsQ0FBQztRQUNsQyxNQUFNLEVBQUUsY0FBTSxFQUFFO1FBQ2hCLFFBQVEsRUFBUixnQkFBUTtLQUNULENBQUM7SUFrREosZ0JBQUM7S0FBQTtrQkE1RG9CLFNBQVMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvZXhwbGljaXQtZnVuY3Rpb24tcmV0dXJuLXR5cGUgKi9cbmltcG9ydCB7IElDb25kaXRpb25zLCByZWNvcmRIQVJDbGllbnQgfSBmcm9tIFwiQHRyYWNlcmJlbmNoL2NvcmVcIjtcbmltcG9ydCB7IHJlYWRKc29uLCB3cml0ZUZpbGVTeW5jIH0gZnJvbSBcImZzLWV4dHJhXCI7XG5pbXBvcnQgeyBqb2luLCByZXNvbHZlIH0gZnJvbSBcInBhdGhcIjtcblxuaW1wb3J0IHsgZ2V0Q29uZmlnLCBUQkJhc2VDb21tYW5kIH0gZnJvbSBcIi4uL2NvbW1hbmQtY29uZmlnXCI7XG5pbXBvcnQgeyBoZWFkbGVzc0ZsYWdzIH0gZnJvbSBcIi4uL2NvbW1hbmQtY29uZmlnL2RlZmF1bHQtZmxhZy1hcmdzXCI7XG5pbXBvcnQge1xuICBjb25maWcsXG4gIGNvb2tpZXNwYXRoLFxuICBkZXN0LFxuICBmaWxlbmFtZSxcbiAgaGVhZGxlc3MsXG4gIG1hcmtlcixcbiAgdXJsLFxufSBmcm9tIFwiLi4vaGVscGVycy9mbGFnc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSZWNvcmRIQVIgZXh0ZW5kcyBUQkJhc2VDb21tYW5kIHtcbiAgcHVibGljIHN0YXRpYyBkZXNjcmlwdGlvbiA9IFwiR2VuZXJhdGVzIGEgSEFSIGZpbGUgZnJvbSBhIFVSTC5cIjtcbiAgcHVibGljIHN0YXRpYyBmbGFncyA9IHtcbiAgICB1cmw6IHVybCh7IHJlcXVpcmVkOiB0cnVlLCBkZWZhdWx0OiB1bmRlZmluZWQgfSksXG4gICAgZGVzdDogZGVzdCh7IHJlcXVpcmVkOiB0cnVlIH0pLFxuICAgIGNvb2tpZXNwYXRoOiBjb29raWVzcGF0aCh7IHJlcXVpcmVkOiB0cnVlIH0pLFxuICAgIGZpbGVuYW1lOiBmaWxlbmFtZSh7IHJlcXVpcmVkOiB0cnVlLCBkZWZhdWx0OiBcInRyYWNlcmJlbmNoXCIgfSksXG4gICAgbWFya2VyOiBtYXJrZXIoeyByZXF1aXJlZDogdHJ1ZSB9KSxcbiAgICBjb25maWc6IGNvbmZpZygpLFxuICAgIGhlYWRsZXNzLFxuICB9O1xuICBwdWJsaWMgYXN5bmMgaW5pdCgpIHtcbiAgICBjb25zdCB7IGZsYWdzIH0gPSB0aGlzLnBhcnNlKFJlY29yZEhBUik7XG4gICAgdGhpcy5wYXJzZWRDb25maWcgPSBnZXRDb25maWcoZmxhZ3MuY29uZmlnLCBmbGFncywgdGhpcy5leHBsaWNpdEZsYWdzKTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBydW4oKSB7XG4gICAgY29uc3QgeyBmbGFncyB9ID0gdGhpcy5wYXJzZShSZWNvcmRIQVIpO1xuICAgIGNvbnN0IHsgdXJsLCBkZXN0LCBjb29raWVzcGF0aCwgZmlsZW5hbWUsIG1hcmtlciB9ID0gZmxhZ3M7XG4gICAgY29uc3QgeyBuZXR3b3JrLCBjcHVUaHJvdHRsZVJhdGUsIGhlYWRsZXNzIH0gPSB0aGlzLnBhcnNlZENvbmZpZztcbiAgICBsZXQgeyBicm93c2VyQXJncyB9ID0gdGhpcy5wYXJzZWRDb25maWc7XG4gICAgY29uc3QgY29uZGl0aW9uczogSUNvbmRpdGlvbnMgPSB7XG4gICAgICBuZXR3b3JrOiBuZXR3b3JrID8gbmV0d29yayA6IFwibm9uZVwiLFxuICAgICAgY3B1OiBjcHVUaHJvdHRsZVJhdGUgPyBwYXJzZUludChjcHVUaHJvdHRsZVJhdGUgYXMgc3RyaW5nLCAxMCkgOiAxLFxuICAgIH07XG4gICAgbGV0IGNvb2tpZXMgPSBbXG4gICAgICB7XG4gICAgICAgIG5hbWU6IFwiXCIsXG4gICAgICAgIHZhbHVlOiBcIlwiLFxuICAgICAgICBkb21haW46IFwiXCIsXG4gICAgICAgIHBhdGg6IFwiXCIsXG4gICAgICB9LFxuICAgIF07XG4gICAgaWYgKGNvb2tpZXNwYXRoLmxlbmd0aCkge1xuICAgICAgLy8gZ3JhYiB0aGUgYXV0aCBjb29raWVzXG4gICAgICBjb29raWVzID0gYXdhaXQgcmVhZEpzb24ocmVzb2x2ZShjb29raWVzcGF0aCkpO1xuICAgIH1cblxuICAgIC8vIGlmIGhlYWRsZXNzIGZsYWcgaXMgdHJ1ZSBpbmNsdWRlIHRoZSBoZWFkbGVzcyBmbGFnc1xuICAgIGlmIChoZWFkbGVzcykge1xuICAgICAgYnJvd3NlckFyZ3MgPSBBcnJheS5pc0FycmF5KGJyb3dzZXJBcmdzKVxuICAgICAgICA/IGJyb3dzZXJBcmdzLmNvbmNhdChoZWFkbGVzc0ZsYWdzKVxuICAgICAgICA6IGhlYWRsZXNzRmxhZ3M7XG4gICAgfVxuXG4gICAgLy8gcmVjb3JkIHRoZSBhY3R1YWwgSEFSIGFuZCByZXR1cm4gdGhlIGFyY2hpdmUgZmlsZVxuICAgIGNvbnN0IGhhckFyY2hpdmUgPSBhd2FpdCByZWNvcmRIQVJDbGllbnQoXG4gICAgICB1cmwsXG4gICAgICBjb29raWVzLFxuICAgICAgbWFya2VyLFxuICAgICAgY29uZGl0aW9ucyxcbiAgICAgIGJyb3dzZXJBcmdzXG4gICAgKTtcblxuICAgIGNvbnN0IGhhclBhdGggPSBqb2luKGRlc3QsIGAke2ZpbGVuYW1lfS5oYXJgKTtcblxuICAgIHdyaXRlRmlsZVN5bmMoaGFyUGF0aCwgSlNPTi5zdHJpbmdpZnkoaGFyQXJjaGl2ZSkpO1xuXG4gICAgdGhpcy5sb2coYEhBUiByZWNvcmRlZCBhbmQgYXZhaWxhYmxlIGhlcmU6ICR7aGFyUGF0aH1gKTtcbiAgfVxufVxuIl19
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9tYWx5bmNoL0QvdHJhY2VyYmVuY2gvcGFja2FnZXMvY2xpL3NyYy9jb21tYW5kcy9yZWNvcmQtaGFyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiIrNFFBQUEscUVBQ0EsS0FBQSxDQUFBLE1BQUEsMEJBQUEsT0FBQSxDQUFBLG1CQUFBLENBQUEsQ0FBQSxDQUNBLEtBQUEsQ0FBQSxVQUFBLDBCQUFBLE9BQUEsQ0FBQSxVQUFBLENBQUEsQ0FBQSxDQUNBLEtBQUEsQ0FBQSxNQUFBLDBCQUFBLE9BQUEsQ0FBQSxNQUFBLENBQUEsQ0FBQSxDQUVBLEtBQUEsQ0FBQSxnQkFBQSwwQkFBQSxPQUFBLENBQUEsbUJBQUEsQ0FBQSxDQUFBLENBQ0EsS0FBQSxDQUFBLG1CQUFBLDBCQUFBLE9BQUEsQ0FBQSxxQ0FBQSxDQUFBLENBQUEsQ0FDQSxLQUFBLENBQUEsT0FBQSwwQkFBQSxPQUFBLENBQUEsa0JBQUEsQ0FBQSxDQUFBLENBVUEsR0FBQSxDQUFBLFNBQUEsRUFBQSxhQUFBLHdCQUFBLENBQUEsSUFBQSx5QkFBQSxLQUFxQixDQUFBLFNBQXJCLFNBQXVDLGdCQUFBLENBQUEsYUFBdkMsQ0FBb0QsQ0FXM0MsS0FBTSxDQUFBLElBQU4sRUFBVSx5QkFDZixLQUFNLENBQUUsS0FBRiwyQkFBWSxLQUFLLEtBQUwsQ0FBVyxTQUFYLENBQVosQ0FBTixDQURlLHdCQUVmLEtBQUssWUFBTCxDQUFvQixnQkFBQSxDQUFBLFNBQUEsQ0FBVSxLQUFLLENBQUMsTUFBaEIsQ0FBd0IsS0FBeEIsQ0FBK0IsS0FBSyxhQUFwQyxDQUFwQixDQUNELENBRU0sS0FBTSxDQUFBLEdBQU4sRUFBUyx5QkFDZCxLQUFNLENBQUUsS0FBRiw0QkFBWSxLQUFLLEtBQUwsQ0FBVyxTQUFYLENBQVosQ0FBTixDQUNBLEtBQU0sQ0FBRSxHQUFGLENBQU8sSUFBUCxDQUFhLFdBQWIsQ0FBMEIsUUFBMUIsQ0FBb0MsTUFBcEMsNEJBQStDLEtBQS9DLENBQU4sQ0FDQSxLQUFNLENBQUUsT0FBRixDQUFXLGVBQVgsQ0FBNEIsUUFBNUIsNEJBQXlDLEtBQUssWUFBOUMsQ0FBTixDQUNBLEdBQUksQ0FBRSxXQUFGLDRCQUFrQixLQUFLLFlBQXZCLENBQUosQ0FDQSxLQUFNLENBQUEsVUFBVSwyQkFBZ0IsQ0FDOUIsT0FBTyxDQUFFLE9BQU8sNkJBQUcsT0FBSCw4QkFBYSxNQUFiLENBRGMsQ0FFOUIsR0FBRyxDQUFFLGVBQWUsNkJBQUcsUUFBUSxDQUFDLGVBQUQsQ0FBNEIsRUFBNUIsQ0FBWCw4QkFBNkMsQ0FBN0MsQ0FGVSxDQUFoQixDQUFoQixDQUlBLEdBQUksQ0FBQSxPQUFPLDJCQUFHLENBQ1osQ0FDRSxJQUFJLENBQUUsRUFEUixDQUVFLEtBQUssQ0FBRSxFQUZULENBR0UsTUFBTSxDQUFFLEVBSFYsQ0FJRSxJQUFJLENBQUUsRUFKUixDQURZLENBQUgsQ0FBWCxDQVRjLHlCQWlCZCxHQUFJLFdBQVcsQ0FBQyxNQUFoQixDQUF3QixxREFDdEI7QUFDQSxPQUFPLENBQUcsS0FBTSxDQUFBLFVBQUEsQ0FBQSxRQUFBLENBQVMsTUFBQSxDQUFBLE9BQUEsQ0FBUSxXQUFSLENBQVQsQ0FBaEIsQ0FDRCxDQUhELGlDQUtBO0FBdEJjLHlCQXVCZCxHQUFJLFFBQUosQ0FBYyxxREFDWixXQUFXLENBQUcsS0FBSyxDQUFDLE9BQU4sQ0FBYyxXQUFkLDhCQUNWLFdBQVcsQ0FBQyxNQUFaLENBQW1CLG1CQUFBLENBQUEsYUFBbkIsQ0FEVSw4QkFFVixtQkFBQSxDQUFBLGFBRlUsQ0FBZCxDQUdELENBSkQsaUNBTUE7QUFDQSxLQUFNLENBQUEsVUFBVSwyQkFBRyxLQUFNLENBQUEsTUFBQSxDQUFBLGVBQUEsQ0FDdkIsR0FEdUIsQ0FFdkIsT0FGdUIsQ0FHdkIsTUFIdUIsQ0FJdkIsVUFKdUIsQ0FLdkIsV0FMdUIsQ0FBVCxDQUFoQixDQVFBLEtBQU0sQ0FBQSxPQUFPLDJCQUFHLE1BQUEsQ0FBQSxJQUFBLENBQUssSUFBTCxDQUFXLEdBQUcsUUFBUSxNQUF0QixDQUFILENBQWIsQ0F0Q2MseUJBd0NkLFVBQUEsQ0FBQSxhQUFBLENBQWMsT0FBZCxDQUF1QixJQUFJLENBQUMsU0FBTCxDQUFlLFVBQWYsQ0FBdkIsRUF4Q2MseUJBMENkLEtBQUssR0FBTCxDQUFTLG9DQUFvQyxPQUFPLEVBQXBELEVBQ0QsQ0EzRGlELENBQXBELHlCQUNnQixTQUFBLENBQUEsV0FBQSxDQUFjLGtDQUFkLENBRGhCLHlCQUVnQixTQUFBLENBQUEsS0FBQSxDQUFRLENBQ3BCLEdBQUcsQ0FBRSxPQUFBLENBQUEsR0FBQSxDQUFJLENBQUUsUUFBUSxDQUFFLElBQVosQ0FBa0IsT0FBTyxDQUFFLFNBQTNCLENBQUosQ0FEZSxDQUVwQixJQUFJLENBQUUsT0FBQSxDQUFBLElBQUEsQ0FBSyxDQUFFLFFBQVEsQ0FBRSxJQUFaLENBQUwsQ0FGYyxDQUdwQixXQUFXLENBQUUsT0FBQSxDQUFBLFdBQUEsQ0FBWSxDQUFFLFFBQVEsQ0FBRSxJQUFaLENBQVosQ0FITyxDQUlwQixRQUFRLENBQUUsT0FBQSxDQUFBLFFBQUEsQ0FBUyxDQUFFLFFBQVEsQ0FBRSxJQUFaLENBQWtCLE9BQU8sQ0FBRSxhQUEzQixDQUFULENBSlUsQ0FLcEIsTUFBTSxDQUFFLE9BQUEsQ0FBQSxNQUFBLENBQU8sQ0FBRSxRQUFRLENBQUUsSUFBWixDQUFQLENBTFksQ0FNcEIsTUFBTSxDQUFFLE9BQUEsQ0FBQSxNQUFBLEVBTlksQ0FPcEIsUUFBUSxDQUFSLE9BQUEsQ0FBQSxRQVBvQixDQUFSLENBRmhCLHlCQTREQSxNQUFBLENBQUEsU0FBQSxDQUFDLENBNURELEdBQUEsQ0FBQSxDLHlDQUFxQixTIiwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L2V4cGxpY2l0LWZ1bmN0aW9uLXJldHVybi10eXBlICovXG5pbXBvcnQgeyBJQ29uZGl0aW9ucywgcmVjb3JkSEFSQ2xpZW50IH0gZnJvbSBcIkB0cmFjZXJiZW5jaC9jb3JlXCI7XG5pbXBvcnQgeyByZWFkSnNvbiwgd3JpdGVGaWxlU3luYyB9IGZyb20gXCJmcy1leHRyYVwiO1xuaW1wb3J0IHsgam9pbiwgcmVzb2x2ZSB9IGZyb20gXCJwYXRoXCI7XG5cbmltcG9ydCB7IGdldENvbmZpZywgVEJCYXNlQ29tbWFuZCB9IGZyb20gXCIuLi9jb21tYW5kLWNvbmZpZ1wiO1xuaW1wb3J0IHsgaGVhZGxlc3NGbGFncyB9IGZyb20gXCIuLi9jb21tYW5kLWNvbmZpZy9kZWZhdWx0LWZsYWctYXJnc1wiO1xuaW1wb3J0IHtcbiAgY29uZmlnLFxuICBjb29raWVzcGF0aCxcbiAgZGVzdCxcbiAgZmlsZW5hbWUsXG4gIGhlYWRsZXNzLFxuICBtYXJrZXIsXG4gIHVybCxcbn0gZnJvbSBcIi4uL2hlbHBlcnMvZmxhZ3NcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUmVjb3JkSEFSIGV4dGVuZHMgVEJCYXNlQ29tbWFuZCB7XG4gIHB1YmxpYyBzdGF0aWMgZGVzY3JpcHRpb24gPSBcIkdlbmVyYXRlcyBhIEhBUiBmaWxlIGZyb20gYSBVUkwuXCI7XG4gIHB1YmxpYyBzdGF0aWMgZmxhZ3MgPSB7XG4gICAgdXJsOiB1cmwoeyByZXF1aXJlZDogdHJ1ZSwgZGVmYXVsdDogdW5kZWZpbmVkIH0pLFxuICAgIGRlc3Q6IGRlc3QoeyByZXF1aXJlZDogdHJ1ZSB9KSxcbiAgICBjb29raWVzcGF0aDogY29va2llc3BhdGgoeyByZXF1aXJlZDogdHJ1ZSB9KSxcbiAgICBmaWxlbmFtZTogZmlsZW5hbWUoeyByZXF1aXJlZDogdHJ1ZSwgZGVmYXVsdDogXCJ0cmFjZXJiZW5jaFwiIH0pLFxuICAgIG1hcmtlcjogbWFya2VyKHsgcmVxdWlyZWQ6IHRydWUgfSksXG4gICAgY29uZmlnOiBjb25maWcoKSxcbiAgICBoZWFkbGVzcyxcbiAgfTtcbiAgcHVibGljIGFzeW5jIGluaXQoKSB7XG4gICAgY29uc3QgeyBmbGFncyB9ID0gdGhpcy5wYXJzZShSZWNvcmRIQVIpO1xuICAgIHRoaXMucGFyc2VkQ29uZmlnID0gZ2V0Q29uZmlnKGZsYWdzLmNvbmZpZywgZmxhZ3MsIHRoaXMuZXhwbGljaXRGbGFncyk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgcnVuKCkge1xuICAgIGNvbnN0IHsgZmxhZ3MgfSA9IHRoaXMucGFyc2UoUmVjb3JkSEFSKTtcbiAgICBjb25zdCB7IHVybCwgZGVzdCwgY29va2llc3BhdGgsIGZpbGVuYW1lLCBtYXJrZXIgfSA9IGZsYWdzO1xuICAgIGNvbnN0IHsgbmV0d29yaywgY3B1VGhyb3R0bGVSYXRlLCBoZWFkbGVzcyB9ID0gdGhpcy5wYXJzZWRDb25maWc7XG4gICAgbGV0IHsgYnJvd3NlckFyZ3MgfSA9IHRoaXMucGFyc2VkQ29uZmlnO1xuICAgIGNvbnN0IGNvbmRpdGlvbnM6IElDb25kaXRpb25zID0ge1xuICAgICAgbmV0d29yazogbmV0d29yayA/IG5ldHdvcmsgOiBcIm5vbmVcIixcbiAgICAgIGNwdTogY3B1VGhyb3R0bGVSYXRlID8gcGFyc2VJbnQoY3B1VGhyb3R0bGVSYXRlIGFzIHN0cmluZywgMTApIDogMSxcbiAgICB9O1xuICAgIGxldCBjb29raWVzID0gW1xuICAgICAge1xuICAgICAgICBuYW1lOiBcIlwiLFxuICAgICAgICB2YWx1ZTogXCJcIixcbiAgICAgICAgZG9tYWluOiBcIlwiLFxuICAgICAgICBwYXRoOiBcIlwiLFxuICAgICAgfSxcbiAgICBdO1xuICAgIGlmIChjb29raWVzcGF0aC5sZW5ndGgpIHtcbiAgICAgIC8vIGdyYWIgdGhlIGF1dGggY29va2llc1xuICAgICAgY29va2llcyA9IGF3YWl0IHJlYWRKc29uKHJlc29sdmUoY29va2llc3BhdGgpKTtcbiAgICB9XG5cbiAgICAvLyBpZiBoZWFkbGVzcyBmbGFnIGlzIHRydWUgaW5jbHVkZSB0aGUgaGVhZGxlc3MgZmxhZ3NcbiAgICBpZiAoaGVhZGxlc3MpIHtcbiAgICAgIGJyb3dzZXJBcmdzID0gQXJyYXkuaXNBcnJheShicm93c2VyQXJncylcbiAgICAgICAgPyBicm93c2VyQXJncy5jb25jYXQoaGVhZGxlc3NGbGFncylcbiAgICAgICAgOiBoZWFkbGVzc0ZsYWdzO1xuICAgIH1cblxuICAgIC8vIHJlY29yZCB0aGUgYWN0dWFsIEhBUiBhbmQgcmV0dXJuIHRoZSBhcmNoaXZlIGZpbGVcbiAgICBjb25zdCBoYXJBcmNoaXZlID0gYXdhaXQgcmVjb3JkSEFSQ2xpZW50KFxuICAgICAgdXJsLFxuICAgICAgY29va2llcyxcbiAgICAgIG1hcmtlcixcbiAgICAgIGNvbmRpdGlvbnMsXG4gICAgICBicm93c2VyQXJnc1xuICAgICk7XG5cbiAgICBjb25zdCBoYXJQYXRoID0gam9pbihkZXN0LCBgJHtmaWxlbmFtZX0uaGFyYCk7XG5cbiAgICB3cml0ZUZpbGVTeW5jKGhhclBhdGgsIEpTT04uc3RyaW5naWZ5KGhhckFyY2hpdmUpKTtcblxuICAgIHRoaXMubG9nKGBIQVIgcmVjb3JkZWQgYW5kIGF2YWlsYWJsZSBoZXJlOiAke2hhclBhdGh9YCk7XG4gIH1cbn1cbiJdfQ==