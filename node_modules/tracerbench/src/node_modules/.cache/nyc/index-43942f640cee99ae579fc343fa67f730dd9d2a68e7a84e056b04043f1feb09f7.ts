"use strict";/* eslint-disable @typescript-eslint/no-explicit-any */function cov_1q73d7sky0(){var path="/Users/malynch/D/tracerbench/packages/cli/src/commands/compare/index.ts";var hash="47104d79719df01b2baeb2b9a9b19f34e6b91c45";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/malynch/D/tracerbench/packages/cli/src/commands/compare/index.ts",statementMap:{"0":{start:{line:3,column:0},end:{line:3,column:62}},"1":{start:{line:4,column:15},end:{line:4,column:43}},"2":{start:{line:5,column:11},end:{line:5,column:30}},"3":{start:{line:6,column:13},end:{line:6,column:28}},"4":{start:{line:7,column:25},end:{line:7,column:56}},"5":{start:{line:8,column:28},end:{line:8,column:77}},"6":{start:{line:9,column:20},end:{line:9,column:61}},"7":{start:{line:10,column:26},end:{line:10,column:66}},"8":{start:{line:11,column:16},end:{line:11,column:46}},"9":{start:{line:12,column:16},end:{line:12,column:46}},"10":{start:{line:13,column:18},end:{line:13,column:38}},"11":{start:{line:14,column:17},end:{line:14,column:36}},"12":{start:{line:16,column:17},end:{line:16,column:36}},"13":{start:{line:19,column:8},end:{line:19,column:28}},"14":{start:{line:20,column:8},end:{line:20,column:64}},"15":{start:{line:21,column:8},end:{line:21,column:37}},"16":{start:{line:22,column:26},end:{line:22,column:45}},"17":{start:{line:23,column:8},end:{line:23,column:34}},"18":{start:{line:24,column:8},end:{line:24,column:34}},"19":{start:{line:28,column:26},end:{line:28,column:45}},"20":{start:{line:29,column:8},end:{line:29,column:96}},"21":{start:{line:30,column:8},end:{line:30,column:34}},"22":{start:{line:31,column:8},end:{line:31,column:32}},"23":{start:{line:34,column:33},end:{line:34,column:50}},"24":{start:{line:35,column:55},end:{line:35,column:99}},"25":{start:{line:37,column:8},end:{line:43,column:9}},"26":{start:{line:38,column:12},end:{line:42,column:15}},"27":{start:{line:39,column:16},end:{line:41,column:17}},"28":{start:{line:40,column:20},end:{line:40,column:65}},"29":{start:{line:44,column:27},end:{line:47,column:9}},"30":{start:{line:48,column:23},end:{line:48,column:85}},"31":{start:{line:49,column:26},end:{line:49,column:45}},"32":{start:{line:50,column:8},end:{line:101,column:11}},"33":{start:{line:53,column:28},end:{line:53,column:47}},"34":{start:{line:54,column:12},end:{line:56,column:13}},"35":{start:{line:55,column:16},end:{line:55,column:157}},"36":{start:{line:57,column:35},end:{line:57,column:86}},"37":{start:{line:58,column:12},end:{line:58,column:79}},"38":{start:{line:59,column:30},end:{line:59,column:75}},"39":{start:{line:60,column:30},end:{line:60,column:101}},"40":{start:{line:61,column:28},end:{line:63,column:14}},"41":{start:{line:64,column:12},end:{line:64,column:51}},"42":{start:{line:65,column:12},end:{line:65,column:36}},"43":{start:{line:66,column:12},end:{line:66,column:31}},"44":{start:{line:68,column:28},end:{line:68,column:218}},"45":{start:{line:69,column:12},end:{line:69,column:37}},"46":{start:{line:70,column:12},end:{line:81,column:13}},"47":{start:{line:71,column:16},end:{line:79,column:19}},"48":{start:{line:80,column:16},end:{line:80,column:110}},"49":{start:{line:83,column:12},end:{line:90,column:13}},"50":{start:{line:84,column:16},end:{line:89,column:19}},"51":{start:{line:93,column:12},end:{line:97,column:13}},"52":{start:{line:94,column:16},end:{line:94,column:159}},"53":{start:{line:95,column:16},end:{line:95,column:165}},"54":{start:{line:96,column:16},end:{line:96,column:160}},"55":{start:{line:100,column:12},end:{line:100,column:28}},"56":{start:{line:102,column:8},end:{line:102,column:39}},"57":{start:{line:105,column:114},end:{line:105,column:131}},"58":{start:{line:110,column:8},end:{line:112,column:9}},"59":{start:{line:111,column:12},end:{line:111,column:100}},"60":{start:{line:113,column:8},end:{line:115,column:9}},"61":{start:{line:114,column:12},end:{line:114,column:70}},"62":{start:{line:116,column:8},end:{line:118,column:9}},"63":{start:{line:117,column:12},end:{line:117,column:86}},"64":{start:{line:119,column:8},end:{line:121,column:9}},"65":{start:{line:120,column:12},end:{line:120,column:92}},"66":{start:{line:122,column:8},end:{line:124,column:9}},"67":{start:{line:123,column:12},end:{line:123,column:95}},"68":{start:{line:126,column:8},end:{line:128,column:9}},"69":{start:{line:127,column:12},end:{line:127,column:116}},"70":{start:{line:131,column:8},end:{line:131,column:60}},"71":{start:{line:147,column:22},end:{line:147,column:25}},"72":{start:{line:148,column:31},end:{line:150,column:9}},"73":{start:{line:151,column:34},end:{line:153,column:9}},"74":{start:{line:155,column:8},end:{line:162,column:9}},"75":{start:{line:156,column:12},end:{line:158,column:13}},"76":{start:{line:157,column:16},end:{line:157,column:167}},"77":{start:{line:159,column:12},end:{line:161,column:13}},"78":{start:{line:160,column:16},end:{line:160,column:173}},"79":{start:{line:163,column:31},end:{line:163,column:159}},"80":{start:{line:164,column:37},end:{line:164,column:171}},"81":{start:{line:165,column:48},end:{line:165,column:193}},"82":{start:{line:166,column:34},end:{line:166,column:165}},"83":{start:{line:167,column:40},end:{line:167,column:177}},"84":{start:{line:168,column:51},end:{line:168,column:199}},"85":{start:{line:169,column:32},end:{line:184,column:9}},"86":{start:{line:182,column:31},end:{line:182,column:93}},"87":{start:{line:185,column:35},end:{line:201,column:9}},"88":{start:{line:198,column:31},end:{line:198,column:96}},"89":{start:{line:202,column:8},end:{line:202,column:53}},"90":{start:{line:205,column:0},end:{line:205,column:26}},"91":{start:{line:206,column:0},end:{line:206,column:88}},"92":{start:{line:207,column:0},end:{line:231,column:2}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:18,column:4},end:{line:18,column:5}},loc:{start:{line:18,column:30},end:{line:25,column:5}},line:18},"1":{name:"(anonymous_1)",decl:{start:{line:27,column:4},end:{line:27,column:5}},loc:{start:{line:27,column:17},end:{line:32,column:5}},line:27},"2":{name:"(anonymous_2)",decl:{start:{line:33,column:4},end:{line:33,column:5}},loc:{start:{line:33,column:16},end:{line:103,column:5}},line:33},"3":{name:"(anonymous_3)",decl:{start:{line:38,column:54},end:{line:38,column:55}},loc:{start:{line:38,column:72},end:{line:42,column:13}},line:38},"4":{name:"(anonymous_4)",decl:{start:{line:52,column:18},end:{line:52,column:19}},loc:{start:{line:52,column:37},end:{line:98,column:9}},line:52},"5":{name:"(anonymous_5)",decl:{start:{line:99,column:19},end:{line:99,column:20}},loc:{start:{line:99,column:28},end:{line:101,column:9}},line:99},"6":{name:"(anonymous_6)",decl:{start:{line:104,column:4},end:{line:104,column:5}},loc:{start:{line:104,column:23},end:{line:132,column:5}},line:104},"7":{name:"(anonymous_7)",decl:{start:{line:144,column:4},end:{line:144,column:5}},loc:{start:{line:144,column:44},end:{line:203,column:5}},line:144},"8":{name:"(anonymous_8)",decl:{start:{line:182,column:24},end:{line:182,column:25}},loc:{start:{line:182,column:31},end:{line:182,column:93}},line:182},"9":{name:"(anonymous_9)",decl:{start:{line:198,column:24},end:{line:198,column:25}},loc:{start:{line:198,column:31},end:{line:198,column:96}},line:198}},branchMap:{"0":{loc:{start:{line:37,column:8},end:{line:43,column:9}},type:"if",locations:[{start:{line:37,column:8},end:{line:43,column:9}},{start:{line:37,column:8},end:{line:43,column:9}}],line:37},"1":{loc:{start:{line:39,column:16},end:{line:41,column:17}},type:"if",locations:[{start:{line:39,column:16},end:{line:41,column:17}},{start:{line:39,column:16},end:{line:41,column:17}}],line:39},"2":{loc:{start:{line:54,column:12},end:{line:56,column:13}},type:"if",locations:[{start:{line:54,column:12},end:{line:56,column:13}},{start:{line:54,column:12},end:{line:56,column:13}}],line:54},"3":{loc:{start:{line:70,column:12},end:{line:81,column:13}},type:"if",locations:[{start:{line:70,column:12},end:{line:81,column:13}},{start:{line:70,column:12},end:{line:81,column:13}}],line:70},"4":{loc:{start:{line:83,column:12},end:{line:90,column:13}},type:"if",locations:[{start:{line:83,column:12},end:{line:90,column:13}},{start:{line:83,column:12},end:{line:90,column:13}}],line:83},"5":{loc:{start:{line:93,column:12},end:{line:97,column:13}},type:"if",locations:[{start:{line:93,column:12},end:{line:97,column:13}},{start:{line:93,column:12},end:{line:97,column:13}}],line:93},"6":{loc:{start:{line:110,column:8},end:{line:112,column:9}},type:"if",locations:[{start:{line:110,column:8},end:{line:112,column:9}},{start:{line:110,column:8},end:{line:112,column:9}}],line:110},"7":{loc:{start:{line:113,column:8},end:{line:115,column:9}},type:"if",locations:[{start:{line:113,column:8},end:{line:115,column:9}},{start:{line:113,column:8},end:{line:115,column:9}}],line:113},"8":{loc:{start:{line:116,column:8},end:{line:118,column:9}},type:"if",locations:[{start:{line:116,column:8},end:{line:118,column:9}},{start:{line:116,column:8},end:{line:118,column:9}}],line:116},"9":{loc:{start:{line:119,column:8},end:{line:121,column:9}},type:"if",locations:[{start:{line:119,column:8},end:{line:121,column:9}},{start:{line:119,column:8},end:{line:121,column:9}}],line:119},"10":{loc:{start:{line:122,column:8},end:{line:124,column:9}},type:"if",locations:[{start:{line:122,column:8},end:{line:124,column:9}},{start:{line:122,column:8},end:{line:124,column:9}}],line:122},"11":{loc:{start:{line:126,column:8},end:{line:128,column:9}},type:"if",locations:[{start:{line:126,column:8},end:{line:128,column:9}},{start:{line:126,column:8},end:{line:128,column:9}}],line:126},"12":{loc:{start:{line:155,column:8},end:{line:162,column:9}},type:"if",locations:[{start:{line:155,column:8},end:{line:162,column:9}},{start:{line:155,column:8},end:{line:162,column:9}}],line:155},"13":{loc:{start:{line:156,column:12},end:{line:158,column:13}},type:"if",locations:[{start:{line:156,column:12},end:{line:158,column:13}},{start:{line:156,column:12},end:{line:158,column:13}}],line:156},"14":{loc:{start:{line:159,column:12},end:{line:161,column:13}},type:"if",locations:[{start:{line:159,column:12},end:{line:161,column:13}},{start:{line:159,column:12},end:{line:161,column:13}}],line:159},"15":{loc:{start:{line:173,column:35},end:{line:175,column:27}},type:"cond-expr",locations:[{start:{line:174,column:18},end:{line:174,column:134}},{start:{line:175,column:18},end:{line:175,column:27}}],line:173},"16":{loc:{start:{line:177,column:31},end:{line:179,column:43}},type:"cond-expr",locations:[{start:{line:178,column:18},end:{line:178,column:58}},{start:{line:179,column:18},end:{line:179,column:43}}],line:177},"17":{loc:{start:{line:189,column:35},end:{line:191,column:27}},type:"cond-expr",locations:[{start:{line:190,column:18},end:{line:190,column:140}},{start:{line:191,column:18},end:{line:191,column:27}}],line:189},"18":{loc:{start:{line:193,column:31},end:{line:195,column:43}},type:"cond-expr",locations:[{start:{line:194,column:18},end:{line:194,column:61}},{start:{line:195,column:18},end:{line:195,column:43}}],line:193}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0]},inputSourceMap:{version:3,file:"/Users/malynch/D/tracerbench/packages/cli/src/commands/compare/index.ts",sources:["/Users/malynch/D/tracerbench/packages/cli/src/commands/compare/index.ts"],names:[],mappings:"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",sourcesContent:["/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { IConfig } from \"@oclif/config\";\nimport {\n  IInitialRenderBenchmarkParams,\n  IMarker,\n  InitialRenderBenchmark,\n  networkConditions,\n  Runner,\n} from \"@tracerbench/core\";\nimport type { ChromeSpawnOptions } from \"@tracerbench/spawn-chrome\";\nimport Protocol from \"devtools-protocol\";\nimport * as fs from \"fs-extra\";\nimport * as path from \"path\";\n\nimport { flags, getConfig, TBBaseCommand } from \"../../command-config\";\nimport {\n  defaultFlagArgs,\n  fidelityLookup,\n  headlessFlags,\n} from \"../../command-config/default-flag-args\";\nimport {\n  CONTROL_ENV_OVERRIDE_ATTR,\n  EXPERIMENT_ENV_OVERRIDE_ATTR,\n  ITBConfig,\n} from \"../../command-config/tb-config\";\nimport { getEmulateDeviceSettingForKeyAndOrientation } from \"../../helpers/device-settings\";\nimport {\n  browserArgs,\n  config,\n  controlURL,\n  cpuThrottleRate,\n  debug,\n  emulateDevice,\n  emulateDeviceOrientation,\n  experimentURL,\n  fidelity,\n  headless,\n  isCIEnv,\n  markers,\n  network,\n  regressionThreshold,\n  report,\n  runtimeStats,\n  socksPorts,\n  tbResultsFolder,\n  tracingLocationSearch,\n} from \"../../helpers/flags\";\nimport {\n  chalkScheme,\n  checkEnvironmentSpecificOverride,\n  durationInSec,\n  parseMarkers,\n  timestamp,\n} from \"../../helpers/utils\";\nimport CompareAnalyze from \"./analyze\";\nimport CompareReport from \"./report\";\n// eslint-disable-next-line @typescript-eslint/no-var-requires\nconst archiver = require(\"archiver\");\nexport interface ICompareFlags {\n  hideAnalysis: boolean;\n  browserArgs: string[];\n  cpuThrottleRate: number;\n  fidelity: number;\n  markers: IMarker[];\n  network: Protocol.Network.EmulateNetworkConditionsRequest;\n  tbResultsFolder: string;\n  controlURL: string | undefined;\n  experimentURL: string | undefined;\n  tracingLocationSearch: string;\n  runtimeStats: boolean;\n  emulateDevice?: string;\n  emulateDeviceOrientation?: string;\n  socksPorts?: [string, string] | [number, number] | undefined;\n  debug: boolean;\n  regressionThreshold?: number;\n  headless: boolean;\n  config?: string;\n  report?: boolean;\n  isCIEnv?: boolean;\n}\n\nexport default class Compare extends TBBaseCommand {\n  public static description =\n    \"Compare the performance delta between an experiment and control\";\n  public static flags = {\n    hideAnalysis: flags.boolean({\n      default: false,\n      description: \"Hide the the analysis output in terminal\",\n    }),\n    browserArgs: browserArgs({ required: true }),\n    cpuThrottleRate: cpuThrottleRate({ required: true }),\n    fidelity: fidelity({ required: true }),\n    markers: markers({ required: true }),\n    network: network({ required: true }),\n    tbResultsFolder: tbResultsFolder({ required: true }),\n    controlURL: controlURL({ required: false }),\n    experimentURL: experimentURL({ required: false }),\n    tracingLocationSearch: tracingLocationSearch({ required: true }),\n    emulateDevice: emulateDevice(),\n    emulateDeviceOrientation: emulateDeviceOrientation(),\n    socksPorts: socksPorts(),\n    regressionThreshold: regressionThreshold(),\n    config: config(),\n    runtimeStats,\n    report,\n    debug,\n    headless,\n    isCIEnv: isCIEnv(),\n  };\n  public compareFlags: ICompareFlags;\n  public parsedConfig: ITBConfig = defaultFlagArgs;\n  // flags explicitly specified within the cli when\n  // running the command. these will override all\n  public explicitFlags: string[];\n  public analyzedJSONString = \"\";\n  constructor(argv: string[], config: IConfig) {\n    super(argv, config);\n    const { flags } = this.parse(Compare);\n    this.explicitFlags = argv;\n    this.compareFlags = flags;\n  }\n\n  // instantiated before this.run()\n  public async init(): Promise<void> {\n    const { flags } = this.parse(Compare);\n    this.parsedConfig = getConfig(flags.config, flags, this.explicitFlags);\n    this.compareFlags = flags;\n    await this.parseFlags();\n  }\n\n  public async run(): Promise<string> {\n    const { hideAnalysis } = this.compareFlags;\n    const [\n      controlSettings,\n      experimentSettings,\n    ] = this.generateControlExperimentServerConfig();\n\n    // this should be directly above the instantiation of the InitialRenderBenchmarks\n    if (this.parsedConfig.debug) {\n      Object.entries(this.parsedConfig).forEach(([key, value]) => {\n        if (value) {\n          this.log(`${key}: ${JSON.stringify(value)}`);\n        }\n      });\n    }\n\n    const benchmarks = {\n      control: new InitialRenderBenchmark(controlSettings),\n      experiment: new InitialRenderBenchmark(experimentSettings),\n    };\n\n    const runner = new Runner([benchmarks.control, benchmarks.experiment]);\n    const startTime = timestamp();\n    await runner\n      .run(this.compareFlags.fidelity, this.log)\n      .then(async (results: any) => {\n        const endTime = timestamp();\n        if (!results[0].samples[0]) {\n          this.error(\n            `Could not sample from provided urls\\nCONTROL: ${this.parsedConfig.controlURL}\\nEXPERIMENT: ${this.parsedConfig.experimentURL}.`\n          );\n        }\n        const resultJSONPath = `${this.parsedConfig.tbResultsFolder}/compare.json`;\n\n        fs.writeFileSync(resultJSONPath, JSON.stringify(results, null, 2));\n\n        const tracesDir = `${this.parsedConfig.tbResultsFolder}/traces`;\n        const zipOutput = fs.createWriteStream(\n          `${this.parsedConfig.tbResultsFolder}/traces.zip`\n        );\n        const archive = archiver(\"zip\", {\n          zlib: { level: 9 },\n        });\n        archive.directory(tracesDir, \"traces\");\n        archive.pipe(zipOutput);\n        archive.finalize();\n\n        // eslint:disable-next-line: max-line-length\n        const message = `${chalkScheme.blackBgGreen(\n          `    ${chalkScheme.white(\"SUCCESS!\")}    `\n        )} ${this.parsedConfig.fidelity} test samples took ${durationInSec(\n          endTime,\n          startTime\n        )} seconds`;\n\n        this.log(`\\n${message}`);\n\n        if (!hideAnalysis) {\n          this.analyzedJSONString = await CompareAnalyze.run([\n            resultJSONPath,\n            \"--fidelity\",\n            `${this.parsedConfig.fidelity}`,\n            \"--regressionThreshold\",\n            `${this.parsedConfig.regressionThreshold}`,\n            \"--isCIEnv\",\n            `${this.parsedConfig.isCIEnv}`,\n          ]);\n\n          fs.writeFileSync(\n            `${this.parsedConfig.tbResultsFolder}/report.json`,\n            this.analyzedJSONString\n          );\n        }\n\n        // if we want to run the CompareReport without calling a separate command\n        if (this.parsedConfig.report) {\n          await CompareReport.run([\n            \"--tbResultsFolder\",\n            `${this.parsedConfig.tbResultsFolder}`,\n            \"--config\",\n            `${this.parsedConfig.config}`,\n          ]);\n        }\n\n        // with debug flag output three files\n        // on config specifics\n        if (this.parsedConfig.debug) {\n          fs.writeFileSync(\n            `${this.parsedConfig.tbResultsFolder}/server-control-settings.json`,\n            JSON.stringify(Object.assign(controlSettings), null, 2)\n          );\n\n          fs.writeFileSync(\n            `${this.parsedConfig.tbResultsFolder}/server-experiment-settings.json`,\n            JSON.stringify(Object.assign(experimentSettings), null, 2)\n          );\n\n          fs.writeFileSync(\n            `${this.parsedConfig.tbResultsFolder}/compare-flags-settings.json`,\n            JSON.stringify(Object.assign(this.parsedConfig), null, 2)\n          );\n        }\n      })\n      .catch((err: any) => {\n        this.error(err);\n      });\n\n    return this.analyzedJSONString;\n  }\n\n  private async parseFlags(): Promise<void> {\n    const {\n      tbResultsFolder,\n      fidelity,\n      markers,\n      regressionThreshold,\n      headless,\n      controlURL,\n      experimentURL,\n    } = (this.parsedConfig as unknown) as ICompareFlags;\n\n    // modifies properties of flags that were not set\n    // during flag.parse(). these are intentionally\n    // not deconstructed as to maintain the mutable\n    // flags object state\n    if (typeof fidelity === \"string\") {\n      this.compareFlags.fidelity = parseInt(\n        (fidelityLookup as any)[fidelity],\n        10\n      );\n    }\n    if (typeof markers === \"string\") {\n      this.parsedConfig.markers = parseMarkers(markers);\n    }\n    if (typeof regressionThreshold === \"string\") {\n      this.parsedConfig.regressionThreshold = parseInt(regressionThreshold, 10);\n    }\n    if (typeof controlURL === undefined) {\n      this.error(\n        \"controlURL is required either in the tbconfig.json or as cli flag\"\n      );\n    }\n\n    if (typeof experimentURL === undefined) {\n      this.error(\n        \"experimentURL is required either in the tbconfig.json or as cli flag\"\n      );\n    }\n\n    // if headless flag is true include the headless flags\n    if (headless) {\n      this.parsedConfig.browserArgs = this.compareFlags.browserArgs.concat(\n        headlessFlags\n      );\n    }\n\n    // if the folder for the tracerbench results file\n    // does not exist then create it\n    fs.mkdirpSync(path.join(tbResultsFolder, \"traces\"));\n  }\n\n  /**\n   * Final result of the configs are in the following order:\n   *\n   * controlConfigs = tbconfig:controlBenchmarkEnvironment > command line > tbconfig > default\n   * experimentConfigs = tbconfig:experimentBenchmarkEnvironment > command line > tbconfig > default\n   *\n   * This functions handles the tsconfig:** part since it is assumed that parent function that passed input \"flags\"\n   * would've handled \"command line > tbconfig > default\"\n   *\n   * @param this.parsedConfig - Object containing configs parsed from the Command class\n   */\n  private generateControlExperimentServerConfig(): [\n    IInitialRenderBenchmarkParams,\n    IInitialRenderBenchmarkParams\n  ] {\n    // delay in ms times the number of samples. this improves variance.\n    // eg 100 total samples X 200ms per sample = 20 seconds total added to the trace time\n    const delay = 200;\n    const controlBrowser: Partial<ChromeSpawnOptions> = {\n      additionalArguments: this.compareFlags.browserArgs,\n    };\n    const experimentBrowser: Partial<ChromeSpawnOptions> = {\n      additionalArguments: this.compareFlags.browserArgs,\n    };\n\n    // config for the browsers to leverage socks proxy\n    if (this.parsedConfig.socksPorts) {\n      if (controlBrowser.additionalArguments) {\n        controlBrowser.additionalArguments = controlBrowser.additionalArguments.concat(\n          [`--proxy-server=socks5://0.0.0.0:${this.parsedConfig.socksPorts[0]}`]\n        );\n      }\n      if (experimentBrowser.additionalArguments) {\n        experimentBrowser.additionalArguments = experimentBrowser.additionalArguments.concat(\n          [`--proxy-server=socks5://0.0.0.0:${this.parsedConfig.socksPorts[1]}`]\n        );\n      }\n    }\n    const controlNetwork: string = checkEnvironmentSpecificOverride(\n      \"network\",\n      this.compareFlags,\n      CONTROL_ENV_OVERRIDE_ATTR,\n      this.parsedConfig\n    );\n    const controlEmulateDevice = checkEnvironmentSpecificOverride(\n      \"emulateDevice\",\n      this.compareFlags,\n      CONTROL_ENV_OVERRIDE_ATTR,\n      this.parsedConfig\n    );\n    const controlEmulateDeviceOrientation = checkEnvironmentSpecificOverride(\n      \"emulateDeviceOrientation\",\n      this.compareFlags,\n      CONTROL_ENV_OVERRIDE_ATTR,\n      this.parsedConfig\n    );\n    const experimentNetwork: string = checkEnvironmentSpecificOverride(\n      \"network\",\n      this.compareFlags,\n      EXPERIMENT_ENV_OVERRIDE_ATTR,\n      this.parsedConfig\n    );\n    const experimentEmulateDevice = checkEnvironmentSpecificOverride(\n      \"emulateDevice\",\n      this.compareFlags,\n      EXPERIMENT_ENV_OVERRIDE_ATTR,\n      this.parsedConfig\n    );\n    const experimentEmulateDeviceOrientation = checkEnvironmentSpecificOverride(\n      \"emulateDeviceOrientation\",\n      this.compareFlags,\n      EXPERIMENT_ENV_OVERRIDE_ATTR,\n      this.parsedConfig\n    );\n\n    const controlSettings: IInitialRenderBenchmarkParams = {\n      browser: controlBrowser,\n      cpuThrottleRate: checkEnvironmentSpecificOverride(\n        \"cpuThrottleRate\",\n        this.compareFlags,\n        CONTROL_ENV_OVERRIDE_ATTR,\n        this.parsedConfig\n      ),\n      delay,\n      emulateDeviceSettings: controlEmulateDevice\n        ? getEmulateDeviceSettingForKeyAndOrientation(\n            controlEmulateDevice,\n            controlEmulateDeviceOrientation\n          )\n        : undefined,\n      markers: this.compareFlags.markers,\n      networkConditions: controlNetwork\n        ? networkConditions[controlNetwork as keyof typeof networkConditions]\n        : this.compareFlags.network,\n      name: \"control\",\n      runtimeStats: this.compareFlags.runtimeStats,\n      saveTraces: (i) =>\n        `${this.compareFlags.tbResultsFolder}/traces/control${i}.json`,\n      url: path.join(\n        this.compareFlags.controlURL + this.compareFlags.tracingLocationSearch\n      ),\n    };\n\n    const experimentSettings: IInitialRenderBenchmarkParams = {\n      browser: experimentBrowser,\n      cpuThrottleRate: checkEnvironmentSpecificOverride(\n        \"cpuThrottleRate\",\n        this.compareFlags,\n        EXPERIMENT_ENV_OVERRIDE_ATTR,\n        this.parsedConfig\n      ),\n      delay,\n      emulateDeviceSettings: experimentEmulateDevice\n        ? getEmulateDeviceSettingForKeyAndOrientation(\n            experimentEmulateDevice,\n            experimentEmulateDeviceOrientation\n          )\n        : undefined,\n      markers: this.compareFlags.markers,\n      networkConditions: experimentNetwork\n        ? networkConditions[experimentNetwork as keyof typeof networkConditions]\n        : this.compareFlags.network,\n      name: \"experiment\",\n      runtimeStats: this.compareFlags.runtimeStats,\n      saveTraces: (i) =>\n        `${this.compareFlags.tbResultsFolder}/traces/experiment${i}.json`,\n      url: path.join(\n        this.compareFlags.experimentURL +\n          this.compareFlags.tracingLocationSearch\n      ),\n    };\n\n    return [controlSettings, experimentSettings];\n  }\n}\n"]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"47104d79719df01b2baeb2b9a9b19f34e6b91c45"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];cov_1q73d7sky0=function(){return actualCoverage;};return actualCoverage;}cov_1q73d7sky0().s[0]++;Object.defineProperty(exports,"__esModule",{value:true});const core_1=(cov_1q73d7sky0().s[1]++,require("@tracerbench/core"));const fs=(cov_1q73d7sky0().s[2]++,require("fs-extra"));const path=(cov_1q73d7sky0().s[3]++,require("path"));const command_config_1=(cov_1q73d7sky0().s[4]++,require("../../command-config"));const default_flag_args_1=(cov_1q73d7sky0().s[5]++,require("../../command-config/default-flag-args"));const tb_config_1=(cov_1q73d7sky0().s[6]++,require("../../command-config/tb-config"));const device_settings_1=(cov_1q73d7sky0().s[7]++,require("../../helpers/device-settings"));const flags_1=(cov_1q73d7sky0().s[8]++,require("../../helpers/flags"));const utils_1=(cov_1q73d7sky0().s[9]++,require("../../helpers/utils"));const analyze_1=(cov_1q73d7sky0().s[10]++,require("./analyze"));const report_1=(cov_1q73d7sky0().s[11]++,require("./report"));// eslint-disable-next-line @typescript-eslint/no-var-requires
const archiver=(cov_1q73d7sky0().s[12]++,require("archiver"));class Compare extends(command_config_1.TBBaseCommand){constructor(argv,config){cov_1q73d7sky0().f[0]++;cov_1q73d7sky0().s[13]++;super(argv,config);cov_1q73d7sky0().s[14]++;this.parsedConfig=default_flag_args_1.defaultFlagArgs;cov_1q73d7sky0().s[15]++;this.analyzedJSONString="";const{flags}=(cov_1q73d7sky0().s[16]++,this.parse(Compare));cov_1q73d7sky0().s[17]++;this.explicitFlags=argv;cov_1q73d7sky0().s[18]++;this.compareFlags=flags;}// instantiated before this.run()
async init(){cov_1q73d7sky0().f[1]++;const{flags}=(cov_1q73d7sky0().s[19]++,this.parse(Compare));cov_1q73d7sky0().s[20]++;this.parsedConfig=command_config_1.getConfig(flags.config,flags,this.explicitFlags);cov_1q73d7sky0().s[21]++;this.compareFlags=flags;cov_1q73d7sky0().s[22]++;await this.parseFlags();}async run(){cov_1q73d7sky0().f[2]++;const{hideAnalysis}=(cov_1q73d7sky0().s[23]++,this.compareFlags);const[controlSettings,experimentSettings]=(cov_1q73d7sky0().s[24]++,this.generateControlExperimentServerConfig());// this should be directly above the instantiation of the InitialRenderBenchmarks
cov_1q73d7sky0().s[25]++;if(this.parsedConfig.debug){cov_1q73d7sky0().b[0][0]++;cov_1q73d7sky0().s[26]++;Object.entries(this.parsedConfig).forEach(([key,value])=>{cov_1q73d7sky0().f[3]++;cov_1q73d7sky0().s[27]++;if(value){cov_1q73d7sky0().b[1][0]++;cov_1q73d7sky0().s[28]++;this.log(`${key}: ${JSON.stringify(value)}`);}else{cov_1q73d7sky0().b[1][1]++;}});}else{cov_1q73d7sky0().b[0][1]++;}const benchmarks=(cov_1q73d7sky0().s[29]++,{control:new core_1.InitialRenderBenchmark(controlSettings),experiment:new core_1.InitialRenderBenchmark(experimentSettings)});const runner=(cov_1q73d7sky0().s[30]++,new core_1.Runner([benchmarks.control,benchmarks.experiment]));const startTime=(cov_1q73d7sky0().s[31]++,utils_1.timestamp());cov_1q73d7sky0().s[32]++;await runner.run(this.compareFlags.fidelity,this.log).then(async results=>{cov_1q73d7sky0().f[4]++;const endTime=(cov_1q73d7sky0().s[33]++,utils_1.timestamp());cov_1q73d7sky0().s[34]++;if(!results[0].samples[0]){cov_1q73d7sky0().b[2][0]++;cov_1q73d7sky0().s[35]++;this.error(`Could not sample from provided urls\nCONTROL: ${this.parsedConfig.controlURL}\nEXPERIMENT: ${this.parsedConfig.experimentURL}.`);}else{cov_1q73d7sky0().b[2][1]++;}const resultJSONPath=(cov_1q73d7sky0().s[36]++,`${this.parsedConfig.tbResultsFolder}/compare.json`);cov_1q73d7sky0().s[37]++;fs.writeFileSync(resultJSONPath,JSON.stringify(results,null,2));const tracesDir=(cov_1q73d7sky0().s[38]++,`${this.parsedConfig.tbResultsFolder}/traces`);const zipOutput=(cov_1q73d7sky0().s[39]++,fs.createWriteStream(`${this.parsedConfig.tbResultsFolder}/traces.zip`));const archive=(cov_1q73d7sky0().s[40]++,archiver("zip",{zlib:{level:9}}));cov_1q73d7sky0().s[41]++;archive.directory(tracesDir,"traces");cov_1q73d7sky0().s[42]++;archive.pipe(zipOutput);cov_1q73d7sky0().s[43]++;archive.finalize();// eslint:disable-next-line: max-line-length
const message=(cov_1q73d7sky0().s[44]++,`${utils_1.chalkScheme.blackBgGreen(`    ${utils_1.chalkScheme.white("SUCCESS!")}    `)} ${this.parsedConfig.fidelity} test samples took ${utils_1.durationInSec(endTime,startTime)} seconds`);cov_1q73d7sky0().s[45]++;this.log(`\n${message}`);cov_1q73d7sky0().s[46]++;if(!hideAnalysis){cov_1q73d7sky0().b[3][0]++;cov_1q73d7sky0().s[47]++;this.analyzedJSONString=await analyze_1.default.run([resultJSONPath,"--fidelity",`${this.parsedConfig.fidelity}`,"--regressionThreshold",`${this.parsedConfig.regressionThreshold}`,"--isCIEnv",`${this.parsedConfig.isCIEnv}`]);cov_1q73d7sky0().s[48]++;fs.writeFileSync(`${this.parsedConfig.tbResultsFolder}/report.json`,this.analyzedJSONString);}else{cov_1q73d7sky0().b[3][1]++;}// if we want to run the CompareReport without calling a separate command
cov_1q73d7sky0().s[49]++;if(this.parsedConfig.report){cov_1q73d7sky0().b[4][0]++;cov_1q73d7sky0().s[50]++;await report_1.default.run(["--tbResultsFolder",`${this.parsedConfig.tbResultsFolder}`,"--config",`${this.parsedConfig.config}`]);}else{cov_1q73d7sky0().b[4][1]++;}// with debug flag output three files
// on config specifics
cov_1q73d7sky0().s[51]++;if(this.parsedConfig.debug){cov_1q73d7sky0().b[5][0]++;cov_1q73d7sky0().s[52]++;fs.writeFileSync(`${this.parsedConfig.tbResultsFolder}/server-control-settings.json`,JSON.stringify(Object.assign(controlSettings),null,2));cov_1q73d7sky0().s[53]++;fs.writeFileSync(`${this.parsedConfig.tbResultsFolder}/server-experiment-settings.json`,JSON.stringify(Object.assign(experimentSettings),null,2));cov_1q73d7sky0().s[54]++;fs.writeFileSync(`${this.parsedConfig.tbResultsFolder}/compare-flags-settings.json`,JSON.stringify(Object.assign(this.parsedConfig),null,2));}else{cov_1q73d7sky0().b[5][1]++;}}).catch(err=>{cov_1q73d7sky0().f[5]++;cov_1q73d7sky0().s[55]++;this.error(err);});cov_1q73d7sky0().s[56]++;return this.analyzedJSONString;}async parseFlags(){cov_1q73d7sky0().f[6]++;const{tbResultsFolder,fidelity,markers,regressionThreshold,headless,controlURL,experimentURL}=(cov_1q73d7sky0().s[57]++,this.parsedConfig);// modifies properties of flags that were not set
// during flag.parse(). these are intentionally
// not deconstructed as to maintain the mutable
// flags object state
cov_1q73d7sky0().s[58]++;if(typeof fidelity==="string"){cov_1q73d7sky0().b[6][0]++;cov_1q73d7sky0().s[59]++;this.compareFlags.fidelity=parseInt(default_flag_args_1.fidelityLookup[fidelity],10);}else{cov_1q73d7sky0().b[6][1]++;}cov_1q73d7sky0().s[60]++;if(typeof markers==="string"){cov_1q73d7sky0().b[7][0]++;cov_1q73d7sky0().s[61]++;this.parsedConfig.markers=utils_1.parseMarkers(markers);}else{cov_1q73d7sky0().b[7][1]++;}cov_1q73d7sky0().s[62]++;if(typeof regressionThreshold==="string"){cov_1q73d7sky0().b[8][0]++;cov_1q73d7sky0().s[63]++;this.parsedConfig.regressionThreshold=parseInt(regressionThreshold,10);}else{cov_1q73d7sky0().b[8][1]++;}cov_1q73d7sky0().s[64]++;if(typeof controlURL===undefined){cov_1q73d7sky0().b[9][0]++;cov_1q73d7sky0().s[65]++;this.error("controlURL is required either in the tbconfig.json or as cli flag");}else{cov_1q73d7sky0().b[9][1]++;}cov_1q73d7sky0().s[66]++;if(typeof experimentURL===undefined){cov_1q73d7sky0().b[10][0]++;cov_1q73d7sky0().s[67]++;this.error("experimentURL is required either in the tbconfig.json or as cli flag");}else{cov_1q73d7sky0().b[10][1]++;}// if headless flag is true include the headless flags
cov_1q73d7sky0().s[68]++;if(headless){cov_1q73d7sky0().b[11][0]++;cov_1q73d7sky0().s[69]++;this.parsedConfig.browserArgs=this.compareFlags.browserArgs.concat(default_flag_args_1.headlessFlags);}else{cov_1q73d7sky0().b[11][1]++;}// if the folder for the tracerbench results file
// does not exist then create it
cov_1q73d7sky0().s[70]++;fs.mkdirpSync(path.join(tbResultsFolder,"traces"));}/**
     * Final result of the configs are in the following order:
     *
     * controlConfigs = tbconfig:controlBenchmarkEnvironment > command line > tbconfig > default
     * experimentConfigs = tbconfig:experimentBenchmarkEnvironment > command line > tbconfig > default
     *
     * This functions handles the tsconfig:** part since it is assumed that parent function that passed input "flags"
     * would've handled "command line > tbconfig > default"
     *
     * @param this.parsedConfig - Object containing configs parsed from the Command class
     */generateControlExperimentServerConfig(){cov_1q73d7sky0().f[7]++;// delay in ms times the number of samples. this improves variance.
// eg 100 total samples X 200ms per sample = 20 seconds total added to the trace time
const delay=(cov_1q73d7sky0().s[71]++,200);const controlBrowser=(cov_1q73d7sky0().s[72]++,{additionalArguments:this.compareFlags.browserArgs});const experimentBrowser=(cov_1q73d7sky0().s[73]++,{additionalArguments:this.compareFlags.browserArgs});// config for the browsers to leverage socks proxy
cov_1q73d7sky0().s[74]++;if(this.parsedConfig.socksPorts){cov_1q73d7sky0().b[12][0]++;cov_1q73d7sky0().s[75]++;if(controlBrowser.additionalArguments){cov_1q73d7sky0().b[13][0]++;cov_1q73d7sky0().s[76]++;controlBrowser.additionalArguments=controlBrowser.additionalArguments.concat([`--proxy-server=socks5://0.0.0.0:${this.parsedConfig.socksPorts[0]}`]);}else{cov_1q73d7sky0().b[13][1]++;}cov_1q73d7sky0().s[77]++;if(experimentBrowser.additionalArguments){cov_1q73d7sky0().b[14][0]++;cov_1q73d7sky0().s[78]++;experimentBrowser.additionalArguments=experimentBrowser.additionalArguments.concat([`--proxy-server=socks5://0.0.0.0:${this.parsedConfig.socksPorts[1]}`]);}else{cov_1q73d7sky0().b[14][1]++;}}else{cov_1q73d7sky0().b[12][1]++;}const controlNetwork=(cov_1q73d7sky0().s[79]++,utils_1.checkEnvironmentSpecificOverride("network",this.compareFlags,tb_config_1.CONTROL_ENV_OVERRIDE_ATTR,this.parsedConfig));const controlEmulateDevice=(cov_1q73d7sky0().s[80]++,utils_1.checkEnvironmentSpecificOverride("emulateDevice",this.compareFlags,tb_config_1.CONTROL_ENV_OVERRIDE_ATTR,this.parsedConfig));const controlEmulateDeviceOrientation=(cov_1q73d7sky0().s[81]++,utils_1.checkEnvironmentSpecificOverride("emulateDeviceOrientation",this.compareFlags,tb_config_1.CONTROL_ENV_OVERRIDE_ATTR,this.parsedConfig));const experimentNetwork=(cov_1q73d7sky0().s[82]++,utils_1.checkEnvironmentSpecificOverride("network",this.compareFlags,tb_config_1.EXPERIMENT_ENV_OVERRIDE_ATTR,this.parsedConfig));const experimentEmulateDevice=(cov_1q73d7sky0().s[83]++,utils_1.checkEnvironmentSpecificOverride("emulateDevice",this.compareFlags,tb_config_1.EXPERIMENT_ENV_OVERRIDE_ATTR,this.parsedConfig));const experimentEmulateDeviceOrientation=(cov_1q73d7sky0().s[84]++,utils_1.checkEnvironmentSpecificOverride("emulateDeviceOrientation",this.compareFlags,tb_config_1.EXPERIMENT_ENV_OVERRIDE_ATTR,this.parsedConfig));const controlSettings=(cov_1q73d7sky0().s[85]++,{browser:controlBrowser,cpuThrottleRate:utils_1.checkEnvironmentSpecificOverride("cpuThrottleRate",this.compareFlags,tb_config_1.CONTROL_ENV_OVERRIDE_ATTR,this.parsedConfig),delay,emulateDeviceSettings:controlEmulateDevice?(cov_1q73d7sky0().b[15][0]++,device_settings_1.getEmulateDeviceSettingForKeyAndOrientation(controlEmulateDevice,controlEmulateDeviceOrientation)):(cov_1q73d7sky0().b[15][1]++,undefined),markers:this.compareFlags.markers,networkConditions:controlNetwork?(cov_1q73d7sky0().b[16][0]++,core_1.networkConditions[controlNetwork]):(cov_1q73d7sky0().b[16][1]++,this.compareFlags.network),name:"control",runtimeStats:this.compareFlags.runtimeStats,saveTraces:i=>{cov_1q73d7sky0().f[8]++;cov_1q73d7sky0().s[86]++;return`${this.compareFlags.tbResultsFolder}/traces/control${i}.json`;},url:path.join(this.compareFlags.controlURL+this.compareFlags.tracingLocationSearch)});const experimentSettings=(cov_1q73d7sky0().s[87]++,{browser:experimentBrowser,cpuThrottleRate:utils_1.checkEnvironmentSpecificOverride("cpuThrottleRate",this.compareFlags,tb_config_1.EXPERIMENT_ENV_OVERRIDE_ATTR,this.parsedConfig),delay,emulateDeviceSettings:experimentEmulateDevice?(cov_1q73d7sky0().b[17][0]++,device_settings_1.getEmulateDeviceSettingForKeyAndOrientation(experimentEmulateDevice,experimentEmulateDeviceOrientation)):(cov_1q73d7sky0().b[17][1]++,undefined),markers:this.compareFlags.markers,networkConditions:experimentNetwork?(cov_1q73d7sky0().b[18][0]++,core_1.networkConditions[experimentNetwork]):(cov_1q73d7sky0().b[18][1]++,this.compareFlags.network),name:"experiment",runtimeStats:this.compareFlags.runtimeStats,saveTraces:i=>{cov_1q73d7sky0().f[9]++;cov_1q73d7sky0().s[88]++;return`${this.compareFlags.tbResultsFolder}/traces/experiment${i}.json`;},url:path.join(this.compareFlags.experimentURL+this.compareFlags.tracingLocationSearch)});cov_1q73d7sky0().s[89]++;return[controlSettings,experimentSettings];}}cov_1q73d7sky0().s[90]++;exports.default=Compare;cov_1q73d7sky0().s[91]++;Compare.description="Compare the performance delta between an experiment and control";cov_1q73d7sky0().s[92]++;Compare.flags={hideAnalysis:command_config_1.flags.boolean({default:false,description:"Hide the the analysis output in terminal"}),browserArgs:flags_1.browserArgs({required:true}),cpuThrottleRate:flags_1.cpuThrottleRate({required:true}),fidelity:flags_1.fidelity({required:true}),markers:flags_1.markers({required:true}),network:flags_1.network({required:true}),tbResultsFolder:flags_1.tbResultsFolder({required:true}),controlURL:flags_1.controlURL({required:false}),experimentURL:flags_1.experimentURL({required:false}),tracingLocationSearch:flags_1.tracingLocationSearch({required:true}),emulateDevice:flags_1.emulateDevice(),emulateDeviceOrientation:flags_1.emulateDeviceOrientation(),socksPorts:flags_1.socksPorts(),regressionThreshold:flags_1.regressionThreshold(),config:flags_1.config(),runtimeStats:flags_1.runtimeStats,report:flags_1.report,debug:flags_1.debug,headless:flags_1.headless,isCIEnv:flags_1.isCIEnv()};//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL21hbHluY2gvRC90cmFjZXJiZW5jaC9wYWNrYWdlcy9jbGkvc3JjL2NvbW1hbmRzL2NvbXBhcmUvaW5kZXgudHMiLCJzb3VyY2VzIjpbIi9Vc2Vycy9tYWx5bmNoL0QvdHJhY2VyYmVuY2gvcGFja2FnZXMvY2xpL3NyYy9jb21tYW5kcy9jb21wYXJlL2luZGV4LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSx1REFBdUQ7O0FBR3ZELDRDQU0yQjtBQUczQiwrQkFBK0I7QUFDL0IsNkJBQTZCO0FBRTdCLHlEQUF1RTtBQUN2RSw4RUFJZ0Q7QUFDaEQsOERBSXdDO0FBQ3hDLG1FQUE0RjtBQUM1RiwrQ0FvQjZCO0FBQzdCLCtDQU02QjtBQUM3Qix1Q0FBdUM7QUFDdkMscUNBQXFDO0FBQ3JDLDhEQUE4RDtBQUM5RCxNQUFNLFFBQVEsR0FBRyxPQUFPLENBQUMsVUFBVSxDQUFDLENBQUM7QUF3QnJDLE1BQXFCLE9BQVEsU0FBUSw4QkFBYTtJQWtDaEQsWUFBWSxJQUFjLEVBQUUsTUFBZTtRQUN6QyxLQUFLLENBQUMsSUFBSSxFQUFFLE1BQU0sQ0FBQyxDQUFDO1FBTmYsaUJBQVksR0FBYyxtQ0FBZSxDQUFDO1FBSTFDLHVCQUFrQixHQUFHLEVBQUUsQ0FBQztRQUc3QixNQUFNLEVBQUUsS0FBSyxFQUFFLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUN0QyxJQUFJLENBQUMsYUFBYSxHQUFHLElBQUksQ0FBQztRQUMxQixJQUFJLENBQUMsWUFBWSxHQUFHLEtBQUssQ0FBQztJQUM1QixDQUFDO0lBRUQsaUNBQWlDO0lBQzFCLEtBQUssQ0FBQyxJQUFJO1FBQ2YsTUFBTSxFQUFFLEtBQUssRUFBRSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDdEMsSUFBSSxDQUFDLFlBQVksR0FBRywwQkFBUyxDQUFDLEtBQUssQ0FBQyxNQUFNLEVBQUUsS0FBSyxFQUFFLElBQUksQ0FBQyxhQUFh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QUUsQ0FBQztJQUNwQyxlQUFlLEVBQUUsdUJBQWUsQ0FBQyxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsQ0FBQztJQUNwRCxVQUFVLEVBQUUsa0JBQVUsQ0FBQyxFQUFFLFFBQVEsRUFBRSxLQUFLLEVBQUUsQ0FBQztJQUMzQyxhQUFhLEVBQUUscUJBQWEsQ0FBQyxFQUFFLFFBQVEsRUFBRSxLQUFLLEVBQUUsQ0FBQztJQUNqRCxxQkFBcUIsRUFBRSw2QkFBcUIsQ0FBQyxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsQ0FBQztJQUNoRSxhQUFhLEVBQUUscUJBQWEsRUFBRTtJQUM5Qix3QkFBd0IsRUFBRSxnQ0FBd0IsRUFBRTtJQUNwRCxVQUFVLEVBQUUsa0JBQVUsRUFBRTtJQUN4QixtQkFBbUIsRUFBRSwyQkFBbUIsRUFBRTtJQUMxQyxNQUFNLEVBQUUsY0FBTSxFQUFFO0lBQ2hCLFlBQVksRUFBWixvQkFBWTtJQUNaLE1BQU0sRUFBTixjQUFNO0lBQ04sS0FBSyxFQUFMLGFBQUs7SUFDTCxRQUFRLEVBQVIsZ0JBQVE7SUFDUixPQUFPLEVBQUUsZUFBTyxFQUFFO0NBQ25CLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55ICovXG5cbmltcG9ydCB7IElDb25maWcgfSBmcm9tIFwiQG9jbGlmL2NvbmZpZ1wiO1xuaW1wb3J0IHtcbiAgSUluaXRpYWxSZW5kZXJCZW5jaG1hcmtQYXJhbXMsXG4gIElNYXJrZXIsXG4gIEluaXRpYWxSZW5kZXJCZW5jaG1hcmssXG4gIG5ldHdvcmtDb25kaXRpb25zLFxuICBSdW5uZXIsXG59IGZyb20gXCJAdHJhY2VyYmVuY2gvY29yZVwiO1xuaW1wb3J0IHR5cGUgeyBDaHJvbWVTcGF3bk9wdGlvbnMgfSBmcm9tIFwiQHRyYWNlcmJlbmNoL3NwYXduLWNocm9tZVwiO1xuaW1wb3J0IFByb3RvY29sIGZyb20gXCJkZXZ0b29scy1wcm90b2NvbFwiO1xuaW1wb3J0ICogYXMgZnMgZnJvbSBcImZzLWV4dHJhXCI7XG5pbXBvcnQgKiBhcyBwYXRoIGZyb20gXCJwYXRoXCI7XG5cbmltcG9ydCB7IGZsYWdzLCBnZXRDb25maWcsIFRCQmFzZUNvbW1hbmQgfSBmcm9tIFwiLi4vLi4vY29tbWFuZC1jb25maWdcIjtcbmltcG9ydCB7XG4gIGRlZmF1bHRGbGFnQXJncyxcbiAgZmlkZWxpdHlMb29rdXAsXG4gIGhlYWRsZXNzRmxhZ3MsXG59IGZyb20gXCIuLi8uLi9jb21tYW5kLWNvbmZpZy9kZWZhdWx0LWZsYWctYXJnc1wiO1xuaW1wb3J0IHtcbiAgQ09OVFJPTF9FTlZfT1ZFUlJJREVfQVRUUixcbiAgRVhQRVJJTUVOVF9FTlZfT1ZFUlJJREVfQVRUUixcbiAgSVRCQ29uZmlnLFxufSBmcm9tIFwiLi4vLi4vY29tbWFuZC1jb25maWcvdGItY29uZmlnXCI7XG5pbXBvcnQgeyBnZXRFbXVsYXRlRGV2aWNlU2V0dGluZ0ZvcktleUFuZE9yaWVudGF0aW9uIH0gZnJvbSBcIi4uLy4uL2hlbHBlcnMvZGV2aWNlLXNldHRpbmdzXCI7XG5pbXBvcnQge1xuICBicm93c2VyQXJncyxcbiAgY29uZmlnLFxuICBjb250cm9sVVJMLFxuICBjcHVUaHJvdHRsZVJhdGUsXG4gIGRlYnVnLFxuICBlbXVsYXRlRGV2aWNlLFxuICBlbXVsYXRlRGV2aWNlT3JpZW50YXRpb24sXG4gIGV4cGVyaW1lbnRVUkwsXG4gIGZpZGVsaXR5LFxuICBoZWFkbGVzcyxcbiAgaXNDSUVudixcbiAgbWFya2VycyxcbiAgbmV0d29yayxcbiAgcmVncmVzc2lvblRocmVzaG9sZCxcbiAgcmVwb3J0LFxuICBydW50aW1lU3RhdHMsXG4gIHNvY2tzUG9ydHMsXG4gIHRiUmVzdWx0c0ZvbGRlcixcbiAgdHJhY2luZ0xvY2F0aW9uU2VhcmNoLFxufSBmcm9tIFwiLi4vLi4vaGVscGVycy9mbGFnc1wiO1xuaW1wb3J0IHtcbiAgY2hhbGtTY2hlbWUsXG4gIGNoZWNrRW52aXJvbm1lbnRTcGVjaWZpY092ZXJyaWRlLFxuICBkdXJhdGlvbkluU2VjLFxuICBwYXJzZU1hcmtlcnMsXG4gIHRpbWVzdGFtcCxcbn0gZnJvbSBcIi4uLy4uL2hlbHBlcnMvdXRpbHNcIjtcbmltcG9ydCBDb21wYXJlQW5hbHl6ZSBmcm9tIFwiLi9hbmFseXplXCI7XG5pbXBvcnQgQ29tcGFyZVJlcG9ydCBmcm9tIFwiLi9yZXBvcnRcIjtcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdmFyLXJlcXVpcmVzXG5jb25zdCBhcmNoaXZlciA9IHJlcXVpcmUoXCJhcmNoaXZlclwiKTtcbmV4cG9ydCBpbnRlcmZhY2UgSUNvbXBhcmVGbGFncyB7XG4gIGhpZGVBbmFseXNpczogYm9vbGVhbjtcbiAgYnJvd3NlckFyZ3M6IHN0cmluZ1tdO1xuICBjcHVUaHJvdHRsZVJhdGU6IG51bWJlcjtcbiAgZmlkZWxpdHk6IG51bWJlcjtcbiAgbWFya2VyczogSU1hcmtlcltdO1xuICBuZXR3b3JrOiBQcm90b2NvbC5OZXR3b3JrLkVtdWxhdGVOZXR3b3JrQ29uZGl0aW9uc1JlcXVlc3Q7XG4gIHRiUmVzdWx0c0ZvbGRlcjogc3RyaW5nO1xuICBjb250cm9sVVJMOiBzdHJpbmcgfCB1bmRlZmluZWQ7XG4gIGV4cGVyaW1lbnRVUkw6IHN0cmluZyB8IHVuZGVmaW5lZDtcbiAgdHJhY2luZ0xvY2F0aW9uU2VhcmNoOiBzdHJpbmc7XG4gIHJ1bnRpbWVTdGF0czogYm9vbGVhbjtcbiAgZW11bGF0ZURldmljZT86IHN0cmluZztcbiAgZW11bGF0ZURldmljZU9yaWVudGF0aW9uPzogc3RyaW5nO1xuICBzb2Nrc1BvcnRzPzogW3N0cmluZywgc3RyaW5nXSB8IFtudW1iZXIsIG51bWJlcl0gfCB1bmRlZmluZWQ7XG4gIGRlYnVnOiBib29sZWFuO1xuICByZWdyZXNzaW9uVGhyZXNob2xkPzogbnVtYmVyO1xuICBoZWFkbGVzczogYm9vbGVhbjtcbiAgY29uZmlnPzogc3RyaW5nO1xuICByZXBvcnQ/OiBib29sZWFuO1xuICBpc0NJRW52PzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29tcGFyZSBleHRlbmRzIFRCQmFzZUNvbW1hbmQge1xuICBwdWJsaWMgc3RhdGljIGRlc2NyaXB0aW9uID1cbiAgICBcIkNvbXBhcmUgdGhlIHBlcmZvcm1hbmNlIGRlbHRhIGJldHdlZW4gYW4gZXhwZXJpbWVudCBhbmQgY29udHJvbFwiO1xuICBwdWJsaWMgc3RhdGljIGZsYWdzID0ge1xuICAgIGhpZGVBbmFseXNpczogZmxhZ3MuYm9vbGVhbih7XG4gICAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICAgIGRlc2NyaXB0aW9uOiBcIkhpZGUgdGhlIHRoZSBhbmFseXNpcyBvdXRwdXQgaW4gdGVybWluYWxcIixcbiAgICB9KSxcbiAgICBicm93c2VyQXJnczogYnJvd3NlckFyZ3MoeyByZXF1aXJlZDogdHJ1ZSB9KSxcbiAgICBjcHVUaHJvdHRsZVJhdGU6IGNwdVRocm90dGxlUmF0ZSh7IHJlcXVpcmVkOiB0cnVlIH0pLFxuICAgIGZpZGVsaXR5OiBmaWRlbGl0eSh7IHJlcXVpcmVkOiB0cnVlIH0pLFxuICAgIG1hcmtlcnM6IG1hcmtlcnMoeyByZXF1aXJlZDogdHJ1ZSB9KSxcbiAgICBuZXR3b3JrOiBuZXR3b3JrKHsgcmVxdWlyZWQ6IHRydWUgfSksXG4gICAgdGJSZXN1bHRzRm9sZGVyOiB0YlJlc3VsdHNGb2xkZXIoeyByZXF1aXJlZDogdHJ1ZSB9KSxcbiAgICBjb250cm9sVVJMOiBjb250cm9sVVJMKHsgcmVxdWlyZWQ6IGZhbHNlIH0pLFxuICAgIGV4cGVyaW1lbnRVUkw6IGV4cGVyaW1lbnRVUkwoeyByZXF1aXJlZDogZmFsc2UgfSksXG4gICAgdHJhY2luZ0xvY2F0aW9uU2VhcmNoOiB0cmFjaW5nTG9jYXRpb25TZWFyY2goeyByZXF1aXJlZDogdHJ1ZSB9KSxcbiAgICBlbXVsYXRlRGV2aWNlOiBlbXVsYXRlRGV2aWNlKCksXG4gICAgZW11bGF0ZURldmljZU9yaWVudGF0aW9uOiBlbXVsYXRlRGV2aWNlT3JpZW50YXRpb24oKSxcbiAgICBzb2Nrc1BvcnRzOiBzb2Nrc1BvcnRzKCksXG4gICAgcmVncmVzc2lvblRocmVzaG9sZDogcmVncmVzc2lvblRocmVzaG9sZCgpLFxuICAgIGNvbmZpZzogY29uZmlnKCksXG4gICAgcnVudGltZVN0YXRzLFxuICAgIHJlcG9ydCxcbiAgICBkZWJ1ZyxcbiAgICBoZWFkbGVzcyxcbiAgICBpc0NJRW52OiBpc0NJRW52KCksXG4gIH07XG4gIHB1YmxpYyBjb21wYXJlRmxhZ3M6IElDb21wYXJlRmxhZ3M7XG4gIHB1YmxpYyBwYXJzZWRDb25maWc6IElUQkNvbmZpZyA9IGRlZmF1bHRGbGFnQXJncztcbiAgLy8gZmxhZ3MgZXhwbGljaXRseSBzcGVjaWZpZWQgd2l0aGluIHRoZSBjbGkgd2hlblxuICAvLyBydW5uaW5nIHRoZSBjb21tYW5kLiB0aGVzZSB3aWxsIG92ZXJyaWRlIGFsbFxuICBwdWJsaWMgZXhwbGljaXRGbGFnczogc3RyaW5nW107XG4gIHB1YmxpYyBhbmFseXplZEpTT05TdHJpbmcgPSBcIlwiO1xuICBjb25zdHJ1Y3Rvcihhcmd2OiBzdHJpbmdbXSwgY29uZmlnOiBJQ29uZmlnKSB7XG4gICAgc3VwZXIoYXJndiwgY29uZmlnKTtcbiAgICBjb25zdCB7IGZsYWdzIH0gPSB0aGlzLnBhcnNlKENvbXBhcmUpO1xuICAgIHRoaXMuZXhwbGljaXRGbGFncyA9IGFyZ3Y7XG4gICAgdGhpcy5jb21wYXJlRmxhZ3MgPSBmbGFncztcbiAgfVxuXG4gIC8vIGluc3RhbnRpYXRlZCBiZWZvcmUgdGhpcy5ydW4oKVxuICBwdWJsaWMgYXN5bmMgaW5pdCgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCB7IGZsYWdzIH0gPSB0aGlzLnBhcnNlKENvbXBhcmUpO1xuICAgIHRoaXMucGFyc2VkQ29uZmlnID0gZ2V0Q29uZmlnKGZsYWdzLmNvbmZpZywgZmxhZ3MsIHRoaXMuZXhwbGljaXRGbGFncyk7XG4gICAgdGhpcy5jb21wYXJlRmxhZ3MgPSBmbGFncztcbiAgICBhd2FpdCB0aGlzLnBhcnNlRmxhZ3MoKTtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBydW4oKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICBjb25zdCB7IGhpZGVBbmFseXNpcyB9ID0gdGhpcy5jb21wYXJlRmxhZ3M7XG4gICAgY29uc3QgW1xuICAgICAgY29udHJvbFNldHRpbmdzLFxuICAgICAgZXhwZXJpbWVudFNldHRpbmdzLFxuICAgIF0gPSB0aGlzLmdlbmVyYXRlQ29udHJvbEV4cGVyaW1lbnRTZXJ2ZXJDb25maWcoKTtcblxuICAgIC8vIHRoaXMgc2hvdWxkIGJlIGRpcmVjdGx5IGFib3ZlIHRoZSBpbnN0YW50aWF0aW9uIG9mIHRoZSBJbml0aWFsUmVuZGVyQmVuY2htYXJrc1xuICAgIGlmICh0aGlzLnBhcnNlZENvbmZpZy5kZWJ1Zykge1xuICAgICAgT2JqZWN0LmVudHJpZXModGhpcy5wYXJzZWRDb25maWcpLmZvckVhY2goKFtrZXksIHZhbHVlXSkgPT4ge1xuICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICB0aGlzLmxvZyhgJHtrZXl9OiAke0pTT04uc3RyaW5naWZ5KHZhbHVlKX1gKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgYmVuY2htYXJrcyA9IHtcbiAgICAgIGNvbnRyb2w6IG5ldyBJbml0aWFsUmVuZGVyQmVuY2htYXJrKGNvbnRyb2xTZXR0aW5ncyksXG4gICAgICBleHBlcmltZW50OiBuZXcgSW5pdGlhbFJlbmRlckJlbmNobWFyayhleHBlcmltZW50U2V0dGluZ3MpLFxuICAgIH07XG5cbiAgICBjb25zdCBydW5uZXIgPSBuZXcgUnVubmVyKFtiZW5jaG1hcmtzLmNvbnRyb2wsIGJlbmNobWFya3MuZXhwZXJpbWVudF0pO1xuICAgIGNvbnN0IHN0YXJ0VGltZSA9IHRpbWVzdGFtcCgpO1xuICAgIGF3YWl0IHJ1bm5lclxuICAgICAgLnJ1bih0aGlzLmNvbXBhcmVGbGFncy5maWRlbGl0eSwgdGhpcy5sb2cpXG4gICAgICAudGhlbihhc3luYyAocmVzdWx0czogYW55KSA9PiB7XG4gICAgICAgIGNvbnN0IGVuZFRpbWUgPSB0aW1lc3RhbXAoKTtcbiAgICAgICAgaWYgKCFyZXN1bHRzWzBdLnNhbXBsZXNbMF0pIHtcbiAgICAgICAgICB0aGlzLmVycm9yKFxuICAgICAgICAgICAgYENvdWxkIG5vdCBzYW1wbGUgZnJvbSBwcm92aWRlZCB1cmxzXFxuQ09OVFJPTDogJHt0aGlzLnBhcnNlZENvbmZpZy5jb250cm9sVVJMfVxcbkVYUEVSSU1FTlQ6ICR7dGhpcy5wYXJzZWRDb25maWcuZXhwZXJpbWVudFVSTH0uYFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcmVzdWx0SlNPTlBhdGggPSBgJHt0aGlzLnBhcnNlZENvbmZpZy50YlJlc3VsdHNGb2xkZXJ9L2NvbXBhcmUuanNvbmA7XG5cbiAgICAgICAgZnMud3JpdGVGaWxlU3luYyhyZXN1bHRKU09OUGF0aCwgSlNPTi5zdHJpbmdpZnkocmVzdWx0cywgbnVsbCwgMikpO1xuXG4gICAgICAgIGNvbnN0IHRyYWNlc0RpciA9IGAke3RoaXMucGFyc2VkQ29uZmlnLnRiUmVzdWx0c0ZvbGRlcn0vdHJhY2VzYDtcbiAgICAgICAgY29uc3QgemlwT3V0cHV0ID0gZnMuY3JlYXRlV3JpdGVTdHJlYW0oXG4gICAgICAgICAgYCR7dGhpcy5wYXJzZWRDb25maWcudGJSZXN1bHRzRm9sZGVyfS90cmFjZXMuemlwYFxuICAgICAgICApO1xuICAgICAgICBjb25zdCBhcmNoaXZlID0gYXJjaGl2ZXIoXCJ6aXBcIiwge1xuICAgICAgICAgIHpsaWI6IHsgbGV2ZWw6IDkgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIGFyY2hpdmUuZGlyZWN0b3J5KHRyYWNlc0RpciwgXCJ0cmFjZXNcIik7XG4gICAgICAgIGFyY2hpdmUucGlwZSh6aXBPdXRwdXQpO1xuICAgICAgICBhcmNoaXZlLmZpbmFsaXplKCk7XG5cbiAgICAgICAgLy8gZXNsaW50OmRpc2FibGUtbmV4dC1saW5lOiBtYXgtbGluZS1sZW5ndGhcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IGAke2NoYWxrU2NoZW1lLmJsYWNrQmdHcmVlbihcbiAgICAgICAgICBgICAgICR7Y2hhbGtTY2hlbWUud2hpdGUoXCJTVUNDRVNTIVwiKX0gICAgYFxuICAgICAgICApfSAke3RoaXMucGFyc2VkQ29uZmlnLmZpZGVsaXR5fSB0ZXN0IHNhbXBsZXMgdG9vayAke2R1cmF0aW9uSW5TZWMoXG4gICAgICAgICAgZW5kVGltZSxcbiAgICAgICAgICBzdGFydFRpbWVcbiAgICAgICAgKX0gc2Vjb25kc2A7XG5cbiAgICAgICAgdGhpcy5sb2coYFxcbiR7bWVzc2FnZX1gKTtcblxuICAgICAgICBpZiAoIWhpZGVBbmFseXNpcykge1xuICAgICAgICAgIHRoaXMuYW5hbHl6ZWRKU09OU3RyaW5nID0gYXdhaXQgQ29tcGFyZUFuYWx5emUucnVuKFtcbiAgICAgICAgICAgIHJlc3VsdEpTT05QYXRoLFxuICAgICAgICAgICAgXCItLWZpZGVsaXR5XCIsXG4gICAgICAgICAgICBgJHt0aGlzLnBhcnNlZENvbmZpZy5maWRlbGl0eX1gLFxuICAgICAgICAgICAgXCItLXJlZ3Jlc3Npb25UaHJlc2hvbGRcIixcbiAgICAgICAgICAgIGAke3RoaXMucGFyc2VkQ29uZmlnLnJlZ3Jlc3Npb25UaHJlc2hvbGR9YCxcbiAgICAgICAgICAgIFwiLS1pc0NJRW52XCIsXG4gICAgICAgICAgICBgJHt0aGlzLnBhcnNlZENvbmZpZy5pc0NJRW52fWAsXG4gICAgICAgICAgXSk7XG5cbiAgICAgICAgICBmcy53cml0ZUZpbGVTeW5jKFxuICAgICAgICAgICAgYCR7dGhpcy5wYXJzZWRDb25maWcudGJSZXN1bHRzRm9sZGVyfS9yZXBvcnQuanNvbmAsXG4gICAgICAgICAgICB0aGlzLmFuYWx5emVkSlNPTlN0cmluZ1xuICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBpZiB3ZSB3YW50IHRvIHJ1biB0aGUgQ29tcGFyZVJlcG9ydCB3aXRob3V0IGNhbGxpbmcgYSBzZXBhcmF0ZSBjb21tYW5kXG4gICAgICAgIGlmICh0aGlzLnBhcnNlZENvbmZpZy5yZXBvcnQpIHtcbiAgICAgICAgICBhd2FpdCBDb21wYXJlUmVwb3J0LnJ1bihbXG4gICAgICAgICAgICBcIi0tdGJSZXN1bHRzRm9sZGVyXCIsXG4gICAgICAgICAgICBgJHt0aGlzLnBhcnNlZENvbmZpZy50YlJlc3VsdHNGb2xkZXJ9YCxcbiAgICAgICAgICAgIFwiLS1jb25maWdcIixcbiAgICAgICAgICAgIGAke3RoaXMucGFyc2VkQ29uZmlnLmNvbmZpZ31gLFxuICAgICAgICAgIF0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gd2l0aCBkZWJ1ZyBmbGFnIG91dHB1dCB0aHJlZSBmaWxlc1xuICAgICAgICAvLyBvbiBjb25maWcgc3BlY2lmaWNzXG4gICAgICAgIGlmICh0aGlzLnBhcnNlZENvbmZpZy5kZWJ1Zykge1xuICAgICAgICAgIGZzLndyaXRlRmlsZVN5bmMoXG4gICAgICAgICAgICBgJHt0aGlzLnBhcnNlZENvbmZpZy50YlJlc3VsdHNGb2xkZXJ9L3NlcnZlci1jb250cm9sLXNldHRpbmdzLmpzb25gLFxuICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkoT2JqZWN0LmFzc2lnbihjb250cm9sU2V0dGluZ3MpLCBudWxsLCAyKVxuICAgICAgICAgICk7XG5cbiAgICAgICAgICBmcy53cml0ZUZpbGVTeW5jKFxuICAgICAgICAgICAgYCR7dGhpcy5wYXJzZWRDb25maWcudGJSZXN1bHRzRm9sZGVyfS9zZXJ2ZXItZXhwZXJpbWVudC1zZXR0aW5ncy5qc29uYCxcbiAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KE9iamVjdC5hc3NpZ24oZXhwZXJpbWVudFNldHRpbmdzKSwgbnVsbCwgMilcbiAgICAgICAgICApO1xuXG4gICAgICAgICAgZnMud3JpdGVGaWxlU3luYyhcbiAgICAgICAgICAgIGAke3RoaXMucGFyc2VkQ29uZmlnLnRiUmVzdWx0c0ZvbGRlcn0vY29tcGFyZS1mbGFncy1zZXR0aW5ncy5qc29uYCxcbiAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KE9iamVjdC5hc3NpZ24odGhpcy5wYXJzZWRDb25maWcpLCBudWxsLCAyKVxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycjogYW55KSA9PiB7XG4gICAgICAgIHRoaXMuZXJyb3IoZXJyKTtcbiAgICAgIH0pO1xuXG4gICAgcmV0dXJuIHRoaXMuYW5hbHl6ZWRKU09OU3RyaW5nO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBwYXJzZUZsYWdzKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IHtcbiAgICAgIHRiUmVzdWx0c0ZvbGRlcixcbiAgICAgIGZpZGVsaXR5LFxuICAgICAgbWFya2VycyxcbiAgICAgIHJlZ3Jlc3Npb25UaHJlc2hvbGQsXG4gICAgICBoZWFkbGVzcyxcbiAgICAgIGNvbnRyb2xVUkwsXG4gICAgICBleHBlcmltZW50VVJMLFxuICAgIH0gPSAodGhpcy5wYXJzZWRDb25maWcgYXMgdW5rbm93bikgYXMgSUNvbXBhcmVGbGFncztcblxuICAgIC8vIG1vZGlmaWVzIHByb3BlcnRpZXMgb2YgZmxhZ3MgdGhhdCB3ZXJlIG5vdCBzZXRcbiAgICAvLyBkdXJpbmcgZmxhZy5wYXJzZSgpLiB0aGVzZSBhcmUgaW50ZW50aW9uYWxseVxuICAgIC8vIG5vdCBkZWNvbnN0cnVjdGVkIGFzIHRvIG1haW50YWluIHRoZSBtdXRhYmxlXG4gICAgLy8gZmxhZ3Mgb2JqZWN0IHN0YXRlXG4gICAgaWYgKHR5cGVvZiBmaWRlbGl0eSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgdGhpcy5jb21wYXJlRmxhZ3MuZmlkZWxpdHkgPSBwYXJzZUludChcbiAgICAgICAgKGZpZGVsaXR5TG9va3VwIGFzIGFueSlbZmlkZWxpdHldLFxuICAgICAgICAxMFxuICAgICAgKTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBtYXJrZXJzID09PSBcInN0cmluZ1wiKSB7XG4gICAgICB0aGlzLnBhcnNlZENvbmZpZy5tYXJrZXJzID0gcGFyc2VNYXJrZXJzKG1hcmtlcnMpO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHJlZ3Jlc3Npb25UaHJlc2hvbGQgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIHRoaXMucGFyc2VkQ29uZmlnLnJlZ3Jlc3Npb25UaHJlc2hvbGQgPSBwYXJzZUludChyZWdyZXNzaW9uVGhyZXNob2xkLCAxMCk7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgY29udHJvbFVSTCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aGlzLmVycm9yKFxuICAgICAgICBcImNvbnRyb2xVUkwgaXMgcmVxdWlyZWQgZWl0aGVyIGluIHRoZSB0YmNvbmZpZy5qc29uIG9yIGFzIGNsaSBmbGFnXCJcbiAgICAgICk7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBleHBlcmltZW50VVJMID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMuZXJyb3IoXG4gICAgICAgIFwiZXhwZXJpbWVudFVSTCBpcyByZXF1aXJlZCBlaXRoZXIgaW4gdGhlIHRiY29uZmlnLmpzb24gb3IgYXMgY2xpIGZsYWdcIlxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBpZiBoZWFkbGVzcyBmbGFnIGlzIHRydWUgaW5jbHVkZSB0aGUgaGVhZGxlc3MgZmxhZ3NcbiAgICBpZiAoaGVhZGxlc3MpIHtcbiAgICAgIHRoaXMucGFyc2VkQ29uZmlnLmJyb3dzZXJBcmdzID0gdGhpcy5jb21wYXJlRmxhZ3MuYnJvd3NlckFyZ3MuY29uY2F0KFxuICAgICAgICBoZWFkbGVzc0ZsYWdzXG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIGlmIHRoZSBmb2xkZXIgZm9yIHRoZSB0cmFjZXJiZW5jaCByZXN1bHRzIGZpbGVcbiAgICAvLyBkb2VzIG5vdCBleGlzdCB0aGVuIGNyZWF0ZSBpdFxuICAgIGZzLm1rZGlycFN5bmMocGF0aC5qb2luKHRiUmVzdWx0c0ZvbGRlciwgXCJ0cmFjZXNcIikpO1xuICB9XG5cbiAgLyoqXG4gICAqIEZpbmFsIHJlc3VsdCBvZiB0aGUgY29uZmlncyBhcmUgaW4gdGhlIGZvbGxvd2luZyBvcmRlcjpcbiAgICpcbiAgICogY29udHJvbENvbmZpZ3MgPSB0YmNvbmZpZzpjb250cm9sQmVuY2htYXJrRW52aXJvbm1lbnQgPiBjb21tYW5kIGxpbmUgPiB0YmNvbmZpZyA+IGRlZmF1bHRcbiAgICogZXhwZXJpbWVudENvbmZpZ3MgPSB0YmNvbmZpZzpleHBlcmltZW50QmVuY2htYXJrRW52aXJvbm1lbnQgPiBjb21tYW5kIGxpbmUgPiB0YmNvbmZpZyA+IGRlZmF1bHRcbiAgICpcbiAgICogVGhpcyBmdW5jdGlvbnMgaGFuZGxlcyB0aGUgdHNjb25maWc6KiogcGFydCBzaW5jZSBpdCBpcyBhc3N1bWVkIHRoYXQgcGFyZW50IGZ1bmN0aW9uIHRoYXQgcGFzc2VkIGlucHV0IFwiZmxhZ3NcIlxuICAgKiB3b3VsZCd2ZSBoYW5kbGVkIFwiY29tbWFuZCBsaW5lID4gdGJjb25maWcgPiBkZWZhdWx0XCJcbiAgICpcbiAgICogQHBhcmFtIHRoaXMucGFyc2VkQ29uZmlnIC0gT2JqZWN0IGNvbnRhaW5pbmcgY29uZmlncyBwYXJzZWQgZnJvbSB0aGUgQ29tbWFuZCBjbGFzc1xuICAgKi9cbiAgcHJpdmF0ZSBnZW5lcmF0ZUNvbnRyb2xFeHBlcmltZW50U2VydmVyQ29uZmlnKCk6IFtcbiAgICBJSW5pdGlhbFJlbmRlckJlbmNobWFya1BhcmFtcyxcbiAgICBJSW5pdGlhbFJlbmRlckJlbmNobWFya1BhcmFtc1xuICBdIHtcbiAgICAvLyBkZWxheSBpbiBtcyB0aW1lcyB0aGUgbnVtYmVyIG9mIHNhbXBsZXMuIHRoaXMgaW1wcm92ZXMgdmFyaWFuY2UuXG4gICAgLy8gZWcgMTAwIHRvdGFsIHNhbXBsZXMgWCAyMDBtcyBwZXIgc2FtcGxlID0gMjAgc2Vjb25kcyB0b3RhbCBhZGRlZCB0byB0aGUgdHJhY2UgdGltZVxuICAgIGNvbnN0IGRlbGF5ID0gMjAwO1xuICAgIGNvbnN0IGNvbnRyb2xCcm93c2VyOiBQYXJ0aWFsPENocm9tZVNwYXduT3B0aW9ucz4gPSB7XG4gICAgICBhZGRpdGlvbmFsQXJndW1lbnRzOiB0aGlzLmNvbXBhcmVGbGFncy5icm93c2VyQXJncyxcbiAgICB9O1xuICAgIGNvbnN0IGV4cGVyaW1lbnRCcm93c2VyOiBQYXJ0aWFsPENocm9tZVNwYXduT3B0aW9ucz4gPSB7XG4gICAgICBhZGRpdGlvbmFsQXJndW1lbnRzOiB0aGlzLmNvbXBhcmVGbGFncy5icm93c2VyQXJncyxcbiAgICB9O1xuXG4gICAgLy8gY29uZmlnIGZvciB0aGUgYnJvd3NlcnMgdG8gbGV2ZXJhZ2Ugc29ja3MgcHJveHlcbiAgICBpZiAodGhpcy5wYXJzZWRDb25maWcuc29ja3NQb3J0cykge1xuICAgICAgaWYgKGNvbnRyb2xCcm93c2VyLmFkZGl0aW9uYWxBcmd1bWVudHMpIHtcbiAgICAgICAgY29udHJvbEJyb3dzZXIuYWRkaXRpb25hbEFyZ3VtZW50cyA9IGNvbnRyb2xCcm93c2VyLmFkZGl0aW9uYWxBcmd1bWVudHMuY29uY2F0KFxuICAgICAgICAgIFtgLS1wcm94eS1zZXJ2ZXI9c29ja3M1Oi8vMC4wLjAuMDoke3RoaXMucGFyc2VkQ29uZmlnLnNvY2tzUG9ydHNbMF19YF1cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICAgIGlmIChleHBlcmltZW50QnJvd3Nlci5hZGRpdGlvbmFsQXJndW1lbnRzKSB7XG4gICAgICAgIGV4cGVyaW1lbnRCcm93c2VyLmFkZGl0aW9uYWxBcmd1bWVudHMgPSBleHBlcmltZW50QnJvd3Nlci5hZGRpdGlvbmFsQXJndW1lbnRzLmNvbmNhdChcbiAgICAgICAgICBbYC0tcHJveHktc2VydmVyPXNvY2tzNTovLzAuMC4wLjA6JHt0aGlzLnBhcnNlZENvbmZpZy5zb2Nrc1BvcnRzWzFdfWBdXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IGNvbnRyb2xOZXR3b3JrOiBzdHJpbmcgPSBjaGVja0Vudmlyb25tZW50U3BlY2lmaWNPdmVycmlkZShcbiAgICAgIFwibmV0d29ya1wiLFxuICAgICAgdGhpcy5jb21wYXJlRmxhZ3MsXG4gICAgICBDT05UUk9MX0VOVl9PVkVSUklERV9BVFRSLFxuICAgICAgdGhpcy5wYXJzZWRDb25maWdcbiAgICApO1xuICAgIGNvbnN0IGNvbnRyb2xFbXVsYXRlRGV2aWNlID0gY2hlY2tFbnZpcm9ubWVudFNwZWNpZmljT3ZlcnJpZGUoXG4gICAgICBcImVtdWxhdGVEZXZpY2VcIixcbiAgICAgIHRoaXMuY29tcGFyZUZsYWdzLFxuICAgICAgQ09OVFJPTF9FTlZfT1ZFUlJJREVfQVRUUixcbiAgICAgIHRoaXMucGFyc2VkQ29uZmlnXG4gICAgKTtcbiAgICBjb25zdCBjb250cm9sRW11bGF0ZURldmljZU9yaWVudGF0aW9uID0gY2hlY2tFbnZpcm9ubWVudFNwZWNpZmljT3ZlcnJpZGUoXG4gICAgICBcImVtdWxhdGVEZXZpY2VPcmllbnRhdGlvblwiLFxuICAgICAgdGhpcy5jb21wYXJlRmxhZ3MsXG4gICAgICBDT05UUk9MX0VOVl9PVkVSUklERV9BVFRSLFxuICAgICAgdGhpcy5wYXJzZWRDb25maWdcbiAgICApO1xuICAgIGNvbnN0IGV4cGVyaW1lbnROZXR3b3JrOiBzdHJpbmcgPSBjaGVja0Vudmlyb25tZW50U3BlY2lmaWNPdmVycmlkZShcbiAgICAgIFwibmV0d29ya1wiLFxuICAgICAgdGhpcy5jb21wYXJlRmxhZ3MsXG4gICAgICBFWFBFUklNRU5UX0VOVl9PVkVSUklERV9BVFRSLFxuICAgICAgdGhpcy5wYXJzZWRDb25maWdcbiAgICApO1xuICAgIGNvbnN0IGV4cGVyaW1lbnRFbXVsYXRlRGV2aWNlID0gY2hlY2tFbnZpcm9ubWVudFNwZWNpZmljT3ZlcnJpZGUoXG4gICAgICBcImVtdWxhdGVEZXZpY2VcIixcbiAgICAgIHRoaXMuY29tcGFyZUZsYWdzLFxuICAgICAgRVhQRVJJTUVOVF9FTlZfT1ZFUlJJREVfQVRUUixcbiAgICAgIHRoaXMucGFyc2VkQ29uZmlnXG4gICAgKTtcbiAgICBjb25zdCBleHBlcmltZW50RW11bGF0ZURldmljZU9yaWVudGF0aW9uID0gY2hlY2tFbnZpcm9ubWVudFNwZWNpZmljT3ZlcnJpZGUoXG4gICAgICBcImVtdWxhdGVEZXZpY2VPcmllbnRhdGlvblwiLFxuICAgICAgdGhpcy5jb21wYXJlRmxhZ3MsXG4gICAgICBFWFBFUklNRU5UX0VOVl9PVkVSUklERV9BVFRSLFxuICAgICAgdGhpcy5wYXJzZWRDb25maWdcbiAgICApO1xuXG4gICAgY29uc3QgY29udHJvbFNldHRpbmdzOiBJSW5pdGlhbFJlbmRlckJlbmNobWFya1BhcmFtcyA9IHtcbiAgICAgIGJyb3dzZXI6IGNvbnRyb2xCcm93c2VyLFxuICAgICAgY3B1VGhyb3R0bGVSYXRlOiBjaGVja0Vudmlyb25tZW50U3BlY2lmaWNPdmVycmlkZShcbiAgICAgICAgXCJjcHVUaHJvdHRsZVJhdGVcIixcbiAgICAgICAgdGhpcy5jb21wYXJlRmxhZ3MsXG4gICAgICAgIENPTlRST0xfRU5WX09WRVJSSURFX0FUVFIsXG4gICAgICAgIHRoaXMucGFyc2VkQ29uZmlnXG4gICAgICApLFxuICAgICAgZGVsYXksXG4gICAgICBlbXVsYXRlRGV2aWNlU2V0dGluZ3M6IGNvbnRyb2xFbXVsYXRlRGV2aWNlXG4gICAgICAgID8gZ2V0RW11bGF0ZURldmljZVNldHRpbmdGb3JLZXlBbmRPcmllbnRhdGlvbihcbiAgICAgICAgICAgIGNvbnRyb2xFbXVsYXRlRGV2aWNlLFxuICAgICAgICAgICAgY29udHJvbEVtdWxhdGVEZXZpY2VPcmllbnRhdGlvblxuICAgICAgICAgIClcbiAgICAgICAgOiB1bmRlZmluZWQsXG4gICAgICBtYXJrZXJzOiB0aGlzLmNvbXBhcmVGbGFncy5tYXJrZXJzLFxuICAgICAgbmV0d29ya0NvbmRpdGlvbnM6IGNvbnRyb2xOZXR3b3JrXG4gICAgICAgID8gbmV0d29ya0NvbmRpdGlvbnNbY29udHJvbE5ldHdvcmsgYXMga2V5b2YgdHlwZW9mIG5ldHdvcmtDb25kaXRpb25zXVxuICAgICAgICA6IHRoaXMuY29tcGFyZUZsYWdzLm5ldHdvcmssXG4gICAgICBuYW1lOiBcImNvbnRyb2xcIixcbiAgICAgIHJ1bnRpbWVTdGF0czogdGhpcy5jb21wYXJlRmxhZ3MucnVudGltZVN0YXRzLFxuICAgICAgc2F2ZVRyYWNlczogKGkpID0+XG4gICAgICAgIGAke3RoaXMuY29tcGFyZUZsYWdzLnRiUmVzdWx0c0ZvbGRlcn0vdHJhY2VzL2NvbnRyb2wke2l9Lmpzb25gLFxuICAgICAgdXJsOiBwYXRoLmpvaW4oXG4gICAgICAgIHRoaXMuY29tcGFyZUZsYWdzLmNvbnRyb2xVUkwgKyB0aGlzLmNvbXBhcmVGbGFncy50cmFjaW5nTG9jYXRpb25TZWFyY2hcbiAgICAgICksXG4gICAgfTtcblxuICAgIGNvbnN0IGV4cGVyaW1lbnRTZXR0aW5nczogSUluaXRpYWxSZW5kZXJCZW5jaG1hcmtQYXJhbXMgPSB7XG4gICAgICBicm93c2VyOiBleHBlcmltZW50QnJvd3NlcixcbiAgICAgIGNwdVRocm90dGxlUmF0ZTogY2hlY2tFbnZpcm9ubWVudFNwZWNpZmljT3ZlcnJpZGUoXG4gICAgICAgIFwiY3B1VGhyb3R0bGVSYXRlXCIsXG4gICAgICAgIHRoaXMuY29tcGFyZUZsYWdzLFxuICAgICAgICBFWFBFUklNRU5UX0VOVl9PVkVSUklERV9BVFRSLFxuICAgICAgICB0aGlzLnBhcnNlZENvbmZpZ1xuICAgICAgKSxcbiAgICAgIGRlbGF5LFxuICAgICAgZW11bGF0ZURldmljZVNldHRpbmdzOiBleHBlcmltZW50RW11bGF0ZURldmljZVxuICAgICAgICA/IGdldEVtdWxhdGVEZXZpY2VTZXR0aW5nRm9yS2V5QW5kT3JpZW50YXRpb24oXG4gICAgICAgICAgICBleHBlcmltZW50RW11bGF0ZURldmljZSxcbiAgICAgICAgICAgIGV4cGVyaW1lbnRFbXVsYXRlRGV2aWNlT3JpZW50YXRpb25cbiAgICAgICAgICApXG4gICAgICAgIDogdW5kZWZpbmVkLFxuICAgICAgbWFya2VyczogdGhpcy5jb21wYXJlRmxhZ3MubWFya2VycyxcbiAgICAgIG5ldHdvcmtDb25kaXRpb25zOiBleHBlcmltZW50TmV0d29ya1xuICAgICAgICA/IG5ldHdvcmtDb25kaXRpb25zW2V4cGVyaW1lbnROZXR3b3JrIGFzIGtleW9mIHR5cGVvZiBuZXR3b3JrQ29uZGl0aW9uc11cbiAgICAgICAgOiB0aGlzLmNvbXBhcmVGbGFncy5uZXR3b3JrLFxuICAgICAgbmFtZTogXCJleHBlcmltZW50XCIsXG4gICAgICBydW50aW1lU3RhdHM6IHRoaXMuY29tcGFyZUZsYWdzLnJ1bnRpbWVTdGF0cyxcbiAgICAgIHNhdmVUcmFjZXM6IChpKSA9PlxuICAgICAgICBgJHt0aGlzLmNvbXBhcmVGbGFncy50YlJlc3VsdHNGb2xkZXJ9L3RyYWNlcy9leHBlcmltZW50JHtpfS5qc29uYCxcbiAgICAgIHVybDogcGF0aC5qb2luKFxuICAgICAgICB0aGlzLmNvbXBhcmVGbGFncy5leHBlcmltZW50VVJMICtcbiAgICAgICAgICB0aGlzLmNvbXBhcmVGbGFncy50cmFjaW5nTG9jYXRpb25TZWFyY2hcbiAgICAgICksXG4gICAgfTtcblxuICAgIHJldHVybiBbY29udHJvbFNldHRpbmdzLCBleHBlcmltZW50U2V0dGluZ3NdO1xuICB9XG59XG4iXX0=
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9tYWx5bmNoL0QvdHJhY2VyYmVuY2gvcGFja2FnZXMvY2xpL3NyYy9jb21tYW5kcy9jb21wYXJlL2luZGV4LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJhQUFBLHVELHlpbENBR0EsS0FBQSxDQUFBLE1BQUEsMEJBQUEsT0FBQSxDQUFBLG1CQUFBLENBQUEsQ0FBQSxDQVNBLEtBQUEsQ0FBQSxFQUFBLDBCQUFBLE9BQUEsQ0FBQSxVQUFBLENBQUEsQ0FBQSxDQUNBLEtBQUEsQ0FBQSxJQUFBLDBCQUFBLE9BQUEsQ0FBQSxNQUFBLENBQUEsQ0FBQSxDQUVBLEtBQUEsQ0FBQSxnQkFBQSwwQkFBQSxPQUFBLENBQUEsc0JBQUEsQ0FBQSxDQUFBLENBQ0EsS0FBQSxDQUFBLG1CQUFBLDBCQUFBLE9BQUEsQ0FBQSx3Q0FBQSxDQUFBLENBQUEsQ0FLQSxLQUFBLENBQUEsV0FBQSwwQkFBQSxPQUFBLENBQUEsZ0NBQUEsQ0FBQSxDQUFBLENBS0EsS0FBQSxDQUFBLGlCQUFBLDBCQUFBLE9BQUEsQ0FBQSwrQkFBQSxDQUFBLENBQUEsQ0FDQSxLQUFBLENBQUEsT0FBQSwwQkFBQSxPQUFBLENBQUEscUJBQUEsQ0FBQSxDQUFBLENBcUJBLEtBQUEsQ0FBQSxPQUFBLDBCQUFBLE9BQUEsQ0FBQSxxQkFBQSxDQUFBLENBQUEsQ0FPQSxLQUFBLENBQUEsU0FBQSwyQkFBQSxPQUFBLENBQUEsV0FBQSxDQUFBLENBQUEsQ0FDQSxLQUFBLENBQUEsUUFBQSwyQkFBQSxPQUFBLENBQUEsVUFBQSxDQUFBLENBQUEsQ0FDQTtBQUNBLEtBQU0sQ0FBQSxRQUFRLDJCQUFHLE9BQU8sQ0FBQyxVQUFELENBQVYsQ0FBZCxDQXdCQSxLQUFxQixDQUFBLE9BQXJCLFNBQXFDLGdCQUFBLENBQUEsYUFBckMsQ0FBa0QsQ0FrQ2hELFdBQUEsQ0FBWSxJQUFaLENBQTRCLE1BQTVCLENBQTJDLGtEQUN6QyxNQUFNLElBQU4sQ0FBWSxNQUFaLEVBRHlDLHlCQUxwQyxLQUFBLFlB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LENBQUUsSUFBWixDQUF0QixDQWJILENBY3BCLGFBQWEsQ0FBRSxPQUFBLENBQUEsYUFBQSxFQWRLLENBZXBCLHdCQUF3QixDQUFFLE9BQUEsQ0FBQSx3QkFBQSxFQWZOLENBZ0JwQixVQUFVLENBQUUsT0FBQSxDQUFBLFVBQUEsRUFoQlEsQ0FpQnBCLG1CQUFtQixDQUFFLE9BQUEsQ0FBQSxtQkFBQSxFQWpCRCxDQWtCcEIsTUFBTSxDQUFFLE9BQUEsQ0FBQSxNQUFBLEVBbEJZLENBbUJwQixZQUFZLENBQVosT0FBQSxDQUFBLFlBbkJvQixDQW9CcEIsTUFBTSxDQUFOLE9BQUEsQ0FBQSxNQXBCb0IsQ0FxQnBCLEtBQUssQ0FBTCxPQUFBLENBQUEsS0FyQm9CLENBc0JwQixRQUFRLENBQVIsT0FBQSxDQUFBLFFBdEJvQixDQXVCcEIsT0FBTyxDQUFFLE9BQUEsQ0FBQSxPQUFBLEVBdkJXLENBQVIsQyIsInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnkgKi9cblxuaW1wb3J0IHsgSUNvbmZpZyB9IGZyb20gXCJAb2NsaWYvY29uZmlnXCI7XG5pbXBvcnQge1xuICBJSW5pdGlhbFJlbmRlckJlbmNobWFya1BhcmFtcyxcbiAgSU1hcmtlcixcbiAgSW5pdGlhbFJlbmRlckJlbmNobWFyayxcbiAgbmV0d29ya0NvbmRpdGlvbnMsXG4gIFJ1bm5lcixcbn0gZnJvbSBcIkB0cmFjZXJiZW5jaC9jb3JlXCI7XG5pbXBvcnQgdHlwZSB7IENocm9tZVNwYXduT3B0aW9ucyB9IGZyb20gXCJAdHJhY2VyYmVuY2gvc3Bhd24tY2hyb21lXCI7XG5pbXBvcnQgUHJvdG9jb2wgZnJvbSBcImRldnRvb2xzLXByb3RvY29sXCI7XG5pbXBvcnQgKiBhcyBmcyBmcm9tIFwiZnMtZXh0cmFcIjtcbmltcG9ydCAqIGFzIHBhdGggZnJvbSBcInBhdGhcIjtcblxuaW1wb3J0IHsgZmxhZ3MsIGdldENvbmZpZywgVEJCYXNlQ29tbWFuZCB9IGZyb20gXCIuLi8uLi9jb21tYW5kLWNvbmZpZ1wiO1xuaW1wb3J0IHtcbiAgZGVmYXVsdEZsYWdBcmdzLFxuICBmaWRlbGl0eUxvb2t1cCxcbiAgaGVhZGxlc3NGbGFncyxcbn0gZnJvbSBcIi4uLy4uL2NvbW1hbmQtY29uZmlnL2RlZmF1bHQtZmxhZy1hcmdzXCI7XG5pbXBvcnQge1xuICBDT05UUk9MX0VOVl9PVkVSUklERV9BVFRSLFxuICBFWFBFUklNRU5UX0VOVl9PVkVSUklERV9BVFRSLFxuICBJVEJDb25maWcsXG59IGZyb20gXCIuLi8uLi9jb21tYW5kLWNvbmZpZy90Yi1jb25maWdcIjtcbmltcG9ydCB7IGdldEVtdWxhdGVEZXZpY2VTZXR0aW5nRm9yS2V5QW5kT3JpZW50YXRpb24gfSBmcm9tIFwiLi4vLi4vaGVscGVycy9kZXZpY2Utc2V0dGluZ3NcIjtcbmltcG9ydCB7XG4gIGJyb3dzZXJBcmdzLFxuICBjb25maWcsXG4gIGNvbnRyb2xVUkwsXG4gIGNwdVRocm90dGxlUmF0ZSxcbiAgZGVidWcsXG4gIGVtdWxhdGVEZXZpY2UsXG4gIGVtdWxhdGVEZXZpY2VPcmllbnRhdGlvbixcbiAgZXhwZXJpbWVudFVSTCxcbiAgZmlkZWxpdHksXG4gIGhlYWRsZXNzLFxuICBpc0NJRW52LFxuICBtYXJrZXJzLFxuICBuZXR3b3JrLFxuICByZWdyZXNzaW9uVGhyZXNob2xkLFxuICByZXBvcnQsXG4gIHJ1bnRpbWVTdGF0cyxcbiAgc29ja3NQb3J0cyxcbiAgdGJSZXN1bHRzRm9sZGVyLFxuICB0cmFjaW5nTG9jYXRpb25TZWFyY2gsXG59IGZyb20gXCIuLi8uLi9oZWxwZXJzL2ZsYWdzXCI7XG5pbXBvcnQge1xuICBjaGFsa1NjaGVtZSxcbiAgY2hlY2tFbnZpcm9ubWVudFNwZWNpZmljT3ZlcnJpZGUsXG4gIGR1cmF0aW9uSW5TZWMsXG4gIHBhcnNlTWFya2VycyxcbiAgdGltZXN0YW1wLFxufSBmcm9tIFwiLi4vLi4vaGVscGVycy91dGlsc1wiO1xuaW1wb3J0IENvbXBhcmVBbmFseXplIGZyb20gXCIuL2FuYWx5emVcIjtcbmltcG9ydCBDb21wYXJlUmVwb3J0IGZyb20gXCIuL3JlcG9ydFwiO1xuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby12YXItcmVxdWlyZXNcbmNvbnN0IGFyY2hpdmVyID0gcmVxdWlyZShcImFyY2hpdmVyXCIpO1xuZXhwb3J0IGludGVyZmFjZSBJQ29tcGFyZUZsYWdzIHtcbiAgaGlkZUFuYWx5c2lzOiBib29sZWFuO1xuICBicm93c2VyQXJnczogc3RyaW5nW107XG4gIGNwdVRocm90dGxlUmF0ZTogbnVtYmVyO1xuICBmaWRlbGl0eTogbnVtYmVyO1xuICBtYXJrZXJzOiBJTWFya2VyW107XG4gIG5ldHdvcms6IFByb3RvY29sLk5ldHdvcmsuRW11bGF0ZU5ldHdvcmtDb25kaXRpb25zUmVxdWVzdDtcbiAgdGJSZXN1bHRzRm9sZGVyOiBzdHJpbmc7XG4gIGNvbnRyb2xVUkw6IHN0cmluZyB8IHVuZGVmaW5lZDtcbiAgZXhwZXJpbWVudFVSTDogc3RyaW5nIHwgdW5kZWZpbmVkO1xuICB0cmFjaW5nTG9jYXRpb25TZWFyY2g6IHN0cmluZztcbiAgcnVudGltZVN0YXRzOiBib29sZWFuO1xuICBlbXVsYXRlRGV2aWNlPzogc3RyaW5nO1xuICBlbXVsYXRlRGV2aWNlT3JpZW50YXRpb24/OiBzdHJpbmc7XG4gIHNvY2tzUG9ydHM/OiBbc3RyaW5nLCBzdHJpbmddIHwgW251bWJlciwgbnVtYmVyXSB8IHVuZGVmaW5lZDtcbiAgZGVidWc6IGJvb2xlYW47XG4gIHJlZ3Jlc3Npb25UaHJlc2hvbGQ/OiBudW1iZXI7XG4gIGhlYWRsZXNzOiBib29sZWFuO1xuICBjb25maWc/OiBzdHJpbmc7XG4gIHJlcG9ydD86IGJvb2xlYW47XG4gIGlzQ0lFbnY/OiBib29sZWFuO1xufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDb21wYXJlIGV4dGVuZHMgVEJCYXNlQ29tbWFuZCB7XG4gIHB1YmxpYyBzdGF0aWMgZGVzY3JpcHRpb24gPVxuICAgIFwiQ29tcGFyZSB0aGUgcGVyZm9ybWFuY2UgZGVsdGEgYmV0d2VlbiBhbiBleHBlcmltZW50IGFuZCBjb250cm9sXCI7XG4gIHB1YmxpYyBzdGF0aWMgZmxhZ3MgPSB7XG4gICAgaGlkZUFuYWx5c2lzOiBmbGFncy5ib29sZWFuKHtcbiAgICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgICAgZGVzY3JpcHRpb246IFwiSGlkZSB0aGUgdGhlIGFuYWx5c2lzIG91dHB1dCBpbiB0ZXJtaW5hbFwiLFxuICAgIH0pLFxuICAgIGJyb3dzZXJBcmdzOiBicm93c2VyQXJncyh7IHJlcXVpcmVkOiB0cnVlIH0pLFxuICAgIGNwdVRocm90dGxlUmF0ZTogY3B1VGhyb3R0bGVSYXRlKHsgcmVxdWlyZWQ6IHRydWUgfSksXG4gICAgZmlkZWxpdHk6IGZpZGVsaXR5KHsgcmVxdWlyZWQ6IHRydWUgfSksXG4gICAgbWFya2VyczogbWFya2Vycyh7IHJlcXVpcmVkOiB0cnVlIH0pLFxuICAgIG5ldHdvcms6IG5ldHdvcmsoeyByZXF1aXJlZDogdHJ1ZSB9KSxcbiAgICB0YlJlc3VsdHNGb2xkZXI6IHRiUmVzdWx0c0ZvbGRlcih7IHJlcXVpcmVkOiB0cnVlIH0pLFxuICAgIGNvbnRyb2xVUkw6IGNvbnRyb2xVUkwoeyByZXF1aXJlZDogZmFsc2UgfSksXG4gICAgZXhwZXJpbWVudFVSTDogZXhwZXJpbWVudFVSTCh7IHJlcXVpcmVkOiBmYWxzZSB9KSxcbiAgICB0cmFjaW5nTG9jYXRpb25TZWFyY2g6IHRyYWNpbmdMb2NhdGlvblNlYXJjaCh7IHJlcXVpcmVkOiB0cnVlIH0pLFxuICAgIGVtdWxhdGVEZXZpY2U6IGVtdWxhdGVEZXZpY2UoKSxcbiAgICBlbXVsYXRlRGV2aWNlT3JpZW50YXRpb246IGVtdWxhdGVEZXZpY2VPcmllbnRhdGlvbigpLFxuICAgIHNvY2tzUG9ydHM6IHNvY2tzUG9ydHMoKSxcbiAgICByZWdyZXNzaW9uVGhyZXNob2xkOiByZWdyZXNzaW9uVGhyZXNob2xkKCksXG4gICAgY29uZmlnOiBjb25maWcoKSxcbiAgICBydW50aW1lU3RhdHMsXG4gICAgcmVwb3J0LFxuICAgIGRlYnVnLFxuICAgIGhlYWRsZXNzLFxuICAgIGlzQ0lFbnY6IGlzQ0lFbnYoKSxcbiAgfTtcbiAgcHVibGljIGNvbXBhcmVGbGFnczogSUNvbXBhcmVGbGFncztcbiAgcHVibGljIHBhcnNlZENvbmZpZzogSVRCQ29uZmlnID0gZGVmYXVsdEZsYWdBcmdzO1xuICAvLyBmbGFncyBleHBsaWNpdGx5IHNwZWNpZmllZCB3aXRoaW4gdGhlIGNsaSB3aGVuXG4gIC8vIHJ1bm5pbmcgdGhlIGNvbW1hbmQuIHRoZXNlIHdpbGwgb3ZlcnJpZGUgYWxsXG4gIHB1YmxpYyBleHBsaWNpdEZsYWdzOiBzdHJpbmdbXTtcbiAgcHVibGljIGFuYWx5emVkSlNPTlN0cmluZyA9IFwiXCI7XG4gIGNvbnN0cnVjdG9yKGFyZ3Y6IHN0cmluZ1tdLCBjb25maWc6IElDb25maWcpIHtcbiAgICBzdXBlcihhcmd2LCBjb25maWcpO1xuICAgIGNvbnN0IHsgZmxhZ3MgfSA9IHRoaXMucGFyc2UoQ29tcGFyZSk7XG4gICAgdGhpcy5leHBsaWNpdEZsYWdzID0gYXJndjtcbiAgICB0aGlzLmNvbXBhcmVGbGFncyA9IGZsYWdzO1xuICB9XG5cbiAgLy8gaW5zdGFudGlhdGVkIGJlZm9yZSB0aGlzLnJ1bigpXG4gIHB1YmxpYyBhc3luYyBpbml0KCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IHsgZmxhZ3MgfSA9IHRoaXMucGFyc2UoQ29tcGFyZSk7XG4gICAgdGhpcy5wYXJzZWRDb25maWcgPSBnZXRDb25maWcoZmxhZ3MuY29uZmlnLCBmbGFncywgdGhpcy5leHBsaWNpdEZsYWdzKTtcbiAgICB0aGlzLmNvbXBhcmVGbGFncyA9IGZsYWdzO1xuICAgIGF3YWl0IHRoaXMucGFyc2VGbGFncygpO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIHJ1bigpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIGNvbnN0IHsgaGlkZUFuYWx5c2lzIH0gPSB0aGlzLmNvbXBhcmVGbGFncztcbiAgICBjb25zdCBbXG4gICAgICBjb250cm9sU2V0dGluZ3MsXG4gICAgICBleHBlcmltZW50U2V0dGluZ3MsXG4gICAgXSA9IHRoaXMuZ2VuZXJhdGVDb250cm9sRXhwZXJpbWVudFNlcnZlckNvbmZpZygpO1xuXG4gICAgLy8gdGhpcyBzaG91bGQgYmUgZGlyZWN0bHkgYWJvdmUgdGhlIGluc3RhbnRpYXRpb24gb2YgdGhlIEluaXRpYWxSZW5kZXJCZW5jaG1hcmtzXG4gICAgaWYgKHRoaXMucGFyc2VkQ29uZmlnLmRlYnVnKSB7XG4gICAgICBPYmplY3QuZW50cmllcyh0aGlzLnBhcnNlZENvbmZpZykuZm9yRWFjaCgoW2tleSwgdmFsdWVdKSA9PiB7XG4gICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgIHRoaXMubG9nKGAke2tleX06ICR7SlNPTi5zdHJpbmdpZnkodmFsdWUpfWApO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBjb25zdCBiZW5jaG1hcmtzID0ge1xuICAgICAgY29udHJvbDogbmV3IEluaXRpYWxSZW5kZXJCZW5jaG1hcmsoY29udHJvbFNldHRpbmdzKSxcbiAgICAgIGV4cGVyaW1lbnQ6IG5ldyBJbml0aWFsUmVuZGVyQmVuY2htYXJrKGV4cGVyaW1lbnRTZXR0aW5ncyksXG4gICAgfTtcblxuICAgIGNvbnN0IHJ1bm5lciA9IG5ldyBSdW5uZXIoW2JlbmNobWFya3MuY29udHJvbCwgYmVuY2htYXJrcy5leHBlcmltZW50XSk7XG4gICAgY29uc3Qgc3RhcnRUaW1lID0gdGltZXN0YW1wKCk7XG4gICAgYXdhaXQgcnVubmVyXG4gICAgICAucnVuKHRoaXMuY29tcGFyZUZsYWdzLmZpZGVsaXR5LCB0aGlzLmxvZylcbiAgICAgIC50aGVuKGFzeW5jIChyZXN1bHRzOiBhbnkpID0+IHtcbiAgICAgICAgY29uc3QgZW5kVGltZSA9IHRpbWVzdGFtcCgpO1xuICAgICAgICBpZiAoIXJlc3VsdHNbMF0uc2FtcGxlc1swXSkge1xuICAgICAgICAgIHRoaXMuZXJyb3IoXG4gICAgICAgICAgICBgQ291bGQgbm90IHNhbXBsZSBmcm9tIHByb3ZpZGVkIHVybHNcXG5DT05UUk9MOiAke3RoaXMucGFyc2VkQ29uZmlnLmNvbnRyb2xVUkx9XFxuRVhQRVJJTUVOVDogJHt0aGlzLnBhcnNlZENvbmZpZy5leHBlcmltZW50VVJMfS5gXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXN1bHRKU09OUGF0aCA9IGAke3RoaXMucGFyc2VkQ29uZmlnLnRiUmVzdWx0c0ZvbGRlcn0vY29tcGFyZS5qc29uYDtcblxuICAgICAgICBmcy53cml0ZUZpbGVTeW5jKHJlc3VsdEpTT05QYXRoLCBKU09OLnN0cmluZ2lmeShyZXN1bHRzLCBudWxsLCAyKSk7XG5cbiAgICAgICAgY29uc3QgdHJhY2VzRGlyID0gYCR7dGhpcy5wYXJzZWRDb25maWcudGJSZXN1bHRzRm9sZGVyfS90cmFjZXNgO1xuICAgICAgICBjb25zdCB6aXBPdXRwdXQgPSBmcy5jcmVhdGVXcml0ZVN0cmVhbShcbiAgICAgICAgICBgJHt0aGlzLnBhcnNlZENvbmZpZy50YlJlc3VsdHNGb2xkZXJ9L3RyYWNlcy56aXBgXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IGFyY2hpdmUgPSBhcmNoaXZlcihcInppcFwiLCB7XG4gICAgICAgICAgemxpYjogeyBsZXZlbDogOSB9LFxuICAgICAgICB9KTtcbiAgICAgICAgYXJjaGl2ZS5kaXJlY3RvcnkodHJhY2VzRGlyLCBcInRyYWNlc1wiKTtcbiAgICAgICAgYXJjaGl2ZS5waXBlKHppcE91dHB1dCk7XG4gICAgICAgIGFyY2hpdmUuZmluYWxpemUoKTtcblxuICAgICAgICAvLyBlc2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmU6IG1heC1saW5lLWxlbmd0aFxuICAgICAgICBjb25zdCBtZXNzYWdlID0gYCR7Y2hhbGtTY2hlbWUuYmxhY2tCZ0dyZWVuKFxuICAgICAgICAgIGAgICAgJHtjaGFsa1NjaGVtZS53aGl0ZShcIlNVQ0NFU1MhXCIpfSAgICBgXG4gICAgICAgICl9ICR7dGhpcy5wYXJzZWRDb25maWcuZmlkZWxpdHl9IHRlc3Qgc2FtcGxlcyB0b29rICR7ZHVyYXRpb25JblNlYyhcbiAgICAgICAgICBlbmRUaW1lLFxuICAgICAgICAgIHN0YXJ0VGltZVxuICAgICAgICApfSBzZWNvbmRzYDtcblxuICAgICAgICB0aGlzLmxvZyhgXFxuJHttZXNzYWdlfWApO1xuXG4gICAgICAgIGlmICghaGlkZUFuYWx5c2lzKSB7XG4gICAgICAgICAgdGhpcy5hbmFseXplZEpTT05TdHJpbmcgPSBhd2FpdCBDb21wYXJlQW5hbHl6ZS5ydW4oW1xuICAgICAgICAgICAgcmVzdWx0SlNPTlBhdGgsXG4gICAgICAgICAgICBcIi0tZmlkZWxpdHlcIixcbiAgICAgICAgICAgIGAke3RoaXMucGFyc2VkQ29uZmlnLmZpZGVsaXR5fWAsXG4gICAgICAgICAgICBcIi0tcmVncmVzc2lvblRocmVzaG9sZFwiLFxuICAgICAgICAgICAgYCR7dGhpcy5wYXJzZWRDb25maWcucmVncmVzc2lvblRocmVzaG9sZH1gLFxuICAgICAgICAgICAgXCItLWlzQ0lFbnZcIixcbiAgICAgICAgICAgIGAke3RoaXMucGFyc2VkQ29uZmlnLmlzQ0lFbnZ9YCxcbiAgICAgICAgICBdKTtcblxuICAgICAgICAgIGZzLndyaXRlRmlsZVN5bmMoXG4gICAgICAgICAgICBgJHt0aGlzLnBhcnNlZENvbmZpZy50YlJlc3VsdHNGb2xkZXJ9L3JlcG9ydC5qc29uYCxcbiAgICAgICAgICAgIHRoaXMuYW5hbHl6ZWRKU09OU3RyaW5nXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGlmIHdlIHdhbnQgdG8gcnVuIHRoZSBDb21wYXJlUmVwb3J0IHdpdGhvdXQgY2FsbGluZyBhIHNlcGFyYXRlIGNvbW1hbmRcbiAgICAgICAgaWYgKHRoaXMucGFyc2VkQ29uZmlnLnJlcG9ydCkge1xuICAgICAgICAgIGF3YWl0IENvbXBhcmVSZXBvcnQucnVuKFtcbiAgICAgICAgICAgIFwiLS10YlJlc3VsdHNGb2xkZXJcIixcbiAgICAgICAgICAgIGAke3RoaXMucGFyc2VkQ29uZmlnLnRiUmVzdWx0c0ZvbGRlcn1gLFxuICAgICAgICAgICAgXCItLWNvbmZpZ1wiLFxuICAgICAgICAgICAgYCR7dGhpcy5wYXJzZWRDb25maWcuY29uZmlnfWAsXG4gICAgICAgICAgXSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyB3aXRoIGRlYnVnIGZsYWcgb3V0cHV0IHRocmVlIGZpbGVzXG4gICAgICAgIC8vIG9uIGNvbmZpZyBzcGVjaWZpY3NcbiAgICAgICAgaWYgKHRoaXMucGFyc2VkQ29uZmlnLmRlYnVnKSB7XG4gICAgICAgICAgZnMud3JpdGVGaWxlU3luYyhcbiAgICAgICAgICAgIGAke3RoaXMucGFyc2VkQ29uZmlnLnRiUmVzdWx0c0ZvbGRlcn0vc2VydmVyLWNvbnRyb2wtc2V0dGluZ3MuanNvbmAsXG4gICAgICAgICAgICBKU09OLnN0cmluZ2lmeShPYmplY3QuYXNzaWduKGNvbnRyb2xTZXR0aW5ncyksIG51bGwsIDIpXG4gICAgICAgICAgKTtcblxuICAgICAgICAgIGZzLndyaXRlRmlsZVN5bmMoXG4gICAgICAgICAgICBgJHt0aGlzLnBhcnNlZENvbmZpZy50YlJlc3VsdHNGb2xkZXJ9L3NlcnZlci1leHBlcmltZW50LXNldHRpbmdzLmpzb25gLFxuICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkoT2JqZWN0LmFzc2lnbihleHBlcmltZW50U2V0dGluZ3MpLCBudWxsLCAyKVxuICAgICAgICAgICk7XG5cbiAgICAgICAgICBmcy53cml0ZUZpbGVTeW5jKFxuICAgICAgICAgICAgYCR7dGhpcy5wYXJzZWRDb25maWcudGJSZXN1bHRzRm9sZGVyfS9jb21wYXJlLWZsYWdzLXNldHRpbmdzLmpzb25gLFxuICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkoT2JqZWN0LmFzc2lnbih0aGlzLnBhcnNlZENvbmZpZyksIG51bGwsIDIpXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyOiBhbnkpID0+IHtcbiAgICAgICAgdGhpcy5lcnJvcihlcnIpO1xuICAgICAgfSk7XG5cbiAgICByZXR1cm4gdGhpcy5hbmFseXplZEpTT05TdHJpbmc7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHBhcnNlRmxhZ3MoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3Qge1xuICAgICAgdGJSZXN1bHRzRm9sZGVyLFxuICAgICAgZmlkZWxpdHksXG4gICAgICBtYXJrZXJzLFxuICAgICAgcmVncmVzc2lvblRocmVzaG9sZCxcbiAgICAgIGhlYWRsZXNzLFxuICAgICAgY29udHJvbFVSTCxcbiAgICAgIGV4cGVyaW1lbnRVUkwsXG4gICAgfSA9ICh0aGlzLnBhcnNlZENvbmZpZyBhcyB1bmtub3duKSBhcyBJQ29tcGFyZUZsYWdzO1xuXG4gICAgLy8gbW9kaWZpZXMgcHJvcGVydGllcyBvZiBmbGFncyB0aGF0IHdlcmUgbm90IHNldFxuICAgIC8vIGR1cmluZyBmbGFnLnBhcnNlKCkuIHRoZXNlIGFyZSBpbnRlbnRpb25hbGx5XG4gICAgLy8gbm90IGRlY29uc3RydWN0ZWQgYXMgdG8gbWFpbnRhaW4gdGhlIG11dGFibGVcbiAgICAvLyBmbGFncyBvYmplY3Qgc3RhdGVcbiAgICBpZiAodHlwZW9mIGZpZGVsaXR5ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICB0aGlzLmNvbXBhcmVGbGFncy5maWRlbGl0eSA9IHBhcnNlSW50KFxuICAgICAgICAoZmlkZWxpdHlMb29rdXAgYXMgYW55KVtmaWRlbGl0eV0sXG4gICAgICAgIDEwXG4gICAgICApO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIG1hcmtlcnMgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIHRoaXMucGFyc2VkQ29uZmlnLm1hcmtlcnMgPSBwYXJzZU1hcmtlcnMobWFya2Vycyk7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgcmVncmVzc2lvblRocmVzaG9sZCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgdGhpcy5wYXJzZWRDb25maWcucmVncmVzc2lvblRocmVzaG9sZCA9IHBhcnNlSW50KHJlZ3Jlc3Npb25UaHJlc2hvbGQsIDEwKTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBjb250cm9sVVJMID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMuZXJyb3IoXG4gICAgICAgIFwiY29udHJvbFVSTCBpcyByZXF1aXJlZCBlaXRoZXIgaW4gdGhlIHRiY29uZmlnLmpzb24gb3IgYXMgY2xpIGZsYWdcIlxuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIGV4cGVyaW1lbnRVUkwgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhpcy5lcnJvcihcbiAgICAgICAgXCJleHBlcmltZW50VVJMIGlzIHJlcXVpcmVkIGVpdGhlciBpbiB0aGUgdGJjb25maWcuanNvbiBvciBhcyBjbGkgZmxhZ1wiXG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIGlmIGhlYWRsZXNzIGZsYWcgaXMgdHJ1ZSBpbmNsdWRlIHRoZSBoZWFkbGVzcyBmbGFnc1xuICAgIGlmIChoZWFkbGVzcykge1xuICAgICAgdGhpcy5wYXJzZWRDb25maWcuYnJvd3NlckFyZ3MgPSB0aGlzLmNvbXBhcmVGbGFncy5icm93c2VyQXJncy5jb25jYXQoXG4gICAgICAgIGhlYWRsZXNzRmxhZ3NcbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gaWYgdGhlIGZvbGRlciBmb3IgdGhlIHRyYWNlcmJlbmNoIHJlc3VsdHMgZmlsZVxuICAgIC8vIGRvZXMgbm90IGV4aXN0IHRoZW4gY3JlYXRlIGl0XG4gICAgZnMubWtkaXJwU3luYyhwYXRoLmpvaW4odGJSZXN1bHRzRm9sZGVyLCBcInRyYWNlc1wiKSk7XG4gIH1cblxuICAvKipcbiAgICogRmluYWwgcmVzdWx0IG9mIHRoZSBjb25maWdzIGFyZSBpbiB0aGUgZm9sbG93aW5nIG9yZGVyOlxuICAgKlxuICAgKiBjb250cm9sQ29uZmlncyA9IHRiY29uZmlnOmNvbnRyb2xCZW5jaG1hcmtFbnZpcm9ubWVudCA+IGNvbW1hbmQgbGluZSA+IHRiY29uZmlnID4gZGVmYXVsdFxuICAgKiBleHBlcmltZW50Q29uZmlncyA9IHRiY29uZmlnOmV4cGVyaW1lbnRCZW5jaG1hcmtFbnZpcm9ubWVudCA+IGNvbW1hbmQgbGluZSA+IHRiY29uZmlnID4gZGVmYXVsdFxuICAgKlxuICAgKiBUaGlzIGZ1bmN0aW9ucyBoYW5kbGVzIHRoZSB0c2NvbmZpZzoqKiBwYXJ0IHNpbmNlIGl0IGlzIGFzc3VtZWQgdGhhdCBwYXJlbnQgZnVuY3Rpb24gdGhhdCBwYXNzZWQgaW5wdXQgXCJmbGFnc1wiXG4gICAqIHdvdWxkJ3ZlIGhhbmRsZWQgXCJjb21tYW5kIGxpbmUgPiB0YmNvbmZpZyA+IGRlZmF1bHRcIlxuICAgKlxuICAgKiBAcGFyYW0gdGhpcy5wYXJzZWRDb25maWcgLSBPYmplY3QgY29udGFpbmluZyBjb25maWdzIHBhcnNlZCBmcm9tIHRoZSBDb21tYW5kIGNsYXNzXG4gICAqL1xuICBwcml2YXRlIGdlbmVyYXRlQ29udHJvbEV4cGVyaW1lbnRTZXJ2ZXJDb25maWcoKTogW1xuICAgIElJbml0aWFsUmVuZGVyQmVuY2htYXJrUGFyYW1zLFxuICAgIElJbml0aWFsUmVuZGVyQmVuY2htYXJrUGFyYW1zXG4gIF0ge1xuICAgIC8vIGRlbGF5IGluIG1zIHRpbWVzIHRoZSBudW1iZXIgb2Ygc2FtcGxlcy4gdGhpcyBpbXByb3ZlcyB2YXJpYW5jZS5cbiAgICAvLyBlZyAxMDAgdG90YWwgc2FtcGxlcyBYIDIwMG1zIHBlciBzYW1wbGUgPSAyMCBzZWNvbmRzIHRvdGFsIGFkZGVkIHRvIHRoZSB0cmFjZSB0aW1lXG4gICAgY29uc3QgZGVsYXkgPSAyMDA7XG4gICAgY29uc3QgY29udHJvbEJyb3dzZXI6IFBhcnRpYWw8Q2hyb21lU3Bhd25PcHRpb25zPiA9IHtcbiAgICAgIGFkZGl0aW9uYWxBcmd1bWVudHM6IHRoaXMuY29tcGFyZUZsYWdzLmJyb3dzZXJBcmdzLFxuICAgIH07XG4gICAgY29uc3QgZXhwZXJpbWVudEJyb3dzZXI6IFBhcnRpYWw8Q2hyb21lU3Bhd25PcHRpb25zPiA9IHtcbiAgICAgIGFkZGl0aW9uYWxBcmd1bWVudHM6IHRoaXMuY29tcGFyZUZsYWdzLmJyb3dzZXJBcmdzLFxuICAgIH07XG5cbiAgICAvLyBjb25maWcgZm9yIHRoZSBicm93c2VycyB0byBsZXZlcmFnZSBzb2NrcyBwcm94eVxuICAgIGlmICh0aGlzLnBhcnNlZENvbmZpZy5zb2Nrc1BvcnRzKSB7XG4gICAgICBpZiAoY29udHJvbEJyb3dzZXIuYWRkaXRpb25hbEFyZ3VtZW50cykge1xuICAgICAgICBjb250cm9sQnJvd3Nlci5hZGRpdGlvbmFsQXJndW1lbnRzID0gY29udHJvbEJyb3dzZXIuYWRkaXRpb25hbEFyZ3VtZW50cy5jb25jYXQoXG4gICAgICAgICAgW2AtLXByb3h5LXNlcnZlcj1zb2NrczU6Ly8wLjAuMC4wOiR7dGhpcy5wYXJzZWRDb25maWcuc29ja3NQb3J0c1swXX1gXVxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgaWYgKGV4cGVyaW1lbnRCcm93c2VyLmFkZGl0aW9uYWxBcmd1bWVudHMpIHtcbiAgICAgICAgZXhwZXJpbWVudEJyb3dzZXIuYWRkaXRpb25hbEFyZ3VtZW50cyA9IGV4cGVyaW1lbnRCcm93c2VyLmFkZGl0aW9uYWxBcmd1bWVudHMuY29uY2F0KFxuICAgICAgICAgIFtgLS1wcm94eS1zZXJ2ZXI9c29ja3M1Oi8vMC4wLjAuMDoke3RoaXMucGFyc2VkQ29uZmlnLnNvY2tzUG9ydHNbMV19YF1cbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgY29udHJvbE5ldHdvcms6IHN0cmluZyA9IGNoZWNrRW52aXJvbm1lbnRTcGVjaWZpY092ZXJyaWRlKFxuICAgICAgXCJuZXR3b3JrXCIsXG4gICAgICB0aGlzLmNvbXBhcmVGbGFncyxcbiAgICAgIENPTlRST0xfRU5WX09WRVJSSURFX0FUVFIsXG4gICAgICB0aGlzLnBhcnNlZENvbmZpZ1xuICAgICk7XG4gICAgY29uc3QgY29udHJvbEVtdWxhdGVEZXZpY2UgPSBjaGVja0Vudmlyb25tZW50U3BlY2lmaWNPdmVycmlkZShcbiAgICAgIFwiZW11bGF0ZURldmljZVwiLFxuICAgICAgdGhpcy5jb21wYXJlRmxhZ3MsXG4gICAgICBDT05UUk9MX0VOVl9PVkVSUklERV9BVFRSLFxuICAgICAgdGhpcy5wYXJzZWRDb25maWdcbiAgICApO1xuICAgIGNvbnN0IGNvbnRyb2xFbXVsYXRlRGV2aWNlT3JpZW50YXRpb24gPSBjaGVja0Vudmlyb25tZW50U3BlY2lmaWNPdmVycmlkZShcbiAgICAgIFwiZW11bGF0ZURldmljZU9yaWVudGF0aW9uXCIsXG4gICAgICB0aGlzLmNvbXBhcmVGbGFncyxcbiAgICAgIENPTlRST0xfRU5WX09WRVJSSURFX0FUVFIsXG4gICAgICB0aGlzLnBhcnNlZENvbmZpZ1xuICAgICk7XG4gICAgY29uc3QgZXhwZXJpbWVudE5ldHdvcms6IHN0cmluZyA9IGNoZWNrRW52aXJvbm1lbnRTcGVjaWZpY092ZXJyaWRlKFxuICAgICAgXCJuZXR3b3JrXCIsXG4gICAgICB0aGlzLmNvbXBhcmVGbGFncyxcbiAgICAgIEVYUEVSSU1FTlRfRU5WX09WRVJSSURFX0FUVFIsXG4gICAgICB0aGlzLnBhcnNlZENvbmZpZ1xuICAgICk7XG4gICAgY29uc3QgZXhwZXJpbWVudEVtdWxhdGVEZXZpY2UgPSBjaGVja0Vudmlyb25tZW50U3BlY2lmaWNPdmVycmlkZShcbiAgICAgIFwiZW11bGF0ZURldmljZVwiLFxuICAgICAgdGhpcy5jb21wYXJlRmxhZ3MsXG4gICAgICBFWFBFUklNRU5UX0VOVl9PVkVSUklERV9BVFRSLFxuICAgICAgdGhpcy5wYXJzZWRDb25maWdcbiAgICApO1xuICAgIGNvbnN0IGV4cGVyaW1lbnRFbXVsYXRlRGV2aWNlT3JpZW50YXRpb24gPSBjaGVja0Vudmlyb25tZW50U3BlY2lmaWNPdmVycmlkZShcbiAgICAgIFwiZW11bGF0ZURldmljZU9yaWVudGF0aW9uXCIsXG4gICAgICB0aGlzLmNvbXBhcmVGbGFncyxcbiAgICAgIEVYUEVSSU1FTlRfRU5WX09WRVJSSURFX0FUVFIsXG4gICAgICB0aGlzLnBhcnNlZENvbmZpZ1xuICAgICk7XG5cbiAgICBjb25zdCBjb250cm9sU2V0dGluZ3M6IElJbml0aWFsUmVuZGVyQmVuY2htYXJrUGFyYW1zID0ge1xuICAgICAgYnJvd3NlcjogY29udHJvbEJyb3dzZXIsXG4gICAgICBjcHVUaHJvdHRsZVJhdGU6IGNoZWNrRW52aXJvbm1lbnRTcGVjaWZpY092ZXJyaWRlKFxuICAgICAgICBcImNwdVRocm90dGxlUmF0ZVwiLFxuICAgICAgICB0aGlzLmNvbXBhcmVGbGFncyxcbiAgICAgICAgQ09OVFJPTF9FTlZfT1ZFUlJJREVfQVRUUixcbiAgICAgICAgdGhpcy5wYXJzZWRDb25maWdcbiAgICAgICksXG4gICAgICBkZWxheSxcbiAgICAgIGVtdWxhdGVEZXZpY2VTZXR0aW5nczogY29udHJvbEVtdWxhdGVEZXZpY2VcbiAgICAgICAgPyBnZXRFbXVsYXRlRGV2aWNlU2V0dGluZ0ZvcktleUFuZE9yaWVudGF0aW9uKFxuICAgICAgICAgICAgY29udHJvbEVtdWxhdGVEZXZpY2UsXG4gICAgICAgICAgICBjb250cm9sRW11bGF0ZURldmljZU9yaWVudGF0aW9uXG4gICAgICAgICAgKVxuICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICAgIG1hcmtlcnM6IHRoaXMuY29tcGFyZUZsYWdzLm1hcmtlcnMsXG4gICAgICBuZXR3b3JrQ29uZGl0aW9uczogY29udHJvbE5ldHdvcmtcbiAgICAgICAgPyBuZXR3b3JrQ29uZGl0aW9uc1tjb250cm9sTmV0d29yayBhcyBrZXlvZiB0eXBlb2YgbmV0d29ya0NvbmRpdGlvbnNdXG4gICAgICAgIDogdGhpcy5jb21wYXJlRmxhZ3MubmV0d29yayxcbiAgICAgIG5hbWU6IFwiY29udHJvbFwiLFxuICAgICAgcnVudGltZVN0YXRzOiB0aGlzLmNvbXBhcmVGbGFncy5ydW50aW1lU3RhdHMsXG4gICAgICBzYXZlVHJhY2VzOiAoaSkgPT5cbiAgICAgICAgYCR7dGhpcy5jb21wYXJlRmxhZ3MudGJSZXN1bHRzRm9sZGVyfS90cmFjZXMvY29udHJvbCR7aX0uanNvbmAsXG4gICAgICB1cmw6IHBhdGguam9pbihcbiAgICAgICAgdGhpcy5jb21wYXJlRmxhZ3MuY29udHJvbFVSTCArIHRoaXMuY29tcGFyZUZsYWdzLnRyYWNpbmdMb2NhdGlvblNlYXJjaFxuICAgICAgKSxcbiAgICB9O1xuXG4gICAgY29uc3QgZXhwZXJpbWVudFNldHRpbmdzOiBJSW5pdGlhbFJlbmRlckJlbmNobWFya1BhcmFtcyA9IHtcbiAgICAgIGJyb3dzZXI6IGV4cGVyaW1lbnRCcm93c2VyLFxuICAgICAgY3B1VGhyb3R0bGVSYXRlOiBjaGVja0Vudmlyb25tZW50U3BlY2lmaWNPdmVycmlkZShcbiAgICAgICAgXCJjcHVUaHJvdHRsZVJhdGVcIixcbiAgICAgICAgdGhpcy5jb21wYXJlRmxhZ3MsXG4gICAgICAgIEVYUEVSSU1FTlRfRU5WX09WRVJSSURFX0FUVFIsXG4gICAgICAgIHRoaXMucGFyc2VkQ29uZmlnXG4gICAgICApLFxuICAgICAgZGVsYXksXG4gICAgICBlbXVsYXRlRGV2aWNlU2V0dGluZ3M6IGV4cGVyaW1lbnRFbXVsYXRlRGV2aWNlXG4gICAgICAgID8gZ2V0RW11bGF0ZURldmljZVNldHRpbmdGb3JLZXlBbmRPcmllbnRhdGlvbihcbiAgICAgICAgICAgIGV4cGVyaW1lbnRFbXVsYXRlRGV2aWNlLFxuICAgICAgICAgICAgZXhwZXJpbWVudEVtdWxhdGVEZXZpY2VPcmllbnRhdGlvblxuICAgICAgICAgIClcbiAgICAgICAgOiB1bmRlZmluZWQsXG4gICAgICBtYXJrZXJzOiB0aGlzLmNvbXBhcmVGbGFncy5tYXJrZXJzLFxuICAgICAgbmV0d29ya0NvbmRpdGlvbnM6IGV4cGVyaW1lbnROZXR3b3JrXG4gICAgICAgID8gbmV0d29ya0NvbmRpdGlvbnNbZXhwZXJpbWVudE5ldHdvcmsgYXMga2V5b2YgdHlwZW9mIG5ldHdvcmtDb25kaXRpb25zXVxuICAgICAgICA6IHRoaXMuY29tcGFyZUZsYWdzLm5ldHdvcmssXG4gICAgICBuYW1lOiBcImV4cGVyaW1lbnRcIixcbiAgICAgIHJ1bnRpbWVTdGF0czogdGhpcy5jb21wYXJlRmxhZ3MucnVudGltZVN0YXRzLFxuICAgICAgc2F2ZVRyYWNlczogKGkpID0+XG4gICAgICAgIGAke3RoaXMuY29tcGFyZUZsYWdzLnRiUmVzdWx0c0ZvbGRlcn0vdHJhY2VzL2V4cGVyaW1lbnQke2l9Lmpzb25gLFxuICAgICAgdXJsOiBwYXRoLmpvaW4oXG4gICAgICAgIHRoaXMuY29tcGFyZUZsYWdzLmV4cGVyaW1lbnRVUkwgK1xuICAgICAgICAgIHRoaXMuY29tcGFyZUZsYWdzLnRyYWNpbmdMb2NhdGlvblNlYXJjaFxuICAgICAgKSxcbiAgICB9O1xuXG4gICAgcmV0dXJuIFtjb250cm9sU2V0dGluZ3MsIGV4cGVyaW1lbnRTZXR0aW5nc107XG4gIH1cbn1cbiJdfQ==